filename _all_;
proc datasets lib = work kill;
quit;
run;

options ls=80 ps=55 nodate nonumber nofmterr mprint mlogic symbolgen MergeNoBy=error MSGLevel = I compress=yes;

/******************************************************************************
Authors:	Cheri Raffo (cheriraffo@gmail.com)
Program:	SUDDSM.sas
Date:		08.01.2017 	

PURPOSE:	Uses public data with survey level data to recreate each substances criteria and final diagnostic vars (DSM-IV abuse & dependence, DSM-5)
			In the final data, there are NO missings for criteria vars (all are either 1 or 0).  This program attempts to follow the logic to identify those who
			are 0, 1 or missing.  However, at the end of the program, there is an array that changes all missings --> 0 to maintain the replication of final
			vars - this section can be commented out for further investigation of missings.

			Time Points --> Past Year, Prior to Past Year and Lifetime


			The following substances have their criteria and final diagnostic vars derived (order in program):
				- Cannabis (ma)
				- Opioids (op)
				- Sedatives (sed) 
				- Cocaine (coc)
				- Stimulants (sti)
				- Club Drugs (clb)
				- Hallucinogen (hal)
				- Inhalants/Solvents (sol)
				- Heroin (her)
				- Alcohol (xalc)
				- Nicotine (nic)
				- Other Drugs (oth)


INPUT DS:	Publicfinal_102015

OUTPUT DS:	SUDDSM - a person-level dataset with original survey-level questions in addition to newly created criteria and diagnostic var.
					NOTE: all newly derived vars have "x_" in the varname (e.g., x_maud5)


************************************************************************************************************/

libname n3 "XXXXXXXXXXXXXXXXXXXXXX";

******************************************************************************************************************************************************************************************;

/*MACROS; change value 9 to ., 2 to 0, 1 to 1*/
%macro missing (arrayx=, varlist=);
	array &arrayx (*) &varlist;
	do i=1 to dim(&arrayx);
		if &arrayx(i)=2 then &arrayx(i)=0;
		else if &arrayx(i)=9 then &arrayx(i)=.;
		else if &arrayx(i)=1 then &arrayx(i)=1;
	end;
	drop i;
%mend;



/*initiate var to 0*/
%macro SymNo (var);
	&var=0;
%mend;

/*deal with missing values*/
%macro sumMiss (sumvar, varlist);
	if nmiss(of &varlist) > 0 and sum(of &varlist)=0 then &sumvar=.;
	else &sumvar=sum(of &varlist);
%mend;

/*change to binary variable*/
%macro diag (finalvar, sumvar, cutpt);
	if &sumvar >= &cutpt then &finalvar=1;
	else if . < &sumvar < &cutpt then &finalvar=0;
%mend;

******************************************************************************************************************************************************************************************;

data SUDDSM;
	set n3.XXXXXXXXXXXXXXX (read=XXXXXXXXXX);

*************************************************************************************************************************************************;
* CANNABIS																																									;		
*************************************************************************************************************************************************;

	****************************************;
	*	CANNABIS CRITERIA				;
	****************************************;
	if N3BQ1A3 = 2 then do; *NEVER;
		*PY = No;
		%SymNo(x_masym1);%SymNo(x_masym2);%SymNo(x_masym3);%SymNo(x_masym4);%SymNo(x_masym5);%SymNo(x_masym6);
		%SymNo(x_masym7);%SymNo(x_masym8);%SymNo(x_masym9);%SymNo(x_masym10);%SymNo(x_masym11);
		%SymNo(x_mawith1);%SymNo(x_mawith2);%SymNo(x_mawith3);%SymNo(x_mawith4);%SymNo(x_mawith5);%SymNo(x_mawith6);
		%SymNo(x_mawith7);%SymNo(x_masym11b);%SymNo(x_masym11a);
		%SymNo(x_masym4legal);
		*PPY = No;
		%SymNo(x_pmasym1);%SymNo(x_pmasym2);%SymNo(x_pmasym3);%SymNo(x_pmasym4);%SymNo(x_pmasym5);%SymNo(x_pmasym6);
		%SymNo(x_pmasym7);%SymNo(x_pmasym8);%SymNo(x_pmasym9);%SymNo(x_pmasym10);%SymNo(x_pmasym11);
		%SymNo(x_pmawith1);%SymNo(x_pmawith2);%SymNo(x_pmawith3);%SymNo(x_pmawith4);%SymNo(x_pmawith5);%SymNo(x_pmawith6);
		%SymNo(x_pmawith7);%SymNo(x_pmasym11b);%SymNo(x_pmasym11a);
		%SymNo(x_pmasym4legal);
	end;
	else if N3BQ1A3 in (1 9) then do; *EVER OR UKNOWN;
		if NDRUGUSER=2 then do; *NEVER;
			*PY = No;
			%SymNo(x_masym1);%SymNo(x_masym2);%SymNo(x_masym3);%SymNo(x_masym4);%SymNo(x_masym5);%SymNo(x_masym6);
			%SymNo(x_masym7);%SymNo(x_masym8);%SymNo(x_masym9);%SymNo(x_masym10);%SymNo(x_masym11);
			%SymNo(x_mawith1);%SymNo(x_mawith2);%SymNo(x_mawith3);%SymNo(x_mawith4);%SymNo(x_mawith5);%SymNo(x_mawith6);
			%SymNo(x_mawith7);%SymNo(x_masym11b);%SymNo(x_masym11a);
			%SymNo(x_masym4legal);
			*PPY = No;
			%SymNo(x_pmasym1);%SymNo(x_pmasym2);%SymNo(x_pmasym3);%SymNo(x_pmasym4);%SymNo(x_pmasym5);%SymNo(x_pmasym6);
			%SymNo(x_pmasym7);%SymNo(x_pmasym8);%SymNo(x_pmasym9);%SymNo(x_pmasym10);%SymNo(x_pmasym11);
			%SymNo(x_pmawith1);%SymNo(x_pmawith2);%SymNo(x_pmawith3);%SymNo(x_pmawith4);%SymNo(x_pmawith5);%SymNo(x_pmawith6);
			%SymNo(x_pmawith7);%SymNo(x_pmasym11b);%SymNo(x_pmasym11a);
			%SymNo(x_pmasym4legal);
		end;
		else do; *TIMING;
			if N3BD3Q2B = 1 then do; *PY ONLY;
				*****************;
				*PY CRITERIA;
				*****************;
				*Criterion 1: 32;
				if N3CD3Q1C32=1 then x_masym1=1;
				else if N3CQ1A32=2 or N3CQ1B32=2 then x_masym1=0;
				else if N3CD3Q1C32=2 then x_masym1=0;
				*Criterion 2: (30, 31);
				if N3CD3Q1C30=1 or N3CD3Q1C31=1 then x_masym2=1;
				else if N3CD3Q1C30=2 and N3CD3Q1C31=2 then x_masym2=0;
				*Criterion 3: (33, 34);
				if N3CD3Q1C33=1 or N3CD3Q1C34=1 then x_masym3=1;
				else if N3CD3Q1C33=2 and N3CD3Q1C34=2 then x_masym3=0;		
				*Criterion OLD 4 (LEGAL);
				if N3CQ12B3=1 then x_masym4legal=1;
				else if N3CQ12B3=2 or N3CQ12A=2 then x_masym4legal=0; *hierarchical question - if said no to parent or child question then no;
				*Criterion 4: CRAVING (39, 40);
				if N3CD3Q1C39=1 or N3CD3Q1C40=1 then x_masym4=1;
				else if N3CD3Q1C39=2 and N3CD3Q1C40=2 then x_masym4=0;
				*Criterion 5: 44-46;
				if N3CD3Q1C44=1 or N3CD3Q1C45=1 or N3CD3Q1C46=1 then x_masym5=1;
				else if N3CD3Q1C44=2 and N3CD3Q1C45=2 and N3CD3Q1C46=2 then x_masym5=0;
				*Criterion 6:41-43;
				if N3CD3Q1C41=1 or N3CD3Q1C42=1 or N3CD3Q1C43=1 then x_masym6=1;
				else if N3CD3Q1C41=2 and N3CD3Q1C42=2 and N3CD3Q1C43=2 then x_masym6=0;
				*Criterion 7: (35, 36);
				if N3CD3Q1C35=1 or N3CD3Q1C36=1 then x_masym7=1;
				else if N3CD3Q1C35=2 and N3CD3Q1C36=2 then x_masym7=0;
				*Criterion 8: 47, 48;
				if N3CD3Q1C47=1 or N3CD3Q1C48=1 then x_masym8=1;
				else if N3CD3Q1C47=2 and N3CD3Q1C48=2 then x_masym8=0;
				*Criterion 9: (37, 38);
				if N3CD3Q1C37=1 or N3CD3Q1C38=1 then x_masym9=1;
				else if N3CD3Q1C37=2 and N3CD3Q1C38=2 then x_masym9=0;
				*Criterion 10: 1, 2;
				if N3CD3Q1C1=1 or N3CD3Q1C2=1 then x_masym10=1;
				else if N3CD3Q1C1=2 and N3CD3Q1C2=2 then x_masym10=0;
				*Criterion 11 (withdrawal criterion);
				* Item A;
				if N3CD3Q1C22=1 or N3CD3Q1C24=1 then x_mawith1=1;
				else if N3CD3Q1C22=2 and N3CD3Q1C24=2 then x_mawith1=0;
				if N3CD3Q1C11=1 then x_mawith2=1;
				else if N3CD3Q1C11=2 then x_mawith2=0;
				if N3CD3Q1C17=1 or N3CD3Q1C20=1 then x_mawith3=1;
				else if N3CD3Q1C17=2 and N3CD3Q1C20=2 then x_mawith3=0;
				if N3CD3Q1C23=1 then x_mawith4=1;
				else if N3CD3Q1C23=2 then x_mawith4=0;
				if N3CD3Q1C14=1 then x_mawith5=1;
				else if N3CD3Q1C14=2 then x_mawith5=0;
				if N3CD3Q1C5=1 then x_mawith6=1;
				else if N3CD3Q1C5=2 then x_mawith6=0;
				if N3CD3Q1C28=1 or N3CD3Q1C19=1 or N3CD3Q1C26=1 or N3CD3Q1C13=1 or N3CD3Q1C27=1 or N3CD3Q1C25=1 then x_mawith7=1;
				else if N3CD3Q1C28=2 and N3CD3Q1C19=2 and N3CD3Q1C26=2 and N3CD3Q1C13=2 and N3CD3Q1C27=2 and N3CD3Q1C25=2 then x_mawith7=0;
				*Item B (29);
				if N3CD3Q1C29=1 then x_masym11b=1;
				else if N3CD3Q1C29=2 then x_masym11b=0;
				*Criterion 11 (withdrawal criterion) - Final;
				%sumMiss (x_sumallmawith, x_mawith1 x_mawith2 x_mawith3 x_mawith4 x_mawith5 x_mawith6 x_mawith7);
				%diag (x_masym11a, x_sumallmawith, 3);
				if x_masym11a=1 or x_masym11b=1 then x_masym11=1;
				else if x_masym11a=0 and x_masym11b=0 then x_masym11=0;
				*PPY = No;
				%SymNo(x_pmasym1);%SymNo(x_pmasym2);%SymNo(x_pmasym3);%SymNo(x_pmasym4);%SymNo(x_pmasym5);%SymNo(x_pmasym6);
				%SymNo(x_pmasym7);%SymNo(x_pmasym8);%SymNo(x_pmasym9);%SymNo(x_pmasym10);%SymNo(x_pmasym11);
				%SymNo(x_pmawith1);%SymNo(x_pmawith2);%SymNo(x_pmawith3);%SymNo(x_pmawith4);%SymNo(x_pmawith5);%SymNo(x_pmawith6);
				%SymNo(x_pmawith7);%SymNo(x_pmasym11b);%SymNo(x_pmasym11a);
				%SymNo(x_pmasym4legal)
			end; *PY ONLY;
			else if N3BD3Q2B = 2 then do; *PPY ONLY;
				*****************;
				*PPY CRITERIA;
				*****************;
				*Criterion 1: 32;
				if N3CD3Q1E32=1 then x_pmasym1=1;
				else if N3CQ1A32=2 or N3CQ1D32=2 then x_pmasym1=0;
				else if N3CD3Q1E32=2 then x_pmasym1=0;
				*Criterion 2: (30, 31);
				if N3CD3Q1E30=1 or N3CD3Q1E31=1 then x_pmasym2=1;
				else if N3CD3Q1E30=2 and N3CD3Q1E31=2 then x_pmasym2=0;
				*Criterion 3: (33, 34);
				if N3CD3Q1E33=1 or N3CD3Q1E34=1 then x_pmasym3=1;
				else if N3CD3Q1E33=2 and N3CD3Q1E34=2 then x_pmasym3=0;		
				*Criterion OLD 4 (LEGAL);
				if N3CQ12D3=1 then x_pmasym4legal=1;
				else if N3CQ12D3=2 or N3CQ12C=2 then x_pmasym4legal=0; *hierarchical question - if said no to parent or child question then no;
				*Criterion 4: CRAVING (39, 40);
				if N3CD3Q1E39=1 or N3CD3Q1E40=1 then x_pmasym4=1;
				else if N3CD3Q1E39=2 and N3CD3Q1E40=2 then x_pmasym4=0;
				*Criterion 5: 44-46;
				if N3CD3Q1E44=1 or N3CD3Q1E45=1 or N3CD3Q1E46=1 then x_pmasym5=1;
				else if N3CD3Q1E44=2 and N3CD3Q1E45=2 and N3CD3Q1E46=2 then x_pmasym5=0;
				*Criterion 6:41-43;
				if N3CD3Q1E41=1 or N3CD3Q1E42=1 or N3CD3Q1E43=1 then x_pmasym6=1;
				else if N3CD3Q1E41=2 and N3CD3Q1E42=2 and N3CD3Q1E43=2 then x_pmasym6=0;
				*Criterion 7: (35, 36);
				if N3CD3Q1E35=1 or N3CD3Q1E36=1 then x_pmasym7=1;
				else if N3CD3Q1E35=2 and N3CD3Q1E36=2 then x_pmasym7=0;
				*Criterion 8: 47, 48;
				if N3CD3Q1E47=1 or N3CD3Q1E48=1 then x_pmasym8=1;
				else if N3CD3Q1E47=2 and N3CD3Q1E48=2 then x_pmasym8=0;
				*Criterion 9: (37, 38);
				if N3CD3Q1E37=1 or N3CD3Q1E38=1 then x_pmasym9=1;
				else if N3CD3Q1E37=2 and N3CD3Q1E38=2 then x_pmasym9=0;
				*Criterion 10: 1, 2;
				if N3CD3Q1E1=1 or N3CD3Q1E2=1 then x_pmasym10=1;
				else if N3CD3Q1E1=2 and N3CD3Q1E2=2 then x_pmasym10=0;
				*Criterion 11 (withdrawal criterion);
				* Item A;
				if N3CD3Q1E22=1 or N3CD3Q1E24=1 then x_pmawith1=1;
				else if N3CD3Q1E22=2 and N3CD3Q1E24=2 then x_pmawith1=0;
				if N3CD3Q1E11=1 then x_pmawith2=1;
				else if N3CD3Q1E11=2 then x_pmawith2=0;
				if N3CD3Q1E17=1 or N3CD3Q1E20=1 then x_pmawith3=1;
				else if N3CD3Q1E17=2 and N3CD3Q1E20=2 then x_pmawith3=0;
				if N3CD3Q1E23=1 then x_pmawith4=1;
				else if N3CD3Q1E23=2 then x_pmawith4=0;
				if N3CD3Q1E14=1 then x_pmawith5=1;
				else if N3CD3Q1E14=2 then x_pmawith5=0;
				if N3CD3Q1E5=1 then x_pmawith6=1;
				else if N3CD3Q1E5=2 then x_pmawith6=0;
				if N3CD3Q1E28=1 or N3CD3Q1E19=1 or N3CD3Q1E26=1 or N3CD3Q1E13=1 or N3CD3Q1E27=1 or N3CD3Q1E25=1 then x_pmawith7=1;
				else if N3CD3Q1E28=2 and N3CD3Q1E19=2 and N3CD3Q1E26=2 and N3CD3Q1E13=2 and N3CD3Q1E27=2 and N3CD3Q1E25=2 then x_pmawith7=0;
				*Item B (29);
				if N3CD3Q1E29=1 then x_pmasym11b=1;
				else if N3CD3Q1E29=2 then x_pmasym11b=0;
				*Criterion 11 (withdrawal criterion) - Final;
				%sumMiss (x_psumallmawith, x_pmawith1 x_pmawith2 x_pmawith3 x_pmawith4 x_pmawith5 x_pmawith6 x_pmawith7);
				%diag (x_pmasym11a, x_psumallmawith, 3);
				if x_pmasym11a=1 or x_pmasym11b=1 then x_pmasym11=1;
				else if x_pmasym11a=0 and x_pmasym11b=0 then x_pmasym11=0;
				*PY = No;
				%SymNo(x_masym1);%SymNo(x_masym2);%SymNo(x_masym3);%SymNo(x_masym4);%SymNo(x_masym5);%SymNo(x_masym6);
				%SymNo(x_masym7);%SymNo(x_masym8);%SymNo(x_masym9);%SymNo(x_masym10);%SymNo(x_masym11);
				%SymNo(x_mawith1);%SymNo(x_mawith2);%SymNo(x_mawith3);%SymNo(x_mawith4);%SymNo(x_mawith5);%SymNo(x_mawith6);
				%SymNo(x_mawith7);%SymNo(x_masym11b);%SymNo(x_masym11a);
				%SymNo(x_masym4legal)
			end; *PPY ONLY;
			else if N3BD3Q2B in (3 9 .) then do; *PY + PPY or UNKNOWN;
				*****************;
				*PY CRITERIA;
				*****************;
				*Criterion 1: 32;
				if N3CD3Q1C32=1 then x_masym1=1;
				else if N3CQ1A32=2 or N3CQ1B32=2 then x_masym1=0;
				else if N3CD3Q1C32=2 then x_masym1=0;
				*Criterion 2: (30, 31);
				if N3CD3Q1C30=1 or N3CD3Q1C31=1 then x_masym2=1;
				else if N3CD3Q1C30=2 and N3CD3Q1C31=2 then x_masym2=0;
				*Criterion 3: (33, 34);
				if N3CD3Q1C33=1 or N3CD3Q1C34=1 then x_masym3=1;
				else if N3CD3Q1C33=2 and N3CD3Q1C34=2 then x_masym3=0;		
				*Criterion OLD 4 (LEGAL);
				if N3CQ12B3=1 then x_masym4legal=1;
				else if N3CQ12B3=2 or N3CQ12A=2 then x_masym4legal=0; *hierarchical question - if said no to parent or child question then no;
				*Criterion 4: CRAVING (39, 40);
				if N3CD3Q1C39=1 or N3CD3Q1C40=1 then x_masym4=1;
				else if N3CD3Q1C39=2 and N3CD3Q1C40=2 then x_masym4=0;
				*Criterion 5: 44-46;
				if N3CD3Q1C44=1 or N3CD3Q1C45=1 or N3CD3Q1C46=1 then x_masym5=1;
				else if N3CD3Q1C44=2 and N3CD3Q1C45=2 and N3CD3Q1C46=2 then x_masym5=0;
				*Criterion 6:41-43;
				if N3CD3Q1C41=1 or N3CD3Q1C42=1 or N3CD3Q1C43=1 then x_masym6=1;
				else if N3CD3Q1C41=2 and N3CD3Q1C42=2 and N3CD3Q1C43=2 then x_masym6=0;
				*Criterion 7: (35, 36);
				if N3CD3Q1C35=1 or N3CD3Q1C36=1 then x_masym7=1;
				else if N3CD3Q1C35=2 and N3CD3Q1C36=2 then x_masym7=0;
				*Criterion 8: 47, 48;
				if N3CD3Q1C47=1 or N3CD3Q1C48=1 then x_masym8=1;
				else if N3CD3Q1C47=2 and N3CD3Q1C48=2 then x_masym8=0;
				*Criterion 9: (37, 38);
				if N3CD3Q1C37=1 or N3CD3Q1C38=1 then x_masym9=1;
				else if N3CD3Q1C37=2 and N3CD3Q1C38=2 then x_masym9=0;
				*Criterion 10: 1, 2;
				if N3CD3Q1C1=1 or N3CD3Q1C2=1 then x_masym10=1;
				else if N3CD3Q1C1=2 and N3CD3Q1C2=2 then x_masym10=0;
				*Criterion 11 (withdrawal criterion);
				* Item A;
				if N3CD3Q1C22=1 or N3CD3Q1C24=1 then x_mawith1=1;
				else if N3CD3Q1C22=2 and N3CD3Q1C24=2 then x_mawith1=0;
				if N3CD3Q1C11=1 then x_mawith2=1;
				else if N3CD3Q1C11=2 then x_mawith2=0;
				if N3CD3Q1C17=1 or N3CD3Q1C20=1 then x_mawith3=1;
				else if N3CD3Q1C17=2 and N3CD3Q1C20=2 then x_mawith3=0;
				if N3CD3Q1C23=1 then x_mawith4=1;
				else if N3CD3Q1C23=2 then x_mawith4=0;
				if N3CD3Q1C14=1 then x_mawith5=1;
				else if N3CD3Q1C14=2 then x_mawith5=0;
				if N3CD3Q1C5=1 then x_mawith6=1;
				else if N3CD3Q1C5=2 then x_mawith6=0;
				if N3CD3Q1C28=1 or N3CD3Q1C19=1 or N3CD3Q1C26=1 or N3CD3Q1C13=1 or N3CD3Q1C27=1 or N3CD3Q1C25=1 then x_mawith7=1;
				else if N3CD3Q1C28=2 and N3CD3Q1C19=2 and N3CD3Q1C26=2 and N3CD3Q1C13=2 and N3CD3Q1C27=2 and N3CD3Q1C25=2 then x_mawith7=0;
				*Item B (29);
				if N3CD3Q1C29=1 then x_masym11b=1;
				else if N3CD3Q1C29=2 then x_masym11b=0;
				*Criterion 11 (withdrawal criterion) - Final;
				%sumMiss (x_sumallmawith, x_mawith1 x_mawith2 x_mawith3 x_mawith4 x_mawith5 x_mawith6 x_mawith7);
				%diag (x_masym11a, x_sumallmawith, 3);
				if x_masym11a=1 or x_masym11b=1 then x_masym11=1;
				else if x_masym11a=0 and x_masym11b=0 then x_masym11=0;
				*****************;
				*PPY CRITERIA;
				*****************;
				*Criterion 1: 32;
				if N3CD3Q1E32=1 then x_pmasym1=1;
				else if N3CQ1A32=2 or N3CQ1D32=2 then x_pmasym1=0;
				else if N3CD3Q1E32=2 then x_pmasym1=0;
				*Criterion 2: (30, 31);
				if N3CD3Q1E30=1 or N3CD3Q1E31=1 then x_pmasym2=1;
				else if N3CD3Q1E30=2 and N3CD3Q1E31=2 then x_pmasym2=0;
				*Criterion 3: (33, 34);
				if N3CD3Q1E33=1 or N3CD3Q1E34=1 then x_pmasym3=1;
				else if N3CD3Q1E33=2 and N3CD3Q1E34=2 then x_pmasym3=0;		
				*Criterion OLD 4 (LEGAL);
				if N3CQ12D3=1 then x_pmasym4legal=1;
				else if N3CQ12D3=2 or N3CQ12C=2 then x_pmasym4legal=0; *hierarchical question - if said no to parent or child question then no;
				*Criterion 4: CRAVING (39, 40);
				if N3CD3Q1E39=1 or N3CD3Q1E40=1 then x_pmasym4=1;
				else if N3CD3Q1E39=2 and N3CD3Q1E40=2 then x_pmasym4=0;
				*Criterion 5: 44-46;
				if N3CD3Q1E44=1 or N3CD3Q1E45=1 or N3CD3Q1E46=1 then x_pmasym5=1;
				else if N3CD3Q1E44=2 and N3CD3Q1E45=2 and N3CD3Q1E46=2 then x_pmasym5=0;
				*Criterion 6:41-43;
				if N3CD3Q1E41=1 or N3CD3Q1E42=1 or N3CD3Q1E43=1 then x_pmasym6=1;
				else if N3CD3Q1E41=2 and N3CD3Q1E42=2 and N3CD3Q1E43=2 then x_pmasym6=0;
				*Criterion 7: (35, 36);
				if N3CD3Q1E35=1 or N3CD3Q1E36=1 then x_pmasym7=1;
				else if N3CD3Q1E35=2 and N3CD3Q1E36=2 then x_pmasym7=0;
				*Criterion 8: 47, 48;
				if N3CD3Q1E47=1 or N3CD3Q1E48=1 then x_pmasym8=1;
				else if N3CD3Q1E47=2 and N3CD3Q1E48=2 then x_pmasym8=0;
				*Criterion 9: (37, 38);
				if N3CD3Q1E37=1 or N3CD3Q1E38=1 then x_pmasym9=1;
				else if N3CD3Q1E37=2 and N3CD3Q1E38=2 then x_pmasym9=0;
				*Criterion 10: 1, 2;
				if N3CD3Q1E1=1 or N3CD3Q1E2=1 then x_pmasym10=1;
				else if N3CD3Q1E1=2 and N3CD3Q1E2=2 then x_pmasym10=0;
				*Criterion 11 (withdrawal criterion);
				* Item A;
				if N3CD3Q1E22=1 or N3CD3Q1E24=1 then x_pmawith1=1;
				else if N3CD3Q1E22=2 and N3CD3Q1E24=2 then x_pmawith1=0;
				if N3CD3Q1E11=1 then x_pmawith2=1;
				else if N3CD3Q1E11=2 then x_pmawith2=0;
				if N3CD3Q1E17=1 or N3CD3Q1E20=1 then x_pmawith3=1;
				else if N3CD3Q1E17=2 and N3CD3Q1E20=2 then x_pmawith3=0;
				if N3CD3Q1E23=1 then x_pmawith4=1;
				else if N3CD3Q1E23=2 then x_pmawith4=0;
				if N3CD3Q1E14=1 then x_pmawith5=1;
				else if N3CD3Q1E14=2 then x_pmawith5=0;
				if N3CD3Q1E5=1 then x_pmawith6=1;
				else if N3CD3Q1E5=2 then x_pmawith6=0;
				if N3CD3Q1E28=1 or N3CD3Q1E19=1 or N3CD3Q1E26=1 or N3CD3Q1E13=1 or N3CD3Q1E27=1 or N3CD3Q1E25=1 then x_pmawith7=1;
				else if N3CD3Q1E28=2 and N3CD3Q1E19=2 and N3CD3Q1E26=2 and N3CD3Q1E13=2 and N3CD3Q1E27=2 and N3CD3Q1E25=2 then x_pmawith7=0;
				*Item B (29);
				if N3CD3Q1E29=1 then x_pmasym11b=1;
				else if N3CD3Q1E29=2 then x_pmasym11b=0;
				*Criterion 11 (withdrawal criterion) - Final;
				%sumMiss (x_psumallmawith, x_pmawith1 x_pmawith2 x_pmawith3 x_pmawith4 x_pmawith5 x_pmawith6 x_pmawith7);
				%diag (x_pmasym11a, x_psumallmawith, 3);
				if x_pmasym11a=1 or x_pmasym11b=1 then x_pmasym11=1;
				else if x_pmasym11a=0 and x_pmasym11b=0 then x_pmasym11=0;
			end; 
		end;
	end;

	****************************************;
	*	CANNABIS FINAL VARS			;
	****************************************;

	********************;
	*DSM-IV ABUSE;
	********************;
	%sumMiss (x_summaab4, 	x_masym5 x_masym8 x_masym4legal x_masym6);
	%sumMiss (x_psummaab4, 	x_pmasym5 x_pmasym8 x_pmasym4legal x_pmasym6);

	%diag (x_maabuse4, 	x_summaab4, 	1);
	%diag (x_pmaabuse4, 	x_psummaab4, 	1);
	
	if x_maabuse4=1 or x_pmaabuse4=1 then x_lmaabuse4=1;
	else if x_maabuse4=0 and x_pmaabuse4=0 then x_lmaabuse4=0;

	********************;
	*DSM-IV DEP	;
	********************;
	%sumMiss (x_summadep4, 	x_masym10 x_masym1 x_masym2 x_masym3 x_masym7 x_masym9);
	%sumMiss (x_psummadep4, 	x_pmasym10 x_pmasym1 x_pmasym2 x_pmasym3 x_pmasym7 x_pmasym9);

	%diag (x_madep4, 	x_summadep4, 		3);

	*PPY has additional requirement for diagnosis;
	if x_psummadep4 >=3 then do;
		if N3CD3Q2A=1 then x_pmadep4=1; *expericences happened around same time (pg 11);
		else if N3CD3Q2A = 2 then x_pmadep4=0; *experiences did not happen around same time;
		else if N3CD3Q2A = 9 then x_pmadep4=.;
	end;
	else if . < x_psummadep4 <3 then x_pmadep4=0;

	if x_madep4=1 or x_pmadep4=1 then x_lmadep4=1;
	else if x_madep4=0 and x_pmadep4=0 then x_lmadep4=0;

	********************;
	*DSM-5				;
	********************;
	%sumMiss (x_summaud5, 	x_masym1 x_masym2 x_masym3 x_masym4 x_masym5 x_masym6 x_masym7 x_masym8 x_masym9 x_masym10 x_masym11);
	%sumMiss (x_psummaud5, 	x_pmasym1 x_pmasym2 x_pmasym3 x_pmasym4 x_pmasym5 x_pmasym6 x_pmasym7 x_pmasym8 x_pmasym9 x_pmasym10 x_pmasym11);

	%diag (x_maud5, 		x_summaud5, 	2);

	if x_psummaud5 >=2 then do;
		if N3CD3Q2A=1 then x_pmaud5=1;
		else if N3CD3Q2A = 2 then x_pmaud5=0; 
		else if N3CD3Q2A = 9 then x_pmaud5=.;
	end;
	else if . < x_psummaud5 <2 then x_pmaud5=0;

	if x_maud5=1 or x_pmaud5=1 then x_lmaud5=1;
	else if x_maud5=0 and x_pmaud5=0 then x_lmaud5=0;

	if x_summaud5 in (0 1) then x_maud5sev=0;
	else if x_summaud5 in (2 3) then x_maud5sev=1;
	else if x_summaud5 in (4 5) then x_maud5sev=2;
	else if x_summaud5 >= 6 then x_maud5sev=3;

	if x_psummaud5 in (0 1) then x_pmaud5sev=0;
	else if x_psummaud5>1 and N3CD3Q2A=1 then do;
		if x_psummaud5 in (2 3) then x_pmaud5sev=1;
		else if x_psummaud5 in (4 5) then x_pmaud5sev=2;
		else if x_psummaud5 >= 6 then x_pmaud5sev=3;
	end;
	else if x_psummaud5>1 and N3CD3Q2A=2 then x_pmaud5sev=0;

*************************************************************************************************************************************************;
* OPIOIDS																																										;		
*************************************************************************************************************************************************;

	****************************************;
	*	OPIOIDS CRITERIA				;
	****************************************;
	if N3BQ1A2 = 2 then do; *NEVER;
		*PY = No;
		%SymNo(x_opsym1);%SymNo(x_opsym2);%SymNo(x_opsym3);%SymNo(x_opsym4);%SymNo(x_opsym5);%SymNo(x_opsym6);
		%SymNo(x_opsym7);%SymNo(x_opsym8);%SymNo(x_opsym9);%SymNo(x_opsym10);%SymNo(x_opsym11);
		%SymNo(x_opsym11b);%SymNo(x_opsym11a);
		%SymNo(x_opwith1);%SymNo(x_opwith2);%SymNo(x_opwith3);%SymNo(x_opwith4);%SymNo(x_opwith5);%SymNo(x_opwith6);
		%SymNo(x_opwith7);%SymNo(x_opwith8);%SymNo(x_opwith9);
		%SymNo(x_opsym4legal);
		*PPY = No;
		%SymNo(x_popsym1);%SymNo(x_popsym2);%SymNo(x_popsym3);%SymNo(x_popsym4);%SymNo(x_popsym5);%SymNo(x_popsym6);
		%SymNo(x_popsym7);%SymNo(x_popsym8);%SymNo(x_popsym9);%SymNo(x_popsym10);%SymNo(x_popsym11);
		%SymNo(x_popsym11b);%SymNo(x_popsym11a);
		%SymNo(x_popwith1);%SymNo(x_popwith2);%SymNo(x_popwith3);%SymNo(x_popwith4);%SymNo(x_popwith5);%SymNo(x_popwith6);
		%SymNo(x_popwith7);%SymNo(x_popwith8);%SymNo(x_popwith9);
		%SymNo(x_popsym4legal);
	end;
	else if N3BQ1A2 in (1 9) then do; *EVER OR UKNOWN;
		if NDRUGUSER=2 then do; *NEVER;
			*PY = No;
			%SymNo(x_opsym1);%SymNo(x_opsym2);%SymNo(x_opsym3);%SymNo(x_opsym4);%SymNo(x_opsym5);%SymNo(x_opsym6);
			%SymNo(x_opsym7);%SymNo(x_opsym8);%SymNo(x_opsym9);%SymNo(x_opsym10);%SymNo(x_opsym11);
			%SymNo(x_opsym11b);%SymNo(x_opsym11a);
			%SymNo(x_opwith1);%SymNo(x_opwith2);%SymNo(x_opwith3);%SymNo(x_opwith4);%SymNo(x_opwith5);%SymNo(x_opwith6);
			%SymNo(x_opwith7);%SymNo(x_opwith8);%SymNo(x_opwith9);
			%SymNo(x_opsym4legal);
			*PPY = No;
			%SymNo(x_popsym1);%SymNo(x_popsym2);%SymNo(x_popsym3);%SymNo(x_popsym4);%SymNo(x_popsym5);%SymNo(x_popsym6);
			%SymNo(x_popsym7);%SymNo(x_popsym8);%SymNo(x_popsym9);%SymNo(x_popsym10);%SymNo(x_popsym11);
			%SymNo(x_popsym11b);%SymNo(x_popsym11a);
			%SymNo(x_popwith1);%SymNo(x_popwith2);%SymNo(x_popwith3);%SymNo(x_popwith4);%SymNo(x_popwith5);%SymNo(x_popwith6);
			%SymNo(x_popwith7);%SymNo(x_popwith8);%SymNo(x_popwith9);
			%SymNo(x_popsym4legal);
		end;
		else do; *TIMING;
			if N3BD2Q2B = 1 then do; *PY ONLY;
				*****************;
				*PY CRITERIA;
				*****************;
				*Criterion 1: 32;
				if N3CD2Q1C32=1 then x_opsym1=1;
				else if N3CQ1A32=2 or N3CQ1B32=2 then x_opsym1=0;
				else if N3CD2Q1C32=2 then x_opsym1=0;
				*Criterion 2: (30, 31);
				if N3CD2Q1C30=1 or N3CD2Q1C31=1 then x_opsym2=1;
				else if N3CD2Q1C30=2 and N3CD2Q1C31=2 then x_opsym2=0;
				*Criterion 3: (33, 34);
				if N3CD2Q1C33=1 or N3CD2Q1C34=1 then x_opsym3=1;
				else if N3CD2Q1C33=2 and N3CD2Q1C34=2 then x_opsym3=0;		
				*Criterion OLD 4 (LEGAL);
				if N3CQ12B2=1 then x_opsym4legal=1;
				else if N3CQ12B2=2 or N3CQ12A=2 then x_opsym4legal=0; *hierarchical question - if said no to parent or child question then no;
				*Criterion 4: CRAVING (39, 40);
				if N3CD2Q1C39=1 or N3CD2Q1C40=1 then x_opsym4=1;
				else if N3CD2Q1C39=2 and N3CD2Q1C40=2 then x_opsym4=0;
				*Criterion 5: 44-46;
				if N3CD2Q1C44=1 or N3CD2Q1C45=1 or N3CD2Q1C46=1 then x_opsym5=1;
				else if N3CD2Q1C44=2 and N3CD2Q1C45=2 and N3CD2Q1C46=2 then x_opsym5=0;
				*Criterion 6:41-43;
				if N3CD2Q1C41=1 or N3CD2Q1C42=1 or N3CD2Q1C43=1 then x_opsym6=1;
				else if N3CD2Q1C41=2 and N3CD2Q1C42=2 and N3CD2Q1C43=2 then x_opsym6=0;
				*Criterion 7: (35, 36);
				if N3CD2Q1C35=1 or N3CD2Q1C36=1 then x_opsym7=1;
				else if N3CD2Q1C35=2 and N3CD2Q1C36=2 then x_opsym7=0;
				*Criterion 8: 47, 48;
				if N3CD2Q1C47=1 or N3CD2Q1C48=1 then x_opsym8=1;
				else if N3CD2Q1C47=2 and N3CD2Q1C48=2 then x_opsym8=0;
				*Criterion 9: (37, 38);
				if N3CD2Q1C37=1 or N3CD2Q1C38=1 then x_opsym9=1;
				else if N3CD2Q1C37=2 and N3CD2Q1C38=2 then x_opsym9=0;
				*Criterion 10: 1, 2;
				if N3CD2Q1C1=1 or N3CD2Q1C2=1 then x_opsym10=1;
				else if N3CD2Q1C1=2 and N3CD2Q1C2=2 then x_opsym10=0;
				*Criterion 11 (withdrawal criterion);
				* Item A;
				if N3CD2Q1C5=1 then x_opwith1=1;
				else if N3CD2Q1C5=2 then x_opwith1=0;
				if N3CD2Q1C7=1 then x_opwith2=1;
				else if N3CD2Q1C7=2 then x_opwith2=0;
				if N3CD2Q1C12=1 then x_opwith3=1;
				else if N3CD2Q1C12=2 then x_opwith3=0;
				if N3CD2Q1C9=1 then x_opwith4=1;
				else if N3CD2Q1C9=2 then x_opwith4=0;
				if N3CD2Q1C16=1 or N3CD2Q1C26=1 then x_opwith5=1;
				else if N3CD2Q1C16=2 and N3CD2Q1C26=2 then x_opwith5=0;
				if N3CD2Q1C28=1 then x_opwith6=1;
				else if N3CD2Q1C28=2 then x_opwith6=0;
				if N3CD2Q1C8=1 then x_opwith7=1;
				else if N3CD2Q1C8=2 then x_opwith7=0;
				if N3CD2Q1C13=1 then x_opwith8=1;
				else if N3CD2Q1C13=2 then x_opwith8=0;
				if N3CD2Q1C20=1 then x_opwith9=1;
				else if N3CD2Q1C20=2 then x_opwith9=0;
				*Item B (29);
				if N3CD2Q1C29=1 then x_opsym11b=1;
				else if N3CD2Q1C29=2 then x_opsym11b=0;
				*Criterion 11 (withdrawal criterion) - Final;
				%sumMiss (x_sumopwith, x_opwith1 x_opwith2 x_opwith3 x_opwith4 x_opwith5 x_opwith6 x_opwith7 x_opwith8 x_opwith9);
				%diag (x_opsym11a, x_sumopwith, 3);
				if x_opsym11a=1 or x_opsym11b=1 then x_opsym11=1;
				else if x_opsym11a=0 and x_opsym11b=0 then x_opsym11=0;
				*PPY = No;
				%SymNo(x_popsym1);%SymNo(x_popsym2);%SymNo(x_popsym3);%SymNo(x_popsym4);%SymNo(x_popsym5);%SymNo(x_popsym6);
				%SymNo(x_popsym7);%SymNo(x_popsym8);%SymNo(x_popsym9);%SymNo(x_popsym10);%SymNo(x_popsym11);
				%SymNo(x_popsym11b);%SymNo(x_popsym11a);
				%SymNo(x_popwith1);%SymNo(x_popwith2);%SymNo(x_popwith3);%SymNo(x_popwith4);%SymNo(x_popwith5);%SymNo(x_popwith6);
				%SymNo(x_popwith7);%SymNo(x_popwith8);%SymNo(x_popwith9);
				%SymNo(x_popsym4legal);
			end; *PY ONLY;
			else if N3BD2Q2B = 2 then do; *PPY ONLY;
				*****************;
				*PPY CRITERIA;
				*****************;
				*Criterion 1: 32;
				if N3CD2Q1E32=1 then x_popsym1=1;
				else if N3CQ1A32=2 or N3CQ1B32=2 then x_popsym1=0;
				else if N3CD2Q1E32=2 then x_popsym1=0;
				*Criterion 2: (30, 31);
				if N3CD2Q1E30=1 or N3CD2Q1E31=1 then x_popsym2=1;
				else if N3CD2Q1E30=2 and N3CD2Q1E31=2 then x_popsym2=0;
				*Criterion 3: (33, 34);
				if N3CD2Q1E33=1 or N3CD2Q1E34=1 then x_popsym3=1;
				else if N3CD2Q1E33=2 and N3CD2Q1E34=2 then x_popsym3=0;		
				*Criterion OLD 4 (LEGAL);
				if N3CQ12D2=1 then x_popsym4legal=1;
				else if N3CQ12D2=2 or N3CQ12C=2 then x_popsym4legal=0; *hierarchical question - if said no to parent or child question then no;
				*Criterion 4: CRAVING (39, 40);
				if N3CD2Q1E39=1 or N3CD2Q1E40=1 then x_popsym4=1;
				else if N3CD2Q1E39=2 and N3CD2Q1E40=2 then x_popsym4=0;
				*Criterion 5: 44-46;
				if N3CD2Q1E44=1 or N3CD2Q1E45=1 or N3CD2Q1E46=1 then x_popsym5=1;
				else if N3CD2Q1E44=2 and N3CD2Q1E45=2 and N3CD2Q1E46=2 then x_popsym5=0;
				*Criterion 6:41-43;
				if N3CD2Q1E41=1 or N3CD2Q1E42=1 or N3CD2Q1E43=1 then x_popsym6=1;
				else if N3CD2Q1E41=2 and N3CD2Q1E42=2 and N3CD2Q1E43=2 then x_popsym6=0;
				*Criterion 7: (35, 36);
				if N3CD2Q1E35=1 or N3CD2Q1E36=1 then x_popsym7=1;
				else if N3CD2Q1E35=2 and N3CD2Q1E36=2 then x_popsym7=0;
				*Criterion 8: 47, 48;
				if N3CD2Q1E47=1 or N3CD2Q1E48=1 then x_popsym8=1;
				else if N3CD2Q1E47=2 and N3CD2Q1E48=2 then x_popsym8=0;
				*Criterion 9: (37, 38);
				if N3CD2Q1E37=1 or N3CD2Q1E38=1 then x_popsym9=1;
				else if N3CD2Q1E37=2 and N3CD2Q1E38=2 then x_popsym9=0;
				*Criterion 10: 1, 2;
				if N3CD2Q1E1=1 or N3CD2Q1E2=1 then x_popsym10=1;
				else if N3CD2Q1E1=2 and N3CD2Q1E2=2 then x_popsym10=0;
				*Criterion 11 (withdrawal criterion);
				* Item A;
				if N3CD2Q1E5=1 then x_popwith1=1;
				else if N3CD2Q1E5=2 then x_popwith1=0;
				if N3CD2Q1E7=1 then x_popwith2=1;
				else if N3CD2Q1E7=2 then x_popwith2=0;
				if N3CD2Q1E12=1 then x_popwith3=1;
				else if N3CD2Q1E12=2 then x_popwith3=0;
				if N3CD2Q1E9=1 then x_popwith4=1;
				else if N3CD2Q1E9=2 then x_popwith4=0;
				if N3CD2Q1E16=1 or N3CD2Q1E26=1 then x_popwith5=1;
				else if N3CD2Q1E16=2 and N3CD2Q1E26=2 then x_popwith5=0;
				if N3CD2Q1E28=1 then x_popwith6=1;
				else if N3CD2Q1E28=2 then x_popwith6=0;
				if N3CD2Q1E8=1 then x_popwith7=1;
				else if N3CD2Q1E8=2 then x_popwith7=0;
				if N3CD2Q1E13=1 then x_popwith8=1;
				else if N3CD2Q1E13=2 then x_popwith8=0;
				if N3CD2Q1E20=1 then x_popwith9=1;
				else if N3CD2Q1E20=2 then x_popwith9=0;
				*Item B (29);
				if N3CD2Q1E29=1 then x_popsym11b=1;
				else if N3CD2Q1E29=2 then x_popsym11b=0;
				*Criterion 11 (withdrawal criterion) - Final;
				%sumMiss (x_psumopwith, x_popwith1 x_popwith2 x_popwith3 x_popwith4 x_popwith5 x_popwith6 x_popwith7 x_popwith8 x_popwith9);
				%diag (x_popsym11a, x_psumopwith, 3);
				if x_popsym11a=1 or x_popsym11b=1 then x_popsym11=1;
				else if x_popsym11a=0 and x_popsym11b=0 then x_popsym11=0;
				*PY = No;
				%SymNo(x_opsym1);%SymNo(x_opsym2);%SymNo(x_opsym3);%SymNo(x_opsym4);%SymNo(x_opsym5);%SymNo(x_opsym6);
				%SymNo(x_opsym7);%SymNo(x_opsym8);%SymNo(x_opsym9);%SymNo(x_opsym10);%SymNo(x_opsym11);
				%SymNo(x_opsym11b);%SymNo(x_opsym11a);
				%SymNo(x_opwith1);%SymNo(x_opwith2);%SymNo(x_opwith3);%SymNo(x_opwith4);%SymNo(x_opwith5);%SymNo(x_opwith6);
				%SymNo(x_opwith7);%SymNo(x_opwith8);%SymNo(x_opwith9);
				%SymNo(x_opsym4legal);
			end; *PPY ONLY;
			else if N3BD2Q2B in (3 9 .) then do; *PY + PPY or UNKNOWN;
				*****************;
				*PY CRITERIA;
				*****************;
				*Criterion 1: 32;
				if N3CD2Q1C32=1 then x_opsym1=1;
				else if N3CQ1A32=2 or N3CQ1B32=2 then x_opsym1=0;
				else if N3CD2Q1C32=2 then x_opsym1=0;
				*Criterion 2: (30, 31);
				if N3CD2Q1C30=1 or N3CD2Q1C31=1 then x_opsym2=1;
				else if N3CD2Q1C30=2 and N3CD2Q1C31=2 then x_opsym2=0;
				*Criterion 3: (33, 34);
				if N3CD2Q1C33=1 or N3CD2Q1C34=1 then x_opsym3=1;
				else if N3CD2Q1C33=2 and N3CD2Q1C34=2 then x_opsym3=0;		
				*Criterion OLD 4 (LEGAL);
				if N3CQ12B2=1 then x_opsym4legal=1;
				else if N3CQ12B2=2 or N3CQ12A=2 then x_opsym4legal=0; *hierarchical question - if said no to parent or child question then no;
				*Criterion 4: CRAVING (39, 40);
				if N3CD2Q1C39=1 or N3CD2Q1C40=1 then x_opsym4=1;
				else if N3CD2Q1C39=2 and N3CD2Q1C40=2 then x_opsym4=0;
				*Criterion 5: 44-46;
				if N3CD2Q1C44=1 or N3CD2Q1C45=1 or N3CD2Q1C46=1 then x_opsym5=1;
				else if N3CD2Q1C44=2 and N3CD2Q1C45=2 and N3CD2Q1C46=2 then x_opsym5=0;
				*Criterion 6:41-43;
				if N3CD2Q1C41=1 or N3CD2Q1C42=1 or N3CD2Q1C43=1 then x_opsym6=1;
				else if N3CD2Q1C41=2 and N3CD2Q1C42=2 and N3CD2Q1C43=2 then x_opsym6=0;
				*Criterion 7: (35, 36);
				if N3CD2Q1C35=1 or N3CD2Q1C36=1 then x_opsym7=1;
				else if N3CD2Q1C35=2 and N3CD2Q1C36=2 then x_opsym7=0;
				*Criterion 8: 47, 48;
				if N3CD2Q1C47=1 or N3CD2Q1C48=1 then x_opsym8=1;
				else if N3CD2Q1C47=2 and N3CD2Q1C48=2 then x_opsym8=0;
				*Criterion 9: (37, 38);
				if N3CD2Q1C37=1 or N3CD2Q1C38=1 then x_opsym9=1;
				else if N3CD2Q1C37=2 and N3CD2Q1C38=2 then x_opsym9=0;
				*Criterion 10: 1, 2;
				if N3CD2Q1C1=1 or N3CD2Q1C2=1 then x_opsym10=1;
				else if N3CD2Q1C1=2 and N3CD2Q1C2=2 then x_opsym10=0;
				*Criterion 11 (withdrawal criterion);
				* Item A;
				if N3CD2Q1C5=1 then x_opwith1=1;
				else if N3CD2Q1C5=2 then x_opwith1=0;
				if N3CD2Q1C7=1 then x_opwith2=1;
				else if N3CD2Q1C7=2 then x_opwith2=0;
				if N3CD2Q1C12=1 then x_opwith3=1;
				else if N3CD2Q1C12=2 then x_opwith3=0;
				if N3CD2Q1C9=1 then x_opwith4=1;
				else if N3CD2Q1C9=2 then x_opwith4=0;
				if N3CD2Q1C16=1 or N3CD2Q1C26=1 then x_opwith5=1;
				else if N3CD2Q1C16=2 and N3CD2Q1C26=2 then x_opwith5=0;
				if N3CD2Q1C28=1 then x_opwith6=1;
				else if N3CD2Q1C28=2 then x_opwith6=0;
				if N3CD2Q1C8=1 then x_opwith7=1;
				else if N3CD2Q1C8=2 then x_opwith7=0;
				if N3CD2Q1C13=1 then x_opwith8=1;
				else if N3CD2Q1C13=2 then x_opwith8=0;
				if N3CD2Q1C20=1 then x_opwith9=1;
				else if N3CD2Q1C20=2 then x_opwith9=0;
				*Item B (29);
				if N3CD2Q1C29=1 then x_opsym11b=1;
				else if N3CD2Q1C29=2 then x_opsym11b=0;
				*Criterion 11 (withdrawal criterion) - Final;
				%sumMiss (x_sumopwith, x_opwith1 x_opwith2 x_opwith3 x_opwith4 x_opwith5 x_opwith6 x_opwith7 x_opwith8 x_opwith9);
				%diag (x_opsym11a, x_sumopwith, 3);
				if x_opsym11a=1 or x_opsym11b=1 then x_opsym11=1;
				else if x_opsym11a=0 and x_opsym11b=0 then x_opsym11=0;
				*****************;
				*PPY CRITERIA;
				*****************;
				*Criterion 1: 32;
				if N3CD2Q1E32=1 then x_popsym1=1;
				else if N3CQ1A32=2 or N3CQ1B32=2 then x_popsym1=0;
				else if N3CD2Q1E32=2 then x_popsym1=0;
				*Criterion 2: (30, 31);
				if N3CD2Q1E30=1 or N3CD2Q1E31=1 then x_popsym2=1;
				else if N3CD2Q1E30=2 and N3CD2Q1E31=2 then x_popsym2=0;
				*Criterion 3: (33, 34);
				if N3CD2Q1E33=1 or N3CD2Q1E34=1 then x_popsym3=1;
				else if N3CD2Q1E33=2 and N3CD2Q1E34=2 then x_popsym3=0;		
				*Criterion OLD 4 (LEGAL);
				if N3CQ12D2=1 then x_popsym4legal=1;
				else if N3CQ12D2=2 or N3CQ12C=2 then x_popsym4legal=0; *hierarchical question - if said no to parent or child question then no;
				*Criterion 4: CRAVING (39, 40);
				if N3CD2Q1E39=1 or N3CD2Q1E40=1 then x_popsym4=1;
				else if N3CD2Q1E39=2 and N3CD2Q1E40=2 then x_popsym4=0;
				*Criterion 5: 44-46;
				if N3CD2Q1E44=1 or N3CD2Q1E45=1 or N3CD2Q1E46=1 then x_popsym5=1;
				else if N3CD2Q1E44=2 and N3CD2Q1E45=2 and N3CD2Q1E46=2 then x_popsym5=0;
				*Criterion 6:41-43;
				if N3CD2Q1E41=1 or N3CD2Q1E42=1 or N3CD2Q1E43=1 then x_popsym6=1;
				else if N3CD2Q1E41=2 and N3CD2Q1E42=2 and N3CD2Q1E43=2 then x_popsym6=0;
				*Criterion 7: (35, 36);
				if N3CD2Q1E35=1 or N3CD2Q1E36=1 then x_popsym7=1;
				else if N3CD2Q1E35=2 and N3CD2Q1E36=2 then x_popsym7=0;
				*Criterion 8: 47, 48;
				if N3CD2Q1E47=1 or N3CD2Q1E48=1 then x_popsym8=1;
				else if N3CD2Q1E47=2 and N3CD2Q1E48=2 then x_popsym8=0;
				*Criterion 9: (37, 38);
				if N3CD2Q1E37=1 or N3CD2Q1E38=1 then x_popsym9=1;
				else if N3CD2Q1E37=2 and N3CD2Q1E38=2 then x_popsym9=0;
				*Criterion 10: 1, 2;
				if N3CD2Q1E1=1 or N3CD2Q1E2=1 then x_popsym10=1;
				else if N3CD2Q1E1=2 and N3CD2Q1E2=2 then x_popsym10=0;
				*Criterion 11 (withdrawal criterion);
				* Item A;
				if N3CD2Q1E5=1 then x_popwith1=1;
				else if N3CD2Q1E5=2 then x_popwith1=0;
				if N3CD2Q1E7=1 then x_popwith2=1;
				else if N3CD2Q1E7=2 then x_popwith2=0;
				if N3CD2Q1E12=1 then x_popwith3=1;
				else if N3CD2Q1E12=2 then x_popwith3=0;
				if N3CD2Q1E9=1 then x_popwith4=1;
				else if N3CD2Q1E9=2 then x_popwith4=0;
				if N3CD2Q1E16=1 or N3CD2Q1E26=1 then x_popwith5=1;
				else if N3CD2Q1E16=2 and N3CD2Q1E26=2 then x_popwith5=0;
				if N3CD2Q1E28=1 then x_popwith6=1;
				else if N3CD2Q1E28=2 then x_popwith6=0;
				if N3CD2Q1E8=1 then x_popwith7=1;
				else if N3CD2Q1E8=2 then x_popwith7=0;
				if N3CD2Q1E13=1 then x_popwith8=1;
				else if N3CD2Q1E13=2 then x_popwith8=0;
				if N3CD2Q1E20=1 then x_popwith9=1;
				else if N3CD2Q1E20=2 then x_popwith9=0;
				*Item B (29);
				if N3CD2Q1E29=1 then x_popsym11b=1;
				else if N3CD2Q1E29=2 then x_popsym11b=0;
				*Criterion 11 (withdrawal criterion) - Final;
				%sumMiss (x_psumopwith, x_popwith1 x_popwith2 x_popwith3 x_popwith4 x_popwith5 x_popwith6 x_popwith7 x_popwith8 x_popwith9);
				%diag (x_popsym11a, x_psumopwith, 3);
				if x_popsym11a=1 or x_popsym11b=1 then x_popsym11=1;
				else if x_popsym11a=0 and x_popsym11b=0 then x_popsym11=0;
			end; 
		end;
	end;

	****************************************;
	*	OPIOIDS FINAL VARS			;
	****************************************;

	********************;
	*DSM-IV ABUSE;
	********************;
	%sumMiss (x_sumopab4, 		x_opsym5 x_opsym8 x_opsym4legal x_opsym6);
	%sumMiss (x_psumopab4, 	x_popsym5 x_popsym8 x_popsym4legal x_popsym6);

	%diag (x_opabuse4, 		x_sumopab4, 	1);
	%diag (x_popabuse4, 	x_psumopab4, 	1);
	
	if x_opabuse4=1 or x_popabuse4=1 then x_lopabuse4=1;
	else if x_opabuse4=0 and x_popabuse4=0 then x_lopabuse4=0;

	********************;
	*DSM-IV DEP	;
	********************;
	%sumMiss (x_sumopdep4, 	x_opsym10 x_opsym11 x_opsym1 x_opsym2 x_opsym3 x_opsym7 x_opsym9);
	%sumMiss (x_psumopdep4, 	x_popsym10 x_popsym11 x_popsym1 x_popsym2 x_popsym3 x_popsym7 x_popsym9);

	%diag (x_opdep4, 	x_sumopdep4, 		3);

	*PPY has additional requirement for diagnosis;
	if x_psumopdep4 >=3 then do;
		if N3CD2Q2A=1 then x_popdep4=1; *expericences happened around same time (pg 11);
		else if N3CD2Q2A = 2 then x_popdep4=0; *experiences did not happen around same time;
		else if N3CD2Q2A = 9 then x_popdep4=.;
	end;
	else if . < x_psumopdep4 <3 then x_popdep4=0;

	if x_opdep4=1 or x_popdep4=1 then x_lopdep4=1;
	else if x_opdep4=0 and x_popdep4=0 then x_lopdep4=0;

	********************;
	*DSM-5				;
	********************;
	%sumMiss (x_sumopud5, 		x_opsym1 x_opsym2 x_opsym3 x_opsym4 x_opsym5 x_opsym6 x_opsym7 x_opsym8 x_opsym9 x_opsym10 x_opsym11);
	%sumMiss (x_psumopud5, 	x_popsym1 x_popsym2 x_popsym3 x_popsym4 x_popsym5 x_popsym6 x_popsym7 x_popsym8 x_popsym9 x_popsym10 x_popsym11);

	%diag (x_opud5, 		x_sumopud5, 	2);

	if x_psumopud5 >=2 then do;
		if N3CD2Q2A=1 then x_popud5=1;
		else if N3CD2Q2A = 2 then x_popud5=0; 
		else if N3CD2Q2A = 9 then x_popud5=.;
	end;
	else if . < x_psumopud5 <2 then x_popud5=0;

	if x_opud5=1 or x_popud5=1 then x_lopud5=1;
	else if x_opud5=0 and x_popud5=0 then x_lopud5=0;

	if x_sumopud5 in (0 1) then x_opud5sev=0;
	else if x_sumopud5 in (2 3) then x_opud5sev=1;
	else if x_sumopud5 in (4 5) then x_opud5sev=2;
	else if x_sumopud5 >= 6 then x_opud5sev=3;

	if x_psumopud5 in (0 1) then x_popud5sev=0;
	else if x_psumopud5>1 and N3CD2Q2A=1 then do;
		if x_psumopud5 in (2 3) then x_popud5sev=1;
		else if x_psumopud5 in (4 5) then x_popud5sev=2;
		else if x_psumopud5 >= 6 then x_popud5sev=3;
	end;
	else if x_psumopud5>1 and N3CD2Q2A=2 then x_popud5sev=0;

*************************************************************************************************************************************************;
* SEDATIVES																																										;		
*************************************************************************************************************************************************;

	****************************************;
	*	SEDATIVES CRITERIA				;
	****************************************;
	if N3BQ1A1 = 2 then do; *NEVER;
		*PY = No;
		%SymNo(x_sedsym1);%SymNo(x_sedsym2);%SymNo(x_sedsym3);%SymNo(x_sedsym4);%SymNo(x_sedsym5);%SymNo(x_sedsym6);
		%SymNo(x_sedsym7);%SymNo(x_sedsym8);%SymNo(x_sedsym9);%SymNo(x_sedsym10);%SymNo(x_sedsym11);
		%SymNo(x_sedsym11b);%SymNo(x_sedwith11a);
		%SymNo(x_sedwith1);%SymNo(x_sedwith2);%SymNo(x_sedwith3);%SymNo(x_sedwith4);%SymNo(x_sedwith5);%SymNo(x_sedwith6);
		%SymNo(x_sedwith7);%SymNo(x_sedwith8);
		%SymNo(x_sedsym4legal);
		*PPY = No;
		%SymNo(x_psedsym1);%SymNo(x_psedsym2);%SymNo(x_psedsym3);%SymNo(x_psedsym4);%SymNo(x_psedsym5);%SymNo(x_psedsym6);
		%SymNo(x_psedsym7);%SymNo(x_psedsym8);%SymNo(x_psedsym9);%SymNo(x_psedsym10);%SymNo(x_psedsym11);
		%SymNo(x_psedsym11b);%SymNo(x_psedwith11a);
		%SymNo(x_psedwith1);%SymNo(x_psedwith2);%SymNo(x_psedwith3);%SymNo(x_psedwith4);%SymNo(x_psedwith5);%SymNo(x_psedwith6);
		%SymNo(x_psedwith7);%SymNo(x_psedwith8);
		%SymNo(x_psedsym4legal);
	end;
	else if N3BQ1A1 in (1 9) then do; *EVER OR UKNOWN;
		if NDRUGUSER=2 then do; *NEVER;
			*PY = No;
			%SymNo(x_sedsym1);%SymNo(x_sedsym2);%SymNo(x_sedsym3);%SymNo(x_sedsym4);%SymNo(x_sedsym5);%SymNo(x_sedsym6);
			%SymNo(x_sedsym7);%SymNo(x_sedsym8);%SymNo(x_sedsym9);%SymNo(x_sedsym10);%SymNo(x_sedsym11);
			%SymNo(x_sedsym11b);%SymNo(x_sedwith11a);
			%SymNo(x_sedwith1);%SymNo(x_sedwith2);%SymNo(x_sedwith3);%SymNo(x_sedwith4);%SymNo(x_sedwith5);%SymNo(x_sedwith6);
			%SymNo(x_sedwith7);%SymNo(x_sedwith8);
			%SymNo(x_sedsym4legal);
			*PPY = No;
			%SymNo(x_psedsym1);%SymNo(x_psedsym2);%SymNo(x_psedsym3);%SymNo(x_psedsym4);%SymNo(x_psedsym5);%SymNo(x_psedsym6);
			%SymNo(x_psedsym7);%SymNo(x_psedsym8);%SymNo(x_psedsym9);%SymNo(x_psedsym10);%SymNo(x_psedsym11);
			%SymNo(x_psedsym11b);%SymNo(x_psedwith11a);
			%SymNo(x_psedwith1);%SymNo(x_psedwith2);%SymNo(x_psedwith3);%SymNo(x_psedwith4);%SymNo(x_psedwith5);%SymNo(x_psedwith6);
			%SymNo(x_psedwith7);%SymNo(x_psedwith8);
			%SymNo(x_psedsym4legal);
		end;
		else do; *TIMING;
			if N3BD1Q2B = 1 then do; *PY ONLY;
				*****************;
				*PY CRITERIA;
				*****************;
				*Criterion 1: 32;
				if N3CD1Q1C32=1 then x_sedsym1=1;
				else if N3CQ1A32=2 or N3CQ1B32=2 then x_sedsym1=0;
				else if N3CD1Q1C32=2 then x_sedsym1=0;
				*Criterion 2: (30, 31);
				if N3CD1Q1C30=1 or N3CD1Q1C31=1 then x_sedsym2=1;
				else if N3CD1Q1C30=2 and N3CD1Q1C31=2 then x_sedsym2=0;
				*Criterion 3: (33, 34);
				if N3CD1Q1C33=1 or N3CD1Q1C34=1 then x_sedsym3=1;
				else if N3CD1Q1C33=2 and N3CD1Q1C34=2 then x_sedsym3=0;		
				*Criterion OLD 4 (LEGAL);
				if N3CQ12B1=1 then x_sedsym4legal=1;
				else if N3CQ12B1=2 or N3CQ12A=2 then x_sedsym4legal=0; *hierarchical question - if said no to parent or child question then no;
				*Criterion 4: CRAVING (39, 40);
				if N3CD1Q1C39=1 or N3CD1Q1C40=1 then x_sedsym4=1;
				else if N3CD1Q1C39=2 and N3CD1Q1C40=2 then x_sedsym4=0;
				*Criterion 5: 44-46;
				if N3CD1Q1C44=1 or N3CD1Q1C45=1 or N3CD1Q1C46=1 then x_sedsym5=1;
				else if N3CD1Q1C44=2 and N3CD1Q1C45=2 and N3CD1Q1C46=2 then x_sedsym5=0;
				*Criterion 6:41-43;
				if N3CD1Q1C41=1 or N3CD1Q1C42=1 or N3CD1Q1C43=1 then x_sedsym6=1;
				else if N3CD1Q1C41=2 and N3CD1Q1C42=2 and N3CD1Q1C43=2 then x_sedsym6=0;
				*Criterion 7: (35, 36);
				if N3CD1Q1C35=1 or N3CD1Q1C36=1 then x_sedsym7=1;
				else if N3CD1Q1C35=2 and N3CD1Q1C36=2 then x_sedsym7=0;
				*Criterion 8: 47, 48;
				if N3CD1Q1C47=1 or N3CD1Q1C48=1 then x_sedsym8=1;
				else if N3CD1Q1C47=2 and N3CD1Q1C48=2 then x_sedsym8=0;
				*Criterion 9: (37, 38);
				if N3CD1Q1C37=1 or N3CD1Q1C38=1 then x_sedsym9=1;
				else if N3CD1Q1C37=2 and N3CD1Q1C38=2 then x_sedsym9=0;
				*Criterion 10: 1, 2;
				if N3CD1Q1C1=1 or N3CD1Q1C2=1 then x_sedsym10=1;
				else if N3CD1Q1C1=2 and N3CD1Q1C2=2 then x_sedsym10=0;
				*Criterion 11 (withdrawal criterion);
				* Item A;
				if N3CD1Q1C6=1 or N3CD1Q1C26=1 then x_sedwith1=1;
				else if N3CD1Q1C6=2 and N3CD1Q1C26=2 then x_sedwith1=0;
				if N3CD1Q1C19=1 then x_sedwith2=1;
				else if N3CD1Q1C19=2 then x_sedwith2=0;
				if N3CD1Q1C20=1 then x_sedwith3=1;
				else if N3CD1Q1C20=2 then x_sedwith3=0;
				if N3CD1Q1C7=1 then x_sedwith4=1;
				else if N3CD1Q1C7=2 then x_sedwith4=0;
				if N3CD1Q1C18=1 then x_sedwith5=1;
				else if N3CD1Q1C18=2 then x_sedwith5=0;
				if N3CD1Q1C14=1 then x_sedwith6=1;
				else if N3CD1Q1C14=2 then x_sedwith6=0;
				if N3CD1Q1C11=1 then x_sedwith7=1;
				else if N3CD1Q1C11=2 then x_sedwith7=0;
				if N3CD1Q1C21=1 then x_sedwith8=1;
				else if N3CD1Q1C21=2 then x_sedwith8=0;
				*Item B (29);
				if N3CD1Q1C29=1 then x_sedsym11b=1;
				else if N3CD1Q1C29=2 then x_sedsym11b=0;
				*Criterion 11 (withdrawal criterion) - Final;
				%sumMiss (x_sumsedwith, x_sedwith1 x_sedwith2 x_sedwith3 x_sedwith4 x_sedwith5 x_sedwith6 x_sedwith7 x_sedwith8);
				%diag (x_sedwith11a, x_sumsedwith, 2);
				if x_sedwith11a=1 or x_sedsym11b=1 then x_sedsym11=1;
				else if x_sedwith11a=0 and x_sedsym11b=0 then x_sedsym11=0;
				*PPY = No;
				%SymNo(x_psedsym1);%SymNo(x_psedsym2);%SymNo(x_psedsym3);%SymNo(x_psedsym4);%SymNo(x_psedsym5);%SymNo(x_psedsym6);
				%SymNo(x_psedsym7);%SymNo(x_psedsym8);%SymNo(x_psedsym9);%SymNo(x_psedsym10);%SymNo(x_psedsym11);
				%SymNo(x_psedsym11b);%SymNo(x_psedwith11a);
				%SymNo(x_psedwith1);%SymNo(x_psedwith2);%SymNo(x_psedwith3);%SymNo(x_psedwith4);%SymNo(x_psedwith5);%SymNo(x_psedwith6);
				%SymNo(x_psedwith7);%SymNo(x_psedwith8);
				%SymNo(x_psedsym4legal);
			end; *PY ONLY;
			else if N3BD1Q2B = 2 then do; *PPY ONLY;
				*****************;
				*PPY CRITERIA;
				*****************;
				*Criterion 1: 32;
				if N3CD1Q1E32=1 then x_psedsym1=1;
				else if N3CQ1A32=2 or N3CQ1B32=2 then x_psedsym1=0;
				else if N3CD1Q1E32=2 then x_psedsym1=0;
				*Criterion 2: (30, 31);
				if N3CD1Q1E30=1 or N3CD1Q1E31=1 then x_psedsym2=1;
				else if N3CD1Q1E30=2 and N3CD1Q1E31=2 then x_psedsym2=0;
				*Criterion 3: (33, 34);
				if N3CD1Q1E33=1 or N3CD1Q1E34=1 then x_psedsym3=1;
				else if N3CD1Q1E33=2 and N3CD1Q1E34=2 then x_psedsym3=0;		
				*Criterion OLD 4 (LEGAL);
				if N3CQ12D1=1 then x_psedsym4legal=1;
				else if N3CQ12D1=2 or N3CQ12C=2 then x_psedsym4legal=0; *hierarchical question - if said no to parent or child question then no;
				*Criterion 4: CRAVING (39, 40);
				if N3CD1Q1E39=1 or N3CD1Q1E40=1 then x_psedsym4=1;
				else if N3CD1Q1E39=2 and N3CD1Q1E40=2 then x_psedsym4=0;
				*Criterion 5: 44-46;
				if N3CD1Q1E44=1 or N3CD1Q1E45=1 or N3CD1Q1E46=1 then x_psedsym5=1;
				else if N3CD1Q1E44=2 and N3CD1Q1E45=2 and N3CD1Q1E46=2 then x_psedsym5=0;
				*Criterion 6:41-43;
				if N3CD1Q1E41=1 or N3CD1Q1E42=1 or N3CD1Q1E43=1 then x_psedsym6=1;
				else if N3CD1Q1E41=2 and N3CD1Q1E42=2 and N3CD1Q1E43=2 then x_psedsym6=0;
				*Criterion 7: (35, 36);
				if N3CD1Q1E35=1 or N3CD1Q1E36=1 then x_psedsym7=1;
				else if N3CD1Q1E35=2 and N3CD1Q1E36=2 then x_psedsym7=0;
				*Criterion 8: 47, 48;
				if N3CD1Q1E47=1 or N3CD1Q1E48=1 then x_psedsym8=1;
				else if N3CD1Q1E47=2 and N3CD1Q1E48=2 then x_psedsym8=0;
				*Criterion 9: (37, 38);
				if N3CD1Q1E37=1 or N3CD1Q1E38=1 then x_psedsym9=1;
				else if N3CD1Q1E37=2 and N3CD1Q1E38=2 then x_psedsym9=0;
				*Criterion 10: 1, 2;
				if N3CD1Q1E1=1 or N3CD1Q1E2=1 then x_psedsym10=1;
				else if N3CD1Q1E1=2 and N3CD1Q1E2=2 then x_psedsym10=0;
				*Criterion 11 (withdrawal criterion);
				* Item A;
				if N3CD1Q1E6=1 or N3CD1Q1E26=1 then x_psedwith1=1;
				else if N3CD1Q1E6=2 and N3CD1Q1E26=2 then x_psedwith1=0;
				if N3CD1Q1E19=1 then x_psedwith2=1;
				else if N3CD1Q1E19=2 then x_psedwith2=0;
				if N3CD1Q1E20=1 then x_psedwith3=1;
				else if N3CD1Q1E20=2 then x_psedwith3=0;
				if N3CD1Q1E7=1 then x_psedwith4=1;
				else if N3CD1Q1E7=2 then x_psedwith4=0;
				if N3CD1Q1E18=1 then x_psedwith5=1;
				else if N3CD1Q1E18=2 then x_psedwith5=0;
				if N3CD1Q1E14=1 then x_psedwith6=1;
				else if N3CD1Q1E14=2 then x_psedwith6=0;
				if N3CD1Q1E11=1 then x_psedwith7=1;
				else if N3CD1Q1E11=2 then x_psedwith7=0;
				if N3CD1Q1E21=1 then x_psedwith8=1;
				else if N3CD1Q1E21=2 then x_psedwith8=0;
				*Item B (29);
				if N3CD1Q1E29=1 then x_psedsym11b=1;
				else if N3CD1Q1E29=2 then x_psedsym11b=0;
				*Criterion 11 (withdrawal criterion) - Final;
				%sumMiss (x_psumsedwith, x_psedwith1 x_psedwith2 x_psedwith3 x_psedwith4 x_psedwith5 x_psedwith6 x_psedwith7 x_psedwith8);
				%diag (x_psedwith11a, x_psumsedwith, 2);
				if x_psedwith11a=1 or x_psedsym11b=1 then x_psedsym11=1;
				else if x_psedwith11a=0 and x_psedsym11b=0 then x_psedsym11=0;
				*PY = No;
				%SymNo(x_sedsym1);%SymNo(x_sedsym2);%SymNo(x_sedsym3);%SymNo(x_sedsym4);%SymNo(x_sedsym5);%SymNo(x_sedsym6);
				%SymNo(x_sedsym7);%SymNo(x_sedsym8);%SymNo(x_sedsym9);%SymNo(x_sedsym10);%SymNo(x_sedsym11);
				%SymNo(x_sedsym11b);%SymNo(x_sedwith11a);
				%SymNo(x_sedwith1);%SymNo(x_sedwith2);%SymNo(x_sedwith3);%SymNo(x_sedwith4);%SymNo(x_sedwith5);%SymNo(x_sedwith6);
				%SymNo(x_sedwith7);%SymNo(x_sedwith8);
				%SymNo(x_sedsym4legal);
			end; *PPY ONLY;
			else if N3BD1Q2B in (3 9 .) then do; *PY + PPY or UNKNOWN;
				*****************;
				*PY CRITERIA;
				*****************;
				*Criterion 1: 32;
				if N3CD1Q1C32=1 then x_sedsym1=1;
				else if N3CQ1A32=2 or N3CQ1B32=2 then x_sedsym1=0;
				else if N3CD1Q1C32=2 then x_sedsym1=0;
				*Criterion 2: (30, 31);
				if N3CD1Q1C30=1 or N3CD1Q1C31=1 then x_sedsym2=1;
				else if N3CD1Q1C30=2 and N3CD1Q1C31=2 then x_sedsym2=0;
				*Criterion 3: (33, 34);
				if N3CD1Q1C33=1 or N3CD1Q1C34=1 then x_sedsym3=1;
				else if N3CD1Q1C33=2 and N3CD1Q1C34=2 then x_sedsym3=0;		
				*Criterion OLD 4 (LEGAL);
				if N3CQ12B1=1 then x_sedsym4legal=1;
				else if N3CQ12B1=2 or N3CQ12A=2 then x_sedsym4legal=0; *hierarchical question - if said no to parent or child question then no;
				*Criterion 4: CRAVING (39, 40);
				if N3CD1Q1C39=1 or N3CD1Q1C40=1 then x_sedsym4=1;
				else if N3CD1Q1C39=2 and N3CD1Q1C40=2 then x_sedsym4=0;
				*Criterion 5: 44-46;
				if N3CD1Q1C44=1 or N3CD1Q1C45=1 or N3CD1Q1C46=1 then x_sedsym5=1;
				else if N3CD1Q1C44=2 and N3CD1Q1C45=2 and N3CD1Q1C46=2 then x_sedsym5=0;
				*Criterion 6:41-43;
				if N3CD1Q1C41=1 or N3CD1Q1C42=1 or N3CD1Q1C43=1 then x_sedsym6=1;
				else if N3CD1Q1C41=2 and N3CD1Q1C42=2 and N3CD1Q1C43=2 then x_sedsym6=0;
				*Criterion 7: (35, 36);
				if N3CD1Q1C35=1 or N3CD1Q1C36=1 then x_sedsym7=1;
				else if N3CD1Q1C35=2 and N3CD1Q1C36=2 then x_sedsym7=0;
				*Criterion 8: 47, 48;
				if N3CD1Q1C47=1 or N3CD1Q1C48=1 then x_sedsym8=1;
				else if N3CD1Q1C47=2 and N3CD1Q1C48=2 then x_sedsym8=0;
				*Criterion 9: (37, 38);
				if N3CD1Q1C37=1 or N3CD1Q1C38=1 then x_sedsym9=1;
				else if N3CD1Q1C37=2 and N3CD1Q1C38=2 then x_sedsym9=0;
				*Criterion 10: 1, 2;
				if N3CD1Q1C1=1 or N3CD1Q1C2=1 then x_sedsym10=1;
				else if N3CD1Q1C1=2 and N3CD1Q1C2=2 then x_sedsym10=0;
				*Criterion 11 (withdrawal criterion);
				* Item A;
				if N3CD1Q1C6=1 or N3CD1Q1C26=1 then x_sedwith1=1;
				else if N3CD1Q1C6=2 and N3CD1Q1C26=2 then x_sedwith1=0;
				if N3CD1Q1C19=1 then x_sedwith2=1;
				else if N3CD1Q1C19=2 then x_sedwith2=0;
				if N3CD1Q1C20=1 then x_sedwith3=1;
				else if N3CD1Q1C20=2 then x_sedwith3=0;
				if N3CD1Q1C7=1 then x_sedwith4=1;
				else if N3CD1Q1C7=2 then x_sedwith4=0;
				if N3CD1Q1C18=1 then x_sedwith5=1;
				else if N3CD1Q1C18=2 then x_sedwith5=0;
				if N3CD1Q1C14=1 then x_sedwith6=1;
				else if N3CD1Q1C14=2 then x_sedwith6=0;
				if N3CD1Q1C11=1 then x_sedwith7=1;
				else if N3CD1Q1C11=2 then x_sedwith7=0;
				if N3CD1Q1C21=1 then x_sedwith8=1;
				else if N3CD1Q1C21=2 then x_sedwith8=0;
				*Item B (29);
				if N3CD1Q1C29=1 then x_sedsym11b=1;
				else if N3CD1Q1C29=2 then x_sedsym11b=0;
				*Criterion 11 (withdrawal criterion) - Final;
				%sumMiss (x_sumsedwith, x_sedwith1 x_sedwith2 x_sedwith3 x_sedwith4 x_sedwith5 x_sedwith6 x_sedwith7 x_sedwith8);
				%diag (x_sedwith11a, x_sumsedwith, 2);
				if x_sedwith11a=1 or x_sedsym11b=1 then x_sedsym11=1;
				else if x_sedwith11a=0 and x_sedsym11b=0 then x_sedsym11=0;
				*****************;
				*PPY CRITERIA;
				*****************;
				*Criterion 1: 32;
				if N3CD1Q1E32=1 then x_psedsym1=1;
				else if N3CQ1A32=2 or N3CQ1B32=2 then x_psedsym1=0;
				else if N3CD1Q1E32=2 then x_psedsym1=0;
				*Criterion 2: (30, 31);
				if N3CD1Q1E30=1 or N3CD1Q1E31=1 then x_psedsym2=1;
				else if N3CD1Q1E30=2 and N3CD1Q1E31=2 then x_psedsym2=0;
				*Criterion 3: (33, 34);
				if N3CD1Q1E33=1 or N3CD1Q1E34=1 then x_psedsym3=1;
				else if N3CD1Q1E33=2 and N3CD1Q1E34=2 then x_psedsym3=0;		
				*Criterion OLD 4 (LEGAL);
				if N3CQ12D1=1 then x_psedsym4legal=1;
				else if N3CQ12D1=2 or N3CQ12C=2 then x_psedsym4legal=0; *hierarchical question - if said no to parent or child question then no;
				*Criterion 4: CRAVING (39, 40);
				if N3CD1Q1E39=1 or N3CD1Q1E40=1 then x_psedsym4=1;
				else if N3CD1Q1E39=2 and N3CD1Q1E40=2 then x_psedsym4=0;
				*Criterion 5: 44-46;
				if N3CD1Q1E44=1 or N3CD1Q1E45=1 or N3CD1Q1E46=1 then x_psedsym5=1;
				else if N3CD1Q1E44=2 and N3CD1Q1E45=2 and N3CD1Q1E46=2 then x_psedsym5=0;
				*Criterion 6:41-43;
				if N3CD1Q1E41=1 or N3CD1Q1E42=1 or N3CD1Q1E43=1 then x_psedsym6=1;
				else if N3CD1Q1E41=2 and N3CD1Q1E42=2 and N3CD1Q1E43=2 then x_psedsym6=0;
				*Criterion 7: (35, 36);
				if N3CD1Q1E35=1 or N3CD1Q1E36=1 then x_psedsym7=1;
				else if N3CD1Q1E35=2 and N3CD1Q1E36=2 then x_psedsym7=0;
				*Criterion 8: 47, 48;
				if N3CD1Q1E47=1 or N3CD1Q1E48=1 then x_psedsym8=1;
				else if N3CD1Q1E47=2 and N3CD1Q1E48=2 then x_psedsym8=0;
				*Criterion 9: (37, 38);
				if N3CD1Q1E37=1 or N3CD1Q1E38=1 then x_psedsym9=1;
				else if N3CD1Q1E37=2 and N3CD1Q1E38=2 then x_psedsym9=0;
				*Criterion 10: 1, 2;
				if N3CD1Q1E1=1 or N3CD1Q1E2=1 then x_psedsym10=1;
				else if N3CD1Q1E1=2 and N3CD1Q1E2=2 then x_psedsym10=0;
				*Criterion 11 (withdrawal criterion);
				* Item A;
				if N3CD1Q1E6=1 or N3CD1Q1E26=1 then x_psedwith1=1;
				else if N3CD1Q1E6=2 and N3CD1Q1E26=2 then x_psedwith1=0;
				if N3CD1Q1E19=1 then x_psedwith2=1;
				else if N3CD1Q1E19=2 then x_psedwith2=0;
				if N3CD1Q1E20=1 then x_psedwith3=1;
				else if N3CD1Q1E20=2 then x_psedwith3=0;
				if N3CD1Q1E7=1 then x_psedwith4=1;
				else if N3CD1Q1E7=2 then x_psedwith4=0;
				if N3CD1Q1E18=1 then x_psedwith5=1;
				else if N3CD1Q1E18=2 then x_psedwith5=0;
				if N3CD1Q1E14=1 then x_psedwith6=1;
				else if N3CD1Q1E14=2 then x_psedwith6=0;
				if N3CD1Q1E11=1 then x_psedwith7=1;
				else if N3CD1Q1E11=2 then x_psedwith7=0;
				if N3CD1Q1E21=1 then x_psedwith8=1;
				else if N3CD1Q1E21=2 then x_psedwith8=0;
				*Item B (29);
				if N3CD1Q1E29=1 then x_psedsym11b=1;
				else if N3CD1Q1E29=2 then x_psedsym11b=0;
				*Criterion 11 (withdrawal criterion) - Final;
				%sumMiss (x_psumsedwith, x_psedwith1 x_psedwith2 x_psedwith3 x_psedwith4 x_psedwith5 x_psedwith6 x_psedwith7 x_psedwith8);
				%diag (x_psedwith11a, x_psumsedwith, 2);
				if x_psedwith11a=1 or x_psedsym11b=1 then x_psedsym11=1;
				else if x_psedwith11a=0 and x_psedsym11b=0 then x_psedsym11=0;
			end; 
		end;
	end;

	****************************************;
	*	SEDATIVES FINAL VARS			;
	****************************************;

	********************;
	*DSM-IV ABUSE;
	********************;
	%sumMiss (x_sumsedab4, 		x_sedsym5 x_sedsym8 x_sedsym4legal x_sedsym6);
	%sumMiss (x_psumsedab4, 		x_psedsym5 x_psedsym8 x_psedsym4legal x_psedsym6);

	%diag (x_sedabuse4, 		x_sumsedab4, 	1);
	%diag (x_psedabuse4, 		x_psumsedab4, 1);
	
	if x_sedabuse4=1 or x_psedabuse4=1 then x_lsedabuse4=1;
	else if x_sedabuse4=0 and x_psedabuse4=0 then x_lsedabuse4=0;

	********************;
	*DSM-IV DEP	;
	********************;
	%sumMiss (x_sumseddep4, 		x_sedsym10 x_sedsym11 x_sedsym1 x_sedsym2 x_sedsym3 x_sedsym7 x_sedsym9);
	%sumMiss (x_psumseddep4, 	x_psedsym10 x_psedsym11 x_psedsym1 x_psedsym2 x_psedsym3 x_psedsym7 x_psedsym9);

	%diag (x_seddep4, 	x_sumseddep4, 		3);

	*PPY has additional requirement for diagnosis;
	if x_psumseddep4 >=3 then do;
		if N3CD1Q2A=1 then x_pseddep4=1; *expericences happened around same time (pg 11);
		else if N3CD1Q2A = 2 then x_pseddep4=0; *experiences did not happen around same time;
		else if N3CD1Q2A = 9 then x_pseddep4=.;
	end;
	else if . < x_psumseddep4 <3 then x_pseddep4=0;

	if x_seddep4=1 or x_pseddep4=1 then x_lseddep4=1;
	else if x_seddep4=0 and x_pseddep4=0 then x_lseddep4=0;

	********************;
	*DSM-5				;
	********************;
	%sumMiss (x_sumsedud5, 		x_sedsym1 x_sedsym2 x_sedsym3 x_sedsym4 x_sedsym5 x_sedsym6 x_sedsym7 x_sedsym8 x_sedsym9 x_sedsym10 x_sedsym11);
	%sumMiss (x_psumsedud5, 		x_psedsym1 x_psedsym2 x_psedsym3 x_psedsym4 x_psedsym5 x_psedsym6 x_psedsym7 x_psedsym8 x_psedsym9 x_psedsym10 x_psedsym11);

	%diag (x_sedud5, 		x_sumsedud5, 	2);

	if x_psumsedud5 >=2 then do;
		if N3CD1Q2A=1 then x_psedud5=1;
		else if N3CD1Q2A = 2 then x_psedud5=0; 
		else if N3CD1Q2A = 9 then x_psedud5=.;
	end;
	else if . < x_psumsedud5 <2 then x_psedud5=0;

	if x_sedud5=1 or x_psedud5=1 then x_lsedud5=1;
	else if x_sedud5=0 and x_psedud5=0 then x_lsedud5=0;

	if x_sumsedud5 in (0 1) then x_sedud5sev=0;
	else if x_sumsedud5 in (2 3) then x_sedud5sev=1;
	else if x_sumsedud5 in (4 5) then x_sedud5sev=2;
	else if x_sumsedud5 >= 6 then x_sedud5sev=3;

	if x_psumsedud5 in (0 1) then x_psedud5sev=0;
	else if x_psumsedud5>1 and N3CD1Q2A=1 then do;
		if x_psumsedud5 in (2 3) then x_psedud5sev=1;
		else if x_psumsedud5 in (4 5) then x_psedud5sev=2;
		else if x_psumsedud5 >= 6 then x_psedud5sev=3;
	end;
	else if x_psumsedud5>1 and N3CD1Q2A=2 then x_psedud5sev=0;

*************************************************************************************************************************************************;
* COCAINE																																										;		
*************************************************************************************************************************************************;

	****************************************;
	*	COCAINE CRITERIA				;
	****************************************;
	if N3BQ1A4 = 2 then do; *NEVER;
		*PY = No;
		%SymNo(x_cocsym1);%SymNo(x_cocsym2);%SymNo(x_cocsym3);%SymNo(x_cocsym4);%SymNo(x_cocsym5);%SymNo(x_cocsym6);
		%SymNo(x_cocsym7);%SymNo(x_cocsym8);%SymNo(x_cocsym9);%SymNo(x_cocsym10);%SymNo(x_cocsym11);
		%SymNo(x_cocsym11b);%SymNo(x_cocsym11a);%SymNo(x_cocwith11a);
		%SymNo(x_cocwith0);%SymNo(x_cocwith1);%SymNo(x_cocwith2);%SymNo(x_cocwith3);%SymNo(x_cocwith4);%SymNo(x_cocwith5)
		%SymNo(x_cocsym4legal);
		*PPY = No;
		%SymNo(x_pcocsym1);%SymNo(x_pcocsym2);%SymNo(x_pcocsym3);%SymNo(x_pcocsym4);%SymNo(x_pcocsym5);%SymNo(x_pcocsym6);
		%SymNo(x_pcocsym7);%SymNo(x_pcocsym8);%SymNo(x_pcocsym9);%SymNo(x_pcocsym10);%SymNo(x_pcocsym11);
		%SymNo(x_pcocsym11b);%SymNo(x_pcocsym11a);%SymNo(x_pcocwith11a);
		%SymNo(x_pcocwith0);%SymNo(x_pcocwith1);%SymNo(x_pcocwith2);%SymNo(x_pcocwith3);%SymNo(x_pcocwith4);%SymNo(x_pcocwith5)
		%SymNo(x_pcocsym4legal);
	end;
	else if N3BQ1A4 in (1 9) then do; *EVER OR UKNOWN;
		if NDRUGUSER=2 then do; *NEVER;
			*PY = No;
			%SymNo(x_cocsym1);%SymNo(x_cocsym2);%SymNo(x_cocsym3);%SymNo(x_cocsym4);%SymNo(x_cocsym5);%SymNo(x_cocsym6);
			%SymNo(x_cocsym7);%SymNo(x_cocsym8);%SymNo(x_cocsym9);%SymNo(x_cocsym10);%SymNo(x_cocsym11);
			%SymNo(x_cocsym11b);%SymNo(x_cocsym11a);%SymNo(x_cocwith11a);
			%SymNo(x_cocwith0);%SymNo(x_cocwith1);%SymNo(x_cocwith2);%SymNo(x_cocwith3);%SymNo(x_cocwith4);%SymNo(x_cocwith5)
			%SymNo(x_cocsym4legal);
			*PPY = No;
			%SymNo(x_pcocsym1);%SymNo(x_pcocsym2);%SymNo(x_pcocsym3);%SymNo(x_pcocsym4);%SymNo(x_pcocsym5);%SymNo(x_pcocsym6);
			%SymNo(x_pcocsym7);%SymNo(x_pcocsym8);%SymNo(x_pcocsym9);%SymNo(x_pcocsym10);%SymNo(x_pcocsym11);
			%SymNo(x_pcocsym11b);%SymNo(x_pcocsym11a);%SymNo(x_pcocwith11a);
			%SymNo(x_pcocwith0);%SymNo(x_pcocwith1);%SymNo(x_pcocwith2);%SymNo(x_pcocwith3);%SymNo(x_pcocwith4);%SymNo(x_pcocwith5)
			%SymNo(x_pcocsym4legal);
		end;
		else do; *TIMING;
			if N3BD4Q2B = 1 then do; *PY ONLY;
				*****************;
				*PY CRITERIA;
				*****************;
				*Criterion 1: 32;
				if N3CD4Q1C32=1 then x_cocsym1=1;
				else if N3CQ1A32=2 or N3CQ1B32=2 then x_cocsym1=0;
				else if N3CD4Q1C32=2 then x_cocsym1=0;
				*Criterion 2: (30, 31);
				if N3CD4Q1C30=1 or N3CD4Q1C31=1 then x_cocsym2=1;
				else if N3CD4Q1C30=2 and N3CD4Q1C31=2 then x_cocsym2=0;
				*Criterion 3: (33, 34);
				if N3CD4Q1C33=1 or N3CD4Q1C34=1 then x_cocsym3=1;
				else if N3CD4Q1C33=2 and N3CD4Q1C34=2 then x_cocsym3=0;		
				*Criterion OLD 4 (LEGAL);
				if N3CQ12B4=1 then x_cocsym4legal=1;
				else if N3CQ12B4=2 or N3CQ12A=2 then x_cocsym4legal=0; *hierarchical question - if said no to parent or child question then no;
				*Criterion 4: CRAVING (39, 40);
				if N3CD4Q1C39=1 or N3CD4Q1C40=1 then x_cocsym4=1;
				else if N3CD4Q1C39=2 and N3CD4Q1C40=2 then x_cocsym4=0;
				*Criterion 5: 44-46;
				if N3CD4Q1C44=1 or N3CD4Q1C45=1 or N3CD4Q1C46=1 then x_cocsym5=1;
				else if N3CD4Q1C44=2 and N3CD4Q1C45=2 and N3CD4Q1C46=2 then x_cocsym5=0;
				*Criterion 6:41-43;
				if N3CD4Q1C41=1 or N3CD4Q1C42=1 or N3CD4Q1C43=1 then x_cocsym6=1;
				else if N3CD4Q1C41=2 and N3CD4Q1C42=2 and N3CD4Q1C43=2 then x_cocsym6=0;
				*Criterion 7: (35, 36);
				if N3CD4Q1C35=1 or N3CD4Q1C36=1 then x_cocsym7=1;
				else if N3CD4Q1C35=2 and N3CD4Q1C36=2 then x_cocsym7=0;
				*Criterion 8: 47, 48;
				if N3CD4Q1C47=1 or N3CD4Q1C48=1 then x_cocsym8=1;
				else if N3CD4Q1C47=2 and N3CD4Q1C48=2 then x_cocsym8=0;
				*Criterion 9: (37, 38);
				if N3CD4Q1C37=1 or N3CD4Q1C38=1 then x_cocsym9=1;
				else if N3CD4Q1C37=2 and N3CD4Q1C38=2 then x_cocsym9=0;
				*Criterion 10: 1, 2;
				if N3CD4Q1C1=1 or N3CD4Q1C2=1 then x_cocsym10=1;
				else if N3CD4Q1C1=2 and N3CD4Q1C2=2 then x_cocsym10=0;
				*Criterion 11 (withdrawal criterion);
				* Item A;
				if N3CD4Q1C5=1 then x_cocwith0=1;
				else if N3CD4Q1C5=2 then x_cocwith0=0;
				if N3CD4Q1C4=1 then x_cocwith1=1;
				else if N3CD4Q1C4=2 then x_cocwith1=0;
				if N3CD4Q1C17=1 then x_cocwith2=1;
				else if N3CD4Q1C17=2 then x_cocwith2=0;
				if N3CD4Q1C3=1 or N3CD4Q1C20=1 then x_cocwith3=1;
				else if N3CD4Q1C3=2 and N3CD4Q1C20=2 then x_cocwith3=0;
				if N3CD4Q1C10=1 then x_cocwith4=1;
				else if N3CD4Q1C10=2 then x_cocwith4=0;
				if N3CD4Q1C14=1 or N3CD4Q1C15=1 then x_cocwith5=1;
				else if N3CD4Q1C14=2 and N3CD4Q1C15=2 then x_cocwith5=0;
				*Item B (29);
				if N3CD4Q1C29=1 then x_cocsym11b=1;
				else if N3CD4Q1C29=2 then x_cocsym11b=0;
				*Criterion 11 (withdrawal criterion) - Final;
				%sumMiss (x_sumcocwith, x_cocwith1 x_cocwith2 x_cocwith3 x_cocwith4 x_cocwith5);
				%diag (x_cocwith11a, x_sumcocwith, 2);

				if x_sumcocwith>=2 and x_cocwith0=1 then x_cocsym11a=1;
				else if . < x_sumcocwith <2 or x_cocwith0=0 then x_cocsym11a=0;

				if x_cocsym11a=1 or x_cocsym11b=1 then x_cocsym11=1;
				else if x_cocsym11a=0 and x_cocsym11b=0 then x_cocsym11=0;
				*PPY = No;
				%SymNo(x_pcocsym1);%SymNo(x_pcocsym2);%SymNo(x_pcocsym3);%SymNo(x_pcocsym4);%SymNo(x_pcocsym5);%SymNo(x_pcocsym6);
				%SymNo(x_pcocsym7);%SymNo(x_pcocsym8);%SymNo(x_pcocsym9);%SymNo(x_pcocsym10);%SymNo(x_pcocsym11);
				%SymNo(x_pcocsym11b);%SymNo(x_pcocsym11a);%SymNo(x_pcocwith11a);
				%SymNo(x_pcocwith0);%SymNo(x_pcocwith1);%SymNo(x_pcocwith2);%SymNo(x_pcocwith3);%SymNo(x_pcocwith4);%SymNo(x_pcocwith5)
				%SymNo(x_pcocsym4legal);
			end; *PY ONLY;
			else if N3BD4Q2B = 2 then do; *PPY ONLY;
				*****************;
				*PPY CRITERIA;
				*****************;
				*Criterion 1: 32;
				if N3CD4Q1E32=1 then x_pcocsym1=1;
				else if N3CQ1A32=2 or N3CQ1B32=2 then x_pcocsym1=0;
				else if N3CD4Q1E32=2 then x_pcocsym1=0;
				*Criterion 2: (30, 31);
				if N3CD4Q1E30=1 or N3CD4Q1E31=1 then x_pcocsym2=1;
				else if N3CD4Q1E30=2 and N3CD4Q1E31=2 then x_pcocsym2=0;
				*Criterion 3: (33, 34);
				if N3CD4Q1E33=1 or N3CD4Q1E34=1 then x_pcocsym3=1;
				else if N3CD4Q1E33=2 and N3CD4Q1E34=2 then x_pcocsym3=0;		
				*Criterion OLD 4 (LEGAL);
				if N3CQ12D4=1 then x_pcocsym4legal=1;
				else if N3CQ12D4=2 or N3CQ12C=2 then x_pcocsym4legal=0; *hierarchical question - if said no to parent or child question then no;
				*Criterion 4: CRAVING (39, 40);
				if N3CD4Q1E39=1 or N3CD4Q1E40=1 then x_pcocsym4=1;
				else if N3CD4Q1E39=2 and N3CD4Q1E40=2 then x_pcocsym4=0;
				*Criterion 5: 44-46;
				if N3CD4Q1E44=1 or N3CD4Q1E45=1 or N3CD4Q1E46=1 then x_pcocsym5=1;
				else if N3CD4Q1E44=2 and N3CD4Q1E45=2 and N3CD4Q1E46=2 then x_pcocsym5=0;
				*Criterion 6:41-43;
				if N3CD4Q1E41=1 or N3CD4Q1E42=1 or N3CD4Q1E43=1 then x_pcocsym6=1;
				else if N3CD4Q1E41=2 and N3CD4Q1E42=2 and N3CD4Q1E43=2 then x_pcocsym6=0;
				*Criterion 7: (35, 36);
				if N3CD4Q1E35=1 or N3CD4Q1E36=1 then x_pcocsym7=1;
				else if N3CD4Q1E35=2 and N3CD4Q1E36=2 then x_pcocsym7=0;
				*Criterion 8: 47, 48;
				if N3CD4Q1E47=1 or N3CD4Q1E48=1 then x_pcocsym8=1;
				else if N3CD4Q1E47=2 and N3CD4Q1E48=2 then x_pcocsym8=0;
				*Criterion 9: (37, 38);
				if N3CD4Q1E37=1 or N3CD4Q1E38=1 then x_pcocsym9=1;
				else if N3CD4Q1E37=2 and N3CD4Q1E38=2 then x_pcocsym9=0;
				*Criterion 10: 1, 2;
				if N3CD4Q1E1=1 or N3CD4Q1E2=1 then x_pcocsym10=1;
				else if N3CD4Q1E1=2 and N3CD4Q1E2=2 then x_pcocsym10=0;
				*Criterion 11 (withdrawal criterion);
				* Item A;
				if N3CD4Q1E5=1 then x_pcocwith0=1;
				else if N3CD4Q1E5=2 then x_pcocwith0=0;
				if N3CD4Q1E4=1 then x_pcocwith1=1;
				else if N3CD4Q1E4=2 then x_pcocwith1=0;
				if N3CD4Q1E17=1 then x_pcocwith2=1;
				else if N3CD4Q1E17=2 then x_pcocwith2=0;
				if N3CD4Q1E3=1 or N3CD4Q1E20=1 then x_pcocwith3=1;
				else if N3CD4Q1E3=2 and N3CD4Q1E20=2 then x_pcocwith3=0;
				if N3CD4Q1E10=1 then x_pcocwith4=1;
				else if N3CD4Q1E10=2 then x_pcocwith4=0;
				if N3CD4Q1E14=1 or N3CD4Q1E15=1 then x_pcocwith5=1;
				else if N3CD4Q1E14=2 and N3CD4Q1E15=2 then x_pcocwith5=0;
				*Item B (29);
				if N3CD4Q1E29=1 then x_pcocsym11b=1;
				else if N3CD4Q1E29=2 then x_pcocsym11b=0;
				*Criterion 11 (withdrawal criterion) - Final;
				%sumMiss (x_psumcocwith, x_pcocwith1 x_pcocwith2 x_pcocwith3 x_pcocwith4 x_pcocwith5);
				%diag (x_pcocwith11a, x_psumcocwith, 2);

				if x_psumcocwith>=2 and x_pcocwith0=1 then x_pcocsym11a=1;
				else if . < x_psumcocwith <2 or x_pcocwith0=0 then x_pcocsym11a=0;

				if x_pcocsym11a=1 or x_pcocsym11b=1 then x_pcocsym11=1;
				else if x_pcocsym11a=0 and x_pcocsym11b=0 then x_pcocsym11=0;
				*PY = No;
				%SymNo(x_cocsym1);%SymNo(x_cocsym2);%SymNo(x_cocsym3);%SymNo(x_cocsym4);%SymNo(x_cocsym5);%SymNo(x_cocsym6);
				%SymNo(x_cocsym7);%SymNo(x_cocsym8);%SymNo(x_cocsym9);%SymNo(x_cocsym10);%SymNo(x_cocsym11);
				%SymNo(x_cocsym11b);%SymNo(x_cocsym11a);%SymNo(x_cocwith11a);
				%SymNo(x_cocwith0);%SymNo(x_cocwith1);%SymNo(x_cocwith2);%SymNo(x_cocwith3);%SymNo(x_cocwith4);%SymNo(x_cocwith5)
				%SymNo(x_cocsym4legal);			
			end; *PPY ONLY;
			else if N3BD4Q2B in (3 9 .) then do; *PY + PPY or UNKNOWN;
				*****************;
				*PY CRITERIA;
				*****************;
				*Criterion 1: 32;
				if N3CD4Q1C32=1 then x_cocsym1=1;
				else if N3CQ1A32=2 or N3CQ1B32=2 then x_cocsym1=0;
				else if N3CD4Q1C32=2 then x_cocsym1=0;
				*Criterion 2: (30, 31);
				if N3CD4Q1C30=1 or N3CD4Q1C31=1 then x_cocsym2=1;
				else if N3CD4Q1C30=2 and N3CD4Q1C31=2 then x_cocsym2=0;
				*Criterion 3: (33, 34);
				if N3CD4Q1C33=1 or N3CD4Q1C34=1 then x_cocsym3=1;
				else if N3CD4Q1C33=2 and N3CD4Q1C34=2 then x_cocsym3=0;		
				*Criterion OLD 4 (LEGAL);
				if N3CQ12B4=1 then x_cocsym4legal=1;
				else if N3CQ12B4=2 or N3CQ12A=2 then x_cocsym4legal=0; *hierarchical question - if said no to parent or child question then no;
				*Criterion 4: CRAVING (39, 40);
				if N3CD4Q1C39=1 or N3CD4Q1C40=1 then x_cocsym4=1;
				else if N3CD4Q1C39=2 and N3CD4Q1C40=2 then x_cocsym4=0;
				*Criterion 5: 44-46;
				if N3CD4Q1C44=1 or N3CD4Q1C45=1 or N3CD4Q1C46=1 then x_cocsym5=1;
				else if N3CD4Q1C44=2 and N3CD4Q1C45=2 and N3CD4Q1C46=2 then x_cocsym5=0;
				*Criterion 6:41-43;
				if N3CD4Q1C41=1 or N3CD4Q1C42=1 or N3CD4Q1C43=1 then x_cocsym6=1;
				else if N3CD4Q1C41=2 and N3CD4Q1C42=2 and N3CD4Q1C43=2 then x_cocsym6=0;
				*Criterion 7: (35, 36);
				if N3CD4Q1C35=1 or N3CD4Q1C36=1 then x_cocsym7=1;
				else if N3CD4Q1C35=2 and N3CD4Q1C36=2 then x_cocsym7=0;
				*Criterion 8: 47, 48;
				if N3CD4Q1C47=1 or N3CD4Q1C48=1 then x_cocsym8=1;
				else if N3CD4Q1C47=2 and N3CD4Q1C48=2 then x_cocsym8=0;
				*Criterion 9: (37, 38);
				if N3CD4Q1C37=1 or N3CD4Q1C38=1 then x_cocsym9=1;
				else if N3CD4Q1C37=2 and N3CD4Q1C38=2 then x_cocsym9=0;
				*Criterion 10: 1, 2;
				if N3CD4Q1C1=1 or N3CD4Q1C2=1 then x_cocsym10=1;
				else if N3CD4Q1C1=2 and N3CD4Q1C2=2 then x_cocsym10=0;
				*Criterion 11 (withdrawal criterion);
				* Item A;
				if N3CD4Q1C5=1 then x_cocwith0=1;
				else if N3CD4Q1C5=2 then x_cocwith0=0;
				if N3CD4Q1C4=1 then x_cocwith1=1;
				else if N3CD4Q1C4=2 then x_cocwith1=0;
				if N3CD4Q1C17=1 then x_cocwith2=1;
				else if N3CD4Q1C17=2 then x_cocwith2=0;
				if N3CD4Q1C3=1 or N3CD4Q1C20=1 then x_cocwith3=1;
				else if N3CD4Q1C3=2 and N3CD4Q1C20=2 then x_cocwith3=0;
				if N3CD4Q1C10=1 then x_cocwith4=1;
				else if N3CD4Q1C10=2 then x_cocwith4=0;
				if N3CD4Q1C14=1 or N3CD4Q1C15=1 then x_cocwith5=1;
				else if N3CD4Q1C14=2 and N3CD4Q1C15=2 then x_cocwith5=0;
				*Item B (29);
				if N3CD4Q1C29=1 then x_cocsym11b=1;
				else if N3CD4Q1C29=2 then x_cocsym11b=0;
				*Criterion 11 (withdrawal criterion) - Final;
				%sumMiss (x_sumcocwith, x_cocwith1 x_cocwith2 x_cocwith3 x_cocwith4 x_cocwith5);
				%diag (x_cocwith11a, x_sumcocwith, 2);

				if x_sumcocwith>=2 and x_cocwith0=1 then x_cocsym11a=1;
				else if . < x_sumcocwith <2 or x_cocwith0=0 then x_cocsym11a=0;

				if x_cocsym11a=1 or x_cocsym11b=1 then x_cocsym11=1;
				else if x_cocsym11a=0 and x_cocsym11b=0 then x_cocsym11=0;
				*****************;
				*PPY CRITERIA;
				*****************;
				*Criterion 1: 32;
				if N3CD4Q1E32=1 then x_pcocsym1=1;
				else if N3CQ1A32=2 or N3CQ1B32=2 then x_pcocsym1=0;
				else if N3CD4Q1E32=2 then x_pcocsym1=0;
				*Criterion 2: (30, 31);
				if N3CD4Q1E30=1 or N3CD4Q1E31=1 then x_pcocsym2=1;
				else if N3CD4Q1E30=2 and N3CD4Q1E31=2 then x_pcocsym2=0;
				*Criterion 3: (33, 34);
				if N3CD4Q1E33=1 or N3CD4Q1E34=1 then x_pcocsym3=1;
				else if N3CD4Q1E33=2 and N3CD4Q1E34=2 then x_pcocsym3=0;		
				*Criterion OLD 4 (LEGAL);
				if N3CQ12D4=1 then x_pcocsym4legal=1;
				else if N3CQ12D4=2 or N3CQ12C=2 then x_pcocsym4legal=0; *hierarchical question - if said no to parent or child question then no;
				*Criterion 4: CRAVING (39, 40);
				if N3CD4Q1E39=1 or N3CD4Q1E40=1 then x_pcocsym4=1;
				else if N3CD4Q1E39=2 and N3CD4Q1E40=2 then x_pcocsym4=0;
				*Criterion 5: 44-46;
				if N3CD4Q1E44=1 or N3CD4Q1E45=1 or N3CD4Q1E46=1 then x_pcocsym5=1;
				else if N3CD4Q1E44=2 and N3CD4Q1E45=2 and N3CD4Q1E46=2 then x_pcocsym5=0;
				*Criterion 6:41-43;
				if N3CD4Q1E41=1 or N3CD4Q1E42=1 or N3CD4Q1E43=1 then x_pcocsym6=1;
				else if N3CD4Q1E41=2 and N3CD4Q1E42=2 and N3CD4Q1E43=2 then x_pcocsym6=0;
				*Criterion 7: (35, 36);
				if N3CD4Q1E35=1 or N3CD4Q1E36=1 then x_pcocsym7=1;
				else if N3CD4Q1E35=2 and N3CD4Q1E36=2 then x_pcocsym7=0;
				*Criterion 8: 47, 48;
				if N3CD4Q1E47=1 or N3CD4Q1E48=1 then x_pcocsym8=1;
				else if N3CD4Q1E47=2 and N3CD4Q1E48=2 then x_pcocsym8=0;
				*Criterion 9: (37, 38);
				if N3CD4Q1E37=1 or N3CD4Q1E38=1 then x_pcocsym9=1;
				else if N3CD4Q1E37=2 and N3CD4Q1E38=2 then x_pcocsym9=0;
				*Criterion 10: 1, 2;
				if N3CD4Q1E1=1 or N3CD4Q1E2=1 then x_pcocsym10=1;
				else if N3CD4Q1E1=2 and N3CD4Q1E2=2 then x_pcocsym10=0;
				*Criterion 11 (withdrawal criterion);
				* Item A;
				if N3CD4Q1E5=1 then x_pcocwith0=1;
				else if N3CD4Q1E5=2 then x_pcocwith0=0;
				if N3CD4Q1E4=1 then x_pcocwith1=1;
				else if N3CD4Q1E4=2 then x_pcocwith1=0;
				if N3CD4Q1E17=1 then x_pcocwith2=1;
				else if N3CD4Q1E17=2 then x_pcocwith2=0;
				if N3CD4Q1E3=1 or N3CD4Q1E20=1 then x_pcocwith3=1;
				else if N3CD4Q1E3=2 and N3CD4Q1E20=2 then x_pcocwith3=0;
				if N3CD4Q1E10=1 then x_pcocwith4=1;
				else if N3CD4Q1E10=2 then x_pcocwith4=0;
				if N3CD4Q1E14=1 or N3CD4Q1E15=1 then x_pcocwith5=1;
				else if N3CD4Q1E14=2 and N3CD4Q1E15=2 then x_pcocwith5=0;
				*Item B (29);
				if N3CD4Q1E29=1 then x_pcocsym11b=1;
				else if N3CD4Q1E29=2 then x_pcocsym11b=0;
				*Criterion 11 (withdrawal criterion) - Final;
				%sumMiss (x_psumcocwith, x_pcocwith1 x_pcocwith2 x_pcocwith3 x_pcocwith4 x_pcocwith5);
				%diag (x_pcocwith11a, x_psumcocwith, 2);

				if x_psumcocwith>=2 and x_pcocwith0=1 then x_pcocsym11a=1;
				else if . < x_psumcocwith <2 or x_pcocwith0=0 then x_pcocsym11a=0;

				if x_pcocsym11a=1 or x_pcocsym11b=1 then x_pcocsym11=1;
				else if x_pcocsym11a=0 and x_pcocsym11b=0 then x_pcocsym11=0;
			end; 
		end;
	end;

	****************************************;
	*	COCAINE FINAL VARS			;
	****************************************;

	********************;
	*DSM-IV ABUSE;
	********************;
	%sumMiss (x_sumcocab4, 		x_cocsym5 x_cocsym8 x_cocsym4legal x_cocsym6);
	%sumMiss (x_psumcocab4, 		x_pcocsym5 x_pcocsym8 x_pcocsym4legal x_pcocsym6);

	%diag (x_cocabuse4, 		x_sumcocab4, 	1);
	%diag (x_pcocabuse4, 		x_psumcocab4, 1);
	
	if x_cocabuse4=1 or x_pcocabuse4=1 then x_lcocabuse4=1;
	else if x_cocabuse4=0 and x_pcocabuse4=0 then x_lcocabuse4=0;

	********************;
	*DSM-IV DEP	;
	********************;
	%sumMiss (x_sumcocdep4, 		x_cocsym10 x_cocsym11 x_cocsym1 x_cocsym2 x_cocsym3 x_cocsym7 x_cocsym9);
	%sumMiss (x_psumcocdep4, 	x_pcocsym10 x_pcocsym11 x_pcocsym1 x_pcocsym2 x_pcocsym3 x_pcocsym7 x_pcocsym9);

	%diag (x_cocdep4, 	x_sumcocdep4, 		3);

	*PPY has additional requirement for diagnosis;
	if x_psumcocdep4 >=3 then do;
		if N3CD4Q2A=1 then x_pcocdep4=1; *expericences happened around same time (pg 11);
		else if N3CD4Q2A = 2 then x_pcocdep4=0; *experiences did not happen around same time;
		else if N3CD4Q2A = 9 then x_pcocdep4=.;
	end;
	else if . < x_psumcocdep4 <3 then x_pcocdep4=0;

	if x_cocdep4=1 or x_pcocdep4=1 then x_lcocdep4=1;
	else if x_cocdep4=0 and x_pcocdep4=0 then x_lcocdep4=0;

	********************;
	*DSM-5				;
	********************;
	%sumMiss (x_sumcocud5, 		x_cocsym1 x_cocsym2 x_cocsym3 x_cocsym4 x_cocsym5 x_cocsym6 x_cocsym7 x_cocsym8 x_cocsym9 x_cocsym10 x_cocsym11);
	%sumMiss (x_psumcocud5, 		x_pcocsym1 x_pcocsym2 x_pcocsym3 x_pcocsym4 x_pcocsym5 x_pcocsym6 x_pcocsym7 x_pcocsym8 x_pcocsym9 x_pcocsym10 x_pcocsym11);

	%diag (x_cocud5, 		x_sumcocud5, 	2);

	if x_psumcocud5 >=2 then do;
		if N3CD4Q2A=1 then x_pcocud5=1;
		else if N3CD4Q2A = 2 then x_pcocud5=0; 
		else if N3CD4Q2A = 9 then x_pcocud5=.;
	end;
	else if . < x_psumcocud5 <2 then x_pcocud5=0;

	if x_cocud5=1 or x_pcocud5=1 then x_lcocud5=1;
	else if x_cocud5=0 and x_pcocud5=0 then x_lcocud5=0;

	if x_sumcocud5 in (0 1) then x_cocud5sev=0;
	else if x_sumcocud5 in (2 3) then x_cocud5sev=1;
	else if x_sumcocud5 in (4 5) then x_cocud5sev=2;
	else if x_sumcocud5 >= 6 then x_cocud5sev=3;

	if x_psumcocud5 in (0 1) then x_pcocud5sev=0;
	else if x_psumcocud5>1 and N3CD4Q2A=1 then do;
		if x_psumcocud5 in (2 3) then x_pcocud5sev=1;
		else if x_psumcocud5 in (4 5) then x_pcocud5sev=2;
		else if x_psumcocud5 >= 6 then x_pcocud5sev=3;
	end;
	else if x_psumcocud5>1 and N3CD4Q2A=2 then x_pcocud5sev=0;

*************************************************************************************************************************************************;
* STIMULANTS																																										;		
*************************************************************************************************************************************************;

	****************************************;
	*	STIMULANTS CRITERIA				;
	****************************************;
	if N3BQ1A5 = 2 then do; *NEVER;
		*PY = No;
		%SymNo(x_stisym1);%SymNo(x_stisym2);%SymNo(x_stisym3);%SymNo(x_stisym4);%SymNo(x_stisym5);%SymNo(x_stisym6);
		%SymNo(x_stisym7);%SymNo(x_stisym8);%SymNo(x_stisym9);%SymNo(x_stisym10);%SymNo(x_stisym11);
		%SymNo(x_stisym11b);%SymNo(x_stisym11a);%SymNo(x_stiwith11a);
		%SymNo(x_stiwith0);%SymNo(x_stiwith1);%SymNo(x_stiwith2);%SymNo(x_stiwith3);%SymNo(x_stiwith4);%SymNo(x_stiwith5)
		%SymNo(x_stisym4legal);
		*PPY = No;
		%SymNo(x_pstisym1);%SymNo(x_pstisym2);%SymNo(x_pstisym3);%SymNo(x_pstisym4);%SymNo(x_pstisym5);%SymNo(x_pstisym6);
		%SymNo(x_pstisym7);%SymNo(x_pstisym8);%SymNo(x_pstisym9);%SymNo(x_pstisym10);%SymNo(x_pstisym11);
		%SymNo(x_pstisym11b);%SymNo(x_pstisym11a);%SymNo(x_pstiwith11a);
		%SymNo(x_pstiwith0);%SymNo(x_pstiwith1);%SymNo(x_pstiwith2);%SymNo(x_pstiwith3);%SymNo(x_pstiwith4);%SymNo(x_pstiwith5)
		%SymNo(x_pstisym4legal);
	end;
	else if N3BQ1A5 in (1 9) then do; *EVER OR UKNOWN;
		if NDRUGUSER=2 then do; *NEVER;
			*PY = No;
			%SymNo(x_stisym1);%SymNo(x_stisym2);%SymNo(x_stisym3);%SymNo(x_stisym4);%SymNo(x_stisym5);%SymNo(x_stisym6);
			%SymNo(x_stisym7);%SymNo(x_stisym8);%SymNo(x_stisym9);%SymNo(x_stisym10);%SymNo(x_stisym11);
			%SymNo(x_stisym11b);%SymNo(x_stisym11a);%SymNo(x_stiwith11a);
			%SymNo(x_stiwith0);%SymNo(x_stiwith1);%SymNo(x_stiwith2);%SymNo(x_stiwith3);%SymNo(x_stiwith4);%SymNo(x_stiwith5)
			%SymNo(x_stisym4legal);
			*PPY = No;
			%SymNo(x_pstisym1);%SymNo(x_pstisym2);%SymNo(x_pstisym3);%SymNo(x_pstisym4);%SymNo(x_pstisym5);%SymNo(x_pstisym6);
			%SymNo(x_pstisym7);%SymNo(x_pstisym8);%SymNo(x_pstisym9);%SymNo(x_pstisym10);%SymNo(x_pstisym11);
			%SymNo(x_pstisym11b);%SymNo(x_pstisym11a);%SymNo(x_pstiwith11a);
			%SymNo(x_pstiwith0);%SymNo(x_pstiwith1);%SymNo(x_pstiwith2);%SymNo(x_pstiwith3);%SymNo(x_pstiwith4);%SymNo(x_pstiwith5)
			%SymNo(x_pstisym4legal);
		end;
		else do; *TIMING;
			if N3BD5Q2B = 1 then do; *PY ONLY;
				*****************;
				*PY CRITERIA;
				*****************;
				*Criterion 1: 32;
				if N3CD5Q1C32=1 then x_stisym1=1;
				else if N3CQ1A32=2 or N3CQ1B32=2 then x_stisym1=0;
				else if N3CD5Q1C32=2 then x_stisym1=0;
				*Criterion 2: (30, 31);
				if N3CD5Q1C30=1 or N3CD5Q1C31=1 then x_stisym2=1;
				else if N3CD5Q1C30=2 and N3CD5Q1C31=2 then x_stisym2=0;
				*Criterion 3: (33, 34);
				if N3CD5Q1C33=1 or N3CD5Q1C34=1 then x_stisym3=1;
				else if N3CD5Q1C33=2 and N3CD5Q1C34=2 then x_stisym3=0;		
				*Criterion OLD 4 (LEGAL);
				if N3CQ12B5=1 then x_stisym4legal=1;
				else if N3CQ12B5=2 or N3CQ12A=2 then x_stisym4legal=0; *hierarchical question - if said no to parent or child question then no;
				*Criterion 4: CRAVING (39, 40);
				if N3CD5Q1C39=1 or N3CD5Q1C40=1 then x_stisym4=1;
				else if N3CD5Q1C39=2 and N3CD5Q1C40=2 then x_stisym4=0;
				*Criterion 5: 44-46;
				if N3CD5Q1C44=1 or N3CD5Q1C45=1 or N3CD5Q1C46=1 then x_stisym5=1;
				else if N3CD5Q1C44=2 and N3CD5Q1C45=2 and N3CD5Q1C46=2 then x_stisym5=0;
				*Criterion 6:41-43;
				if N3CD5Q1C41=1 or N3CD5Q1C42=1 or N3CD5Q1C43=1 then x_stisym6=1;
				else if N3CD5Q1C41=2 and N3CD5Q1C42=2 and N3CD5Q1C43=2 then x_stisym6=0;
				*Criterion 7: (35, 36);
				if N3CD5Q1C35=1 or N3CD5Q1C36=1 then x_stisym7=1;
				else if N3CD5Q1C35=2 and N3CD5Q1C36=2 then x_stisym7=0;
				*Criterion 8: 47, 48;
				if N3CD5Q1C47=1 or N3CD5Q1C48=1 then x_stisym8=1;
				else if N3CD5Q1C47=2 and N3CD5Q1C48=2 then x_stisym8=0;
				*Criterion 9: (37, 38);
				if N3CD5Q1C37=1 or N3CD5Q1C38=1 then x_stisym9=1;
				else if N3CD5Q1C37=2 and N3CD5Q1C38=2 then x_stisym9=0;
				*Criterion 10: 1, 2;
				if N3CD5Q1C1=1 or N3CD5Q1C2=1 then x_stisym10=1;
				else if N3CD5Q1C1=2 and N3CD5Q1C2=2 then x_stisym10=0;
				*Criterion 11 (withdrawal criterion);
				* Item A;
				if N3CD5Q1C5=1 then x_stiwith0=1;
				else if N3CD5Q1C5=2 then x_stiwith0=0;
				if N3CD5Q1C4=1 then x_stiwith1=1;
				else if N3CD5Q1C4=2 then x_stiwith1=0;
				if N3CD5Q1C17=1 then x_stiwith2=1;
				else if N3CD5Q1C17=2 then x_stiwith2=0;
				if N3CD5Q1C3=1 or N3CD5Q1C20=1 then x_stiwith3=1;
				else if N3CD5Q1C3=2 and N3CD5Q1C20=2 then x_stiwith3=0;
				if N3CD5Q1C10=1 then x_stiwith4=1;
				else if N3CD5Q1C10=2 then x_stiwith4=0;
				if N3CD5Q1C14=1 or N3CD5Q1C15=1 then x_stiwith5=1;
				else if N3CD5Q1C14=2 and N3CD5Q1C15=2 then x_stiwith5=0;
				*Item B (29);
				if N3CD5Q1C29=1 then x_stisym11b=1;
				else if N3CD5Q1C29=2 then x_stisym11b=0;
				*Criterion 11 (withdrawal criterion) - Final;
				%sumMiss (x_sumstiwith, x_stiwith1 x_stiwith2 x_stiwith3 x_stiwith4 x_stiwith5);
				%diag (x_stiwith11a, x_sumstiwith, 2);

				if x_sumstiwith>=2 and x_stiwith0=1 then x_stisym11a=1;
				else if . < x_sumstiwith <2 or x_stiwith0=0 then x_stisym11a=0;

				if x_stisym11a=1 or x_stisym11b=1 then x_stisym11=1;
				else if x_stisym11a=0 and x_stisym11b=0 then x_stisym11=0;
				*PPY = No;
				%SymNo(x_pstisym1);%SymNo(x_pstisym2);%SymNo(x_pstisym3);%SymNo(x_pstisym4);%SymNo(x_pstisym5);%SymNo(x_pstisym6);
				%SymNo(x_pstisym7);%SymNo(x_pstisym8);%SymNo(x_pstisym9);%SymNo(x_pstisym10);%SymNo(x_pstisym11);
				%SymNo(x_pstisym11b);%SymNo(x_pstisym11a);%SymNo(x_pstiwith11a);
				%SymNo(x_pstiwith0);%SymNo(x_pstiwith1);%SymNo(x_pstiwith2);%SymNo(x_pstiwith3);%SymNo(x_pstiwith4);%SymNo(x_pstiwith5)
				%SymNo(x_pstisym4legal);
			end; *PY ONLY;
			else if N3BD5Q2B = 2 then do; *PPY ONLY;
				*****************;
				*PPY CRITERIA;
				*****************;
				*Criterion 1: 32;
				if N3CD5Q1E32=1 then x_pstisym1=1;
				else if N3CQ1A32=2 or N3CQ1B32=2 then x_pstisym1=0;
				else if N3CD5Q1E32=2 then x_pstisym1=0;
				*Criterion 2: (30, 31);
				if N3CD5Q1E30=1 or N3CD5Q1E31=1 then x_pstisym2=1;
				else if N3CD5Q1E30=2 and N3CD5Q1E31=2 then x_pstisym2=0;
				*Criterion 3: (33, 34);
				if N3CD5Q1E33=1 or N3CD5Q1E34=1 then x_pstisym3=1;
				else if N3CD5Q1E33=2 and N3CD5Q1E34=2 then x_pstisym3=0;		
				*Criterion OLD 4 (LEGAL);
				if N3CQ12D5=1 then x_pstisym4legal=1;
				else if N3CQ12D5=2 or N3CQ12C=2 then x_pstisym4legal=0; *hierarchical question - if said no to parent or child question then no;
				*Criterion 4: CRAVING (39, 40);
				if N3CD5Q1E39=1 or N3CD5Q1E40=1 then x_pstisym4=1;
				else if N3CD5Q1E39=2 and N3CD5Q1E40=2 then x_pstisym4=0;
				*Criterion 5: 44-46;
				if N3CD5Q1E44=1 or N3CD5Q1E45=1 or N3CD5Q1E46=1 then x_pstisym5=1;
				else if N3CD5Q1E44=2 and N3CD5Q1E45=2 and N3CD5Q1E46=2 then x_pstisym5=0;
				*Criterion 6:41-43;
				if N3CD5Q1E41=1 or N3CD5Q1E42=1 or N3CD5Q1E43=1 then x_pstisym6=1;
				else if N3CD5Q1E41=2 and N3CD5Q1E42=2 and N3CD5Q1E43=2 then x_pstisym6=0;
				*Criterion 7: (35, 36);
				if N3CD5Q1E35=1 or N3CD5Q1E36=1 then x_pstisym7=1;
				else if N3CD5Q1E35=2 and N3CD5Q1E36=2 then x_pstisym7=0;
				*Criterion 8: 47, 48;
				if N3CD5Q1E47=1 or N3CD5Q1E48=1 then x_pstisym8=1;
				else if N3CD5Q1E47=2 and N3CD5Q1E48=2 then x_pstisym8=0;
				*Criterion 9: (37, 38);
				if N3CD5Q1E37=1 or N3CD5Q1E38=1 then x_pstisym9=1;
				else if N3CD5Q1E37=2 and N3CD5Q1E38=2 then x_pstisym9=0;
				*Criterion 10: 1, 2;
				if N3CD5Q1E1=1 or N3CD5Q1E2=1 then x_pstisym10=1;
				else if N3CD5Q1E1=2 and N3CD5Q1E2=2 then x_pstisym10=0;
				*Criterion 11 (withdrawal criterion);
				* Item A;
				if N3CD5Q1E5=1 then x_pstiwith0=1;
				else if N3CD5Q1E5=2 then x_pstiwith0=0;
				if N3CD5Q1E4=1 then x_pstiwith1=1;
				else if N3CD5Q1E4=2 then x_pstiwith1=0;
				if N3CD5Q1E17=1 then x_pstiwith2=1;
				else if N3CD5Q1E17=2 then x_pstiwith2=0;
				if N3CD5Q1E3=1 or N3CD5Q1E20=1 then x_pstiwith3=1;
				else if N3CD5Q1E3=2 and N3CD5Q1E20=2 then x_pstiwith3=0;
				if N3CD5Q1E10=1 then x_pstiwith4=1;
				else if N3CD5Q1E10=2 then x_pstiwith4=0;
				if N3CD5Q1E14=1 or N3CD5Q1E15=1 then x_pstiwith5=1;
				else if N3CD5Q1E14=2 and N3CD5Q1E15=2 then x_pstiwith5=0;
				*Item B (29);
				if N3CD5Q1E29=1 then x_pstisym11b=1;
				else if N3CD5Q1E29=2 then x_pstisym11b=0;
				*Criterion 11 (withdrawal criterion) - Final;
				%sumMiss (x_psumstiwith, x_pstiwith1 x_pstiwith2 x_pstiwith3 x_pstiwith4 x_pstiwith5);
				%diag (x_pstiwith11a, x_psumstiwith, 2);

				if x_psumstiwith>=2 and x_pstiwith0=1 then x_pstisym11a=1;
				else if . < x_psumstiwith <2 or x_pstiwith0=0 then x_pstisym11a=0;

				if x_pstisym11a=1 or x_pstisym11b=1 then x_pstisym11=1;
				else if x_pstisym11a=0 and x_pstisym11b=0 then x_pstisym11=0;
				*PY = No;
				%SymNo(x_stisym1);%SymNo(x_stisym2);%SymNo(x_stisym3);%SymNo(x_stisym4);%SymNo(x_stisym5);%SymNo(x_stisym6);
				%SymNo(x_stisym7);%SymNo(x_stisym8);%SymNo(x_stisym9);%SymNo(x_stisym10);%SymNo(x_stisym11);
				%SymNo(x_stisym11b);%SymNo(x_stisym11a);%SymNo(x_stiwith11a);
				%SymNo(x_stiwith0);%SymNo(x_stiwith1);%SymNo(x_stiwith2);%SymNo(x_stiwith3);%SymNo(x_stiwith4);%SymNo(x_stiwith5)
				%SymNo(x_stisym4legal);			
			end; *PPY ONLY;
			else if N3BD5Q2B in (3 9 .) then do; *PY + PPY or UNKNOWN;
				*****************;
				*PY CRITERIA;
				*****************;
				*Criterion 1: 32;
				if N3CD5Q1C32=1 then x_stisym1=1;
				else if N3CQ1A32=2 or N3CQ1B32=2 then x_stisym1=0;
				else if N3CD5Q1C32=2 then x_stisym1=0;
				*Criterion 2: (30, 31);
				if N3CD5Q1C30=1 or N3CD5Q1C31=1 then x_stisym2=1;
				else if N3CD5Q1C30=2 and N3CD5Q1C31=2 then x_stisym2=0;
				*Criterion 3: (33, 34);
				if N3CD5Q1C33=1 or N3CD5Q1C34=1 then x_stisym3=1;
				else if N3CD5Q1C33=2 and N3CD5Q1C34=2 then x_stisym3=0;		
				*Criterion OLD 4 (LEGAL);
				if N3CQ12B5=1 then x_stisym4legal=1;
				else if N3CQ12B5=2 or N3CQ12A=2 then x_stisym4legal=0; *hierarchical question - if said no to parent or child question then no;
				*Criterion 4: CRAVING (39, 40);
				if N3CD5Q1C39=1 or N3CD5Q1C40=1 then x_stisym4=1;
				else if N3CD5Q1C39=2 and N3CD5Q1C40=2 then x_stisym4=0;
				*Criterion 5: 44-46;
				if N3CD5Q1C44=1 or N3CD5Q1C45=1 or N3CD5Q1C46=1 then x_stisym5=1;
				else if N3CD5Q1C44=2 and N3CD5Q1C45=2 and N3CD5Q1C46=2 then x_stisym5=0;
				*Criterion 6:41-43;
				if N3CD5Q1C41=1 or N3CD5Q1C42=1 or N3CD5Q1C43=1 then x_stisym6=1;
				else if N3CD5Q1C41=2 and N3CD5Q1C42=2 and N3CD5Q1C43=2 then x_stisym6=0;
				*Criterion 7: (35, 36);
				if N3CD5Q1C35=1 or N3CD5Q1C36=1 then x_stisym7=1;
				else if N3CD5Q1C35=2 and N3CD5Q1C36=2 then x_stisym7=0;
				*Criterion 8: 47, 48;
				if N3CD5Q1C47=1 or N3CD5Q1C48=1 then x_stisym8=1;
				else if N3CD5Q1C47=2 and N3CD5Q1C48=2 then x_stisym8=0;
				*Criterion 9: (37, 38);
				if N3CD5Q1C37=1 or N3CD5Q1C38=1 then x_stisym9=1;
				else if N3CD5Q1C37=2 and N3CD5Q1C38=2 then x_stisym9=0;
				*Criterion 10: 1, 2;
				if N3CD5Q1C1=1 or N3CD5Q1C2=1 then x_stisym10=1;
				else if N3CD5Q1C1=2 and N3CD5Q1C2=2 then x_stisym10=0;
				*Criterion 11 (withdrawal criterion);
				* Item A;
				if N3CD5Q1C5=1 then x_stiwith0=1;
				else if N3CD5Q1C5=2 then x_stiwith0=0;
				if N3CD5Q1C4=1 then x_stiwith1=1;
				else if N3CD5Q1C4=2 then x_stiwith1=0;
				if N3CD5Q1C17=1 then x_stiwith2=1;
				else if N3CD5Q1C17=2 then x_stiwith2=0;
				if N3CD5Q1C3=1 or N3CD5Q1C20=1 then x_stiwith3=1;
				else if N3CD5Q1C3=2 and N3CD5Q1C20=2 then x_stiwith3=0;
				if N3CD5Q1C10=1 then x_stiwith4=1;
				else if N3CD5Q1C10=2 then x_stiwith4=0;
				if N3CD5Q1C14=1 or N3CD5Q1C15=1 then x_stiwith5=1;
				else if N3CD5Q1C14=2 and N3CD5Q1C15=2 then x_stiwith5=0;
				*Item B (29);
				if N3CD5Q1C29=1 then x_stisym11b=1;
				else if N3CD5Q1C29=2 then x_stisym11b=0;
				*Criterion 11 (withdrawal criterion) - Final;
				%sumMiss (x_sumstiwith, x_stiwith1 x_stiwith2 x_stiwith3 x_stiwith4 x_stiwith5);
				%diag (x_stiwith11a, x_sumstiwith, 2);

				if x_sumstiwith>=2 and x_stiwith0=1 then x_stisym11a=1;
				else if . < x_sumstiwith <2 or x_stiwith0=0 then x_stisym11a=0;

				if x_stisym11a=1 or x_stisym11b=1 then x_stisym11=1;
				else if x_stisym11a=0 and x_stisym11b=0 then x_stisym11=0;
				*****************;
				*PPY CRITERIA;
				*****************;
				*Criterion 1: 32;
				if N3CD5Q1E32=1 then x_pstisym1=1;
				else if N3CQ1A32=2 or N3CQ1B32=2 then x_pstisym1=0;
				else if N3CD5Q1E32=2 then x_pstisym1=0;
				*Criterion 2: (30, 31);
				if N3CD5Q1E30=1 or N3CD5Q1E31=1 then x_pstisym2=1;
				else if N3CD5Q1E30=2 and N3CD5Q1E31=2 then x_pstisym2=0;
				*Criterion 3: (33, 34);
				if N3CD5Q1E33=1 or N3CD5Q1E34=1 then x_pstisym3=1;
				else if N3CD5Q1E33=2 and N3CD5Q1E34=2 then x_pstisym3=0;		
				*Criterion OLD 4 (LEGAL);
				if N3CQ12D5=1 then x_pstisym4legal=1;
				else if N3CQ12D5=2 or N3CQ12C=2 then x_pstisym4legal=0; *hierarchical question - if said no to parent or child question then no;
				*Criterion 4: CRAVING (39, 40);
				if N3CD5Q1E39=1 or N3CD5Q1E40=1 then x_pstisym4=1;
				else if N3CD5Q1E39=2 and N3CD5Q1E40=2 then x_pstisym4=0;
				*Criterion 5: 44-46;
				if N3CD5Q1E44=1 or N3CD5Q1E45=1 or N3CD5Q1E46=1 then x_pstisym5=1;
				else if N3CD5Q1E44=2 and N3CD5Q1E45=2 and N3CD5Q1E46=2 then x_pstisym5=0;
				*Criterion 6:41-43;
				if N3CD5Q1E41=1 or N3CD5Q1E42=1 or N3CD5Q1E43=1 then x_pstisym6=1;
				else if N3CD5Q1E41=2 and N3CD5Q1E42=2 and N3CD5Q1E43=2 then x_pstisym6=0;
				*Criterion 7: (35, 36);
				if N3CD5Q1E35=1 or N3CD5Q1E36=1 then x_pstisym7=1;
				else if N3CD5Q1E35=2 and N3CD5Q1E36=2 then x_pstisym7=0;
				*Criterion 8: 47, 48;
				if N3CD5Q1E47=1 or N3CD5Q1E48=1 then x_pstisym8=1;
				else if N3CD5Q1E47=2 and N3CD5Q1E48=2 then x_pstisym8=0;
				*Criterion 9: (37, 38);
				if N3CD5Q1E37=1 or N3CD5Q1E38=1 then x_pstisym9=1;
				else if N3CD5Q1E37=2 and N3CD5Q1E38=2 then x_pstisym9=0;
				*Criterion 10: 1, 2;
				if N3CD5Q1E1=1 or N3CD5Q1E2=1 then x_pstisym10=1;
				else if N3CD5Q1E1=2 and N3CD5Q1E2=2 then x_pstisym10=0;
				*Criterion 11 (withdrawal criterion);
				* Item A;
				if N3CD5Q1E5=1 then x_pstiwith0=1;
				else if N3CD5Q1E5=2 then x_pstiwith0=0;
				if N3CD5Q1E4=1 then x_pstiwith1=1;
				else if N3CD5Q1E4=2 then x_pstiwith1=0;
				if N3CD5Q1E17=1 then x_pstiwith2=1;
				else if N3CD5Q1E17=2 then x_pstiwith2=0;
				if N3CD5Q1E3=1 or N3CD5Q1E20=1 then x_pstiwith3=1;
				else if N3CD5Q1E3=2 and N3CD5Q1E20=2 then x_pstiwith3=0;
				if N3CD5Q1E10=1 then x_pstiwith4=1;
				else if N3CD5Q1E10=2 then x_pstiwith4=0;
				if N3CD5Q1E14=1 or N3CD5Q1E15=1 then x_pstiwith5=1;
				else if N3CD5Q1E14=2 and N3CD5Q1E15=2 then x_pstiwith5=0;
				*Item B (29);
				if N3CD5Q1E29=1 then x_pstisym11b=1;
				else if N3CD5Q1E29=2 then x_pstisym11b=0;
				*Criterion 11 (withdrawal criterion) - Final;
				%sumMiss (x_psumstiwith, x_pstiwith1 x_pstiwith2 x_pstiwith3 x_pstiwith4 x_pstiwith5);
				%diag (x_pstiwith11a, x_psumstiwith, 2);

				if x_psumstiwith>=2 and x_pstiwith0=1 then x_pstisym11a=1;
				else if . < x_psumstiwith <2 or x_pstiwith0=0 then x_pstisym11a=0;

				if x_pstisym11a=1 or x_pstisym11b=1 then x_pstisym11=1;
				else if x_pstisym11a=0 and x_pstisym11b=0 then x_pstisym11=0;
			end; 
		end;
	end;

	****************************************;
	*	STIMULANTS FINAL VARS			;
	****************************************;

	********************;
	*DSM-IV ABUSE;
	********************;
	%sumMiss (x_sumstiab4, 		x_stisym5 x_stisym8 x_stisym4legal x_stisym6);
	%sumMiss (x_psumstiab4, 	x_pstisym5 x_pstisym8 x_pstisym4legal x_pstisym6);

	%diag (x_stiabuse4, 		x_sumstiab4, 	1);
	%diag (x_pstiabuse4, 	x_psumstiab4, 1);
	
	if x_stiabuse4=1 or x_pstiabuse4=1 then x_lstiabuse4=1;
	else if x_stiabuse4=0 and x_pstiabuse4=0 then x_lstiabuse4=0;

	********************;
	*DSM-IV DEP	;
	********************;
	%sumMiss (x_sumstidep4, 		x_stisym10 x_stisym11 x_stisym1 x_stisym2 x_stisym3 x_stisym7 x_stisym9);
	%sumMiss (x_psumstidep4, 		x_pstisym10 x_pstisym11 x_pstisym1 x_pstisym2 x_pstisym3 x_pstisym7 x_pstisym9);

	%diag (x_stidep4, 	x_sumstidep4, 		3);

	*PPY has additional requirement for diagnosis;
	if x_psumstidep4 >=3 then do;
		if N3CD5Q2A=1 then x_pstidep4=1; *expericences happened around same time (pg 11);
		else if N3CD5Q2A = 2 then x_pstidep4=0; *experiences did not happen around same time;
		else if N3CD5Q2A = 9 then x_pstidep4=.;
	end;
	else if . < x_psumstidep4 <3 then x_pstidep4=0;

	if x_stidep4=1 or x_pstidep4=1 then x_lstidep4=1;
	else if x_stidep4=0 and x_pstidep4=0 then x_lstidep4=0;

	********************;
	*DSM-5				;
	********************;
	%sumMiss (x_sumstiud5, 		x_stisym1 x_stisym2 x_stisym3 x_stisym4 x_stisym5 x_stisym6 x_stisym7 x_stisym8 x_stisym9 x_stisym10 x_stisym11);
	%sumMiss (x_psumstiud5, 		x_pstisym1 x_pstisym2 x_pstisym3 x_pstisym4 x_pstisym5 x_pstisym6 x_pstisym7 x_pstisym8 x_pstisym9 x_pstisym10 x_pstisym11);

	%diag (x_stiud5, 		x_sumstiud5, 	2);

	if x_psumstiud5 >=2 then do;
		if N3CD5Q2A=1 then x_pstiud5=1;
		else if N3CD5Q2A = 2 then x_pstiud5=0; 
		else if N3CD5Q2A = 9 then x_pstiud5=.;
	end;
	else if . < x_psumstiud5 <2 then x_pstiud5=0;

	if x_stiud5=1 or x_pstiud5=1 then x_lstiud5=1;
	else if x_stiud5=0 and x_pstiud5=0 then x_lstiud5=0;

	if x_sumstiud5 in (0 1) then x_stiud5sev=0;
	else if x_sumstiud5 in (2 3) then x_stiud5sev=1;
	else if x_sumstiud5 in (4 5) then x_stiud5sev=2;
	else if x_sumstiud5 >= 6 then x_stiud5sev=3;

	if x_psumstiud5 in (0 1) then x_pstiud5sev=0;
	else if x_psumstiud5>1 and N3CD5Q2A=1 then do;
		if x_psumstiud5 in (2 3) then x_pstiud5sev=1;
		else if x_psumstiud5 in (4 5) then x_pstiud5sev=2;
		else if x_psumstiud5 >= 6 then x_pstiud5sev=3;
	end;
	else if x_psumstiud5>1 and N3CD5Q2A=2 then x_pstiud5sev=0;

*************************************************************************************************************************************************;
* CLUB DRUGS																																										;		
*************************************************************************************************************************************************;

	****************************************;
	*	CLUB DRUGS CRITERIA				;
	****************************************;
	if N3BQ1A6 = 2 then do; *NEVER;
		*PY = No;
		%SymNo(x_clbsym1);%SymNo(x_clbsym2);%SymNo(x_clbsym3);%SymNo(x_clbsym4);%SymNo(x_clbsym5);%SymNo(x_clbsym6);
		%SymNo(x_clbsym7);%SymNo(x_clbsym8);%SymNo(x_clbsym9);%SymNo(x_clbsym10);
		%SymNo(x_clbsym4legal);
		*PPY = No;
		%SymNo(x_pclbsym1);%SymNo(x_pclbsym2);%SymNo(x_pclbsym3);%SymNo(x_pclbsym4);%SymNo(x_pclbsym5);%SymNo(x_pclbsym6);
		%SymNo(x_pclbsym7);%SymNo(x_pclbsym8);%SymNo(x_pclbsym9);%SymNo(x_pclbsym10);
		%SymNo(x_pclbsym4legal);
	end;
	else if N3BQ1A6 in (1 9) then do; *EVER OR UKNOWN;
		if NDRUGUSER=2 then do; *NEVER;
			*PY = No;
			%SymNo(x_clbsym1);%SymNo(x_clbsym2);%SymNo(x_clbsym3);%SymNo(x_clbsym4);%SymNo(x_clbsym5);%SymNo(x_clbsym6);
			%SymNo(x_clbsym7);%SymNo(x_clbsym8);%SymNo(x_clbsym9);%SymNo(x_clbsym10);
			%SymNo(x_clbsym4legal);
			*PPY = No;
			%SymNo(x_pclbsym1);%SymNo(x_pclbsym2);%SymNo(x_pclbsym3);%SymNo(x_pclbsym4);%SymNo(x_pclbsym5);%SymNo(x_pclbsym6);
			%SymNo(x_pclbsym7);%SymNo(x_pclbsym8);%SymNo(x_pclbsym9);%SymNo(x_pclbsym10);
			%SymNo(x_pclbsym4legal);
		end;
		else do; *TIMING;
			if N3BD6Q2B = 1 then do; *PY ONLY;
				*****************;
				*PY CRITERIA;
				*****************;
				*Criterion 1: 32;
				if N3CD6Q1C32=1 then x_clbsym1=1;
				else if N3CQ1A32=2 or N3CQ1B32=2 then x_clbsym1=0;
				else if N3CD6Q1C32=2 then x_clbsym1=0;
				*Criterion 2: (30, 31);
				if N3CD6Q1C30=1 or N3CD6Q1C31=1 then x_clbsym2=1;
				else if N3CD6Q1C30=2 and N3CD6Q1C31=2 then x_clbsym2=0;
				*Criterion 3: (33, 34);
				if N3CD6Q1C33=1 or N3CD6Q1C34=1 then x_clbsym3=1;
				else if N3CD6Q1C33=2 and N3CD6Q1C34=2 then x_clbsym3=0;		
				*Criterion OLD 4 (LEGAL);
				if N3CQ12B6=1 then x_clbsym4legal=1;
				else if N3CQ12B6=2 or N3CQ12A=2 then x_clbsym4legal=0; *hierarchical question - if said no to parent or child question then no;
				*Criterion 4: CRAVING (39, 40);
				if N3CD6Q1C39=1 or N3CD6Q1C40=1 then x_clbsym4=1;
				else if N3CD6Q1C39=2 and N3CD6Q1C40=2 then x_clbsym4=0;
				*Criterion 5: 44-46;
				if N3CD6Q1C44=1 or N3CD6Q1C45=1 or N3CD6Q1C46=1 then x_clbsym5=1;
				else if N3CD6Q1C44=2 and N3CD6Q1C45=2 and N3CD6Q1C46=2 then x_clbsym5=0;
				*Criterion 6:41-43;
				if N3CD6Q1C41=1 or N3CD6Q1C42=1 or N3CD6Q1C43=1 then x_clbsym6=1;
				else if N3CD6Q1C41=2 and N3CD6Q1C42=2 and N3CD6Q1C43=2 then x_clbsym6=0;
				*Criterion 7: (35, 36);
				if N3CD6Q1C35=1 or N3CD6Q1C36=1 then x_clbsym7=1;
				else if N3CD6Q1C35=2 and N3CD6Q1C36=2 then x_clbsym7=0;
				*Criterion 8: 47, 48;
				if N3CD6Q1C47=1 or N3CD6Q1C48=1 then x_clbsym8=1;
				else if N3CD6Q1C47=2 and N3CD6Q1C48=2 then x_clbsym8=0;
				*Criterion 9: (37, 38);
				if N3CD6Q1C37=1 or N3CD6Q1C38=1 then x_clbsym9=1;
				else if N3CD6Q1C37=2 and N3CD6Q1C38=2 then x_clbsym9=0;
				*Criterion 10: 1, 2;
				if N3CD6Q1C1=1 or N3CD6Q1C2=1 then x_clbsym10=1;
				else if N3CD6Q1C1=2 and N3CD6Q1C2=2 then x_clbsym10=0;
				*PPY = No;
				%SymNo(x_pclbsym1);%SymNo(x_pclbsym2);%SymNo(x_pclbsym3);%SymNo(x_pclbsym4);%SymNo(x_pclbsym5);%SymNo(x_pclbsym6);
				%SymNo(x_pclbsym7);%SymNo(x_pclbsym8);%SymNo(x_pclbsym9);%SymNo(x_pclbsym10);
				%SymNo(x_pclbsym4legal);
			end; *PY ONLY;
			else if N3BD6Q2B = 2 then do; *PPY ONLY;
				*****************;
				*PPY CRITERIA;
				*****************;
				*Criterion 1: 32;
				if N3CD6Q1E32=1 then x_pclbsym1=1;
				else if N3CQ1A32=2 or N3CQ1B32=2 then x_pclbsym1=0;
				else if N3CD6Q1E32=2 then x_pclbsym1=0;
				*Criterion 2: (30, 31);
				if N3CD6Q1E30=1 or N3CD6Q1E31=1 then x_pclbsym2=1;
				else if N3CD6Q1E30=2 and N3CD6Q1E31=2 then x_pclbsym2=0;
				*Criterion 3: (33, 34);
				if N3CD6Q1E33=1 or N3CD6Q1E34=1 then x_pclbsym3=1;
				else if N3CD6Q1E33=2 and N3CD6Q1E34=2 then x_pclbsym3=0;		
				*Criterion OLD 4 (LEGAL);
				if N3CQ12D6=1 then x_pclbsym4legal=1;
				else if N3CQ12D6=2 or N3CQ12C=2 then x_pclbsym4legal=0; *hierarchical question - if said no to parent or child question then no;
				*Criterion 4: CRAVING (39, 40);
				if N3CD6Q1E39=1 or N3CD6Q1E40=1 then x_pclbsym4=1;
				else if N3CD6Q1E39=2 and N3CD6Q1E40=2 then x_pclbsym4=0;
				*Criterion 5: 44-46;
				if N3CD6Q1E44=1 or N3CD6Q1E45=1 or N3CD6Q1E46=1 then x_pclbsym5=1;
				else if N3CD6Q1E44=2 and N3CD6Q1E45=2 and N3CD6Q1E46=2 then x_pclbsym5=0;
				*Criterion 6:41-43;
				if N3CD6Q1E41=1 or N3CD6Q1E42=1 or N3CD6Q1E43=1 then x_pclbsym6=1;
				else if N3CD6Q1E41=2 and N3CD6Q1E42=2 and N3CD6Q1E43=2 then x_pclbsym6=0;
				*Criterion 7: (35, 36);
				if N3CD6Q1E35=1 or N3CD6Q1E36=1 then x_pclbsym7=1;
				else if N3CD6Q1E35=2 and N3CD6Q1E36=2 then x_pclbsym7=0;
				*Criterion 8: 47, 48;
				if N3CD6Q1E47=1 or N3CD6Q1E48=1 then x_pclbsym8=1;
				else if N3CD6Q1E47=2 and N3CD6Q1E48=2 then x_pclbsym8=0;
				*Criterion 9: (37, 38);
				if N3CD6Q1E37=1 or N3CD6Q1E38=1 then x_pclbsym9=1;
				else if N3CD6Q1E37=2 and N3CD6Q1E38=2 then x_pclbsym9=0;
				*Criterion 10: 1, 2;
				if N3CD6Q1E1=1 or N3CD6Q1E2=1 then x_pclbsym10=1;
				else if N3CD6Q1E1=2 and N3CD6Q1E2=2 then x_pclbsym10=0;
				*PY = No;
				%SymNo(x_clbsym1);%SymNo(x_clbsym2);%SymNo(x_clbsym3);%SymNo(x_clbsym4);%SymNo(x_clbsym5);%SymNo(x_clbsym6);
				%SymNo(x_clbsym7);%SymNo(x_clbsym8);%SymNo(x_clbsym9);%SymNo(x_clbsym10);
				%SymNo(x_clbsym4legal);
			end; *PPY ONLY;
			else if N3BD6Q2B in (3 9 .) then do; *PY + PPY or UNKNOWN;
				*****************;
				*PY CRITERIA;
				*****************;
				*Criterion 1: 32;
				if N3CD6Q1C32=1 then x_clbsym1=1;
				else if N3CQ1A32=2 or N3CQ1B32=2 then x_clbsym1=0;
				else if N3CD6Q1C32=2 then x_clbsym1=0;
				*Criterion 2: (30, 31);
				if N3CD6Q1C30=1 or N3CD6Q1C31=1 then x_clbsym2=1;
				else if N3CD6Q1C30=2 and N3CD6Q1C31=2 then x_clbsym2=0;
				*Criterion 3: (33, 34);
				if N3CD6Q1C33=1 or N3CD6Q1C34=1 then x_clbsym3=1;
				else if N3CD6Q1C33=2 and N3CD6Q1C34=2 then x_clbsym3=0;		
				*Criterion OLD 4 (LEGAL);
				if N3CQ12B6=1 then x_clbsym4legal=1;
				else if N3CQ12B6=2 or N3CQ12A=2 then x_clbsym4legal=0; *hierarchical question - if said no to parent or child question then no;
				*Criterion 4: CRAVING (39, 40);
				if N3CD6Q1C39=1 or N3CD6Q1C40=1 then x_clbsym4=1;
				else if N3CD6Q1C39=2 and N3CD6Q1C40=2 then x_clbsym4=0;
				*Criterion 5: 44-46;
				if N3CD6Q1C44=1 or N3CD6Q1C45=1 or N3CD6Q1C46=1 then x_clbsym5=1;
				else if N3CD6Q1C44=2 and N3CD6Q1C45=2 and N3CD6Q1C46=2 then x_clbsym5=0;
				*Criterion 6:41-43;
				if N3CD6Q1C41=1 or N3CD6Q1C42=1 or N3CD6Q1C43=1 then x_clbsym6=1;
				else if N3CD6Q1C41=2 and N3CD6Q1C42=2 and N3CD6Q1C43=2 then x_clbsym6=0;
				*Criterion 7: (35, 36);
				if N3CD6Q1C35=1 or N3CD6Q1C36=1 then x_clbsym7=1;
				else if N3CD6Q1C35=2 and N3CD6Q1C36=2 then x_clbsym7=0;
				*Criterion 8: 47, 48;
				if N3CD6Q1C47=1 or N3CD6Q1C48=1 then x_clbsym8=1;
				else if N3CD6Q1C47=2 and N3CD6Q1C48=2 then x_clbsym8=0;
				*Criterion 9: (37, 38);
				if N3CD6Q1C37=1 or N3CD6Q1C38=1 then x_clbsym9=1;
				else if N3CD6Q1C37=2 and N3CD6Q1C38=2 then x_clbsym9=0;
				*Criterion 10: 1, 2;
				if N3CD6Q1C1=1 or N3CD6Q1C2=1 then x_clbsym10=1;
				else if N3CD6Q1C1=2 and N3CD6Q1C2=2 then x_clbsym10=0;
				*****************;
				*PPY CRITERIA;
				*****************;
				*Criterion 1: 32;
				if N3CD6Q1E32=1 then x_pclbsym1=1;
				else if N3CQ1A32=2 or N3CQ1B32=2 then x_pclbsym1=0;
				else if N3CD6Q1E32=2 then x_pclbsym1=0;
				*Criterion 2: (30, 31);
				if N3CD6Q1E30=1 or N3CD6Q1E31=1 then x_pclbsym2=1;
				else if N3CD6Q1E30=2 and N3CD6Q1E31=2 then x_pclbsym2=0;
				*Criterion 3: (33, 34);
				if N3CD6Q1E33=1 or N3CD6Q1E34=1 then x_pclbsym3=1;
				else if N3CD6Q1E33=2 and N3CD6Q1E34=2 then x_pclbsym3=0;		
				*Criterion OLD 4 (LEGAL);
				if N3CQ12D6=1 then x_pclbsym4legal=1;
				else if N3CQ12D6=2 or N3CQ12C=2 then x_pclbsym4legal=0; *hierarchical question - if said no to parent or child question then no;
				*Criterion 4: CRAVING (39, 40);
				if N3CD6Q1E39=1 or N3CD6Q1E40=1 then x_pclbsym4=1;
				else if N3CD6Q1E39=2 and N3CD6Q1E40=2 then x_pclbsym4=0;
				*Criterion 5: 44-46;
				if N3CD6Q1E44=1 or N3CD6Q1E45=1 or N3CD6Q1E46=1 then x_pclbsym5=1;
				else if N3CD6Q1E44=2 and N3CD6Q1E45=2 and N3CD6Q1E46=2 then x_pclbsym5=0;
				*Criterion 6:41-43;
				if N3CD6Q1E41=1 or N3CD6Q1E42=1 or N3CD6Q1E43=1 then x_pclbsym6=1;
				else if N3CD6Q1E41=2 and N3CD6Q1E42=2 and N3CD6Q1E43=2 then x_pclbsym6=0;
				*Criterion 7: (35, 36);
				if N3CD6Q1E35=1 or N3CD6Q1E36=1 then x_pclbsym7=1;
				else if N3CD6Q1E35=2 and N3CD6Q1E36=2 then x_pclbsym7=0;
				*Criterion 8: 47, 48;
				if N3CD6Q1E47=1 or N3CD6Q1E48=1 then x_pclbsym8=1;
				else if N3CD6Q1E47=2 and N3CD6Q1E48=2 then x_pclbsym8=0;
				*Criterion 9: (37, 38);
				if N3CD6Q1E37=1 or N3CD6Q1E38=1 then x_pclbsym9=1;
				else if N3CD6Q1E37=2 and N3CD6Q1E38=2 then x_pclbsym9=0;
				*Criterion 10: 1, 2;
				if N3CD6Q1E1=1 or N3CD6Q1E2=1 then x_pclbsym10=1;
				else if N3CD6Q1E1=2 and N3CD6Q1E2=2 then x_pclbsym10=0;
			end; 
		end;
	end;

	****************************************;
	*	CLUB DRUGS FINAL VARS			;
	****************************************;

	********************;
	*DSM-IV ABUSE;
	********************;
	%sumMiss (x_sumclbab4, 		x_clbsym5 x_clbsym8 x_clbsym4legal x_clbsym6);
	%sumMiss (x_psumclbab4, 	x_pclbsym5 x_pclbsym8 x_pclbsym4legal x_pclbsym6);

	%diag (x_clbabuse4, 		x_sumclbab4, 	1);
	%diag (x_pclbabuse4, 		x_psumclbab4, 1);
	
	if x_clbabuse4=1 or x_pclbabuse4=1 then x_lclbabuse4=1;
	else if x_clbabuse4=0 and x_pclbabuse4=0 then x_lclbabuse4=0;

	********************;
	*DSM-IV DEP	;
	********************;
	%sumMiss (x_sumclbdep4, 		x_clbsym10 x_clbsym1 x_clbsym2 x_clbsym3 x_clbsym7 x_clbsym9);
	%sumMiss (x_psumclbdep4, 		x_pclbsym10 x_pclbsym1 x_pclbsym2 x_pclbsym3 x_pclbsym7 x_pclbsym9);

	%diag (x_clbdep4, 	x_sumclbdep4, 		3);

	*PPY has additional requirement for diagnosis;
	if x_psumclbdep4 >=3 then do;
		if N3CD6Q2A=1 then x_pclbdep4=1; *expericences happened around same time (pg 11);
		else if N3CD6Q2A = 2 then x_pclbdep4=0; *experiences did not happen around same time;
		else if N3CD6Q2A = 9 then x_pclbdep4=.;
	end;
	else if . < x_psumclbdep4 <3 then x_pclbdep4=0;

	if x_clbdep4=1 or x_pclbdep4=1 then x_lclbdep4=1;
	else if x_clbdep4=0 and x_pclbdep4=0 then x_lclbdep4=0;

	********************;
	*DSM-5				;
	********************;
	%sumMiss (x_sumclbud5, 		x_clbsym1 x_clbsym2 x_clbsym3 x_clbsym4 x_clbsym5 x_clbsym6 x_clbsym7 x_clbsym8 x_clbsym9 x_clbsym10);
	%sumMiss (x_psumclbud5, 		x_pclbsym1 x_pclbsym2 x_pclbsym3 x_pclbsym4 x_pclbsym5 x_pclbsym6 x_pclbsym7 x_pclbsym8 x_pclbsym9 x_pclbsym10);

	%diag (x_clbud5, 		x_sumclbud5, 	2);

	if x_psumclbud5 >=2 then do;
		if N3CD6Q2A=1 then x_pclbud5=1;
		else if N3CD6Q2A = 2 then x_pclbud5=0; 
		else if N3CD6Q2A = 9 then x_pclbud5=.;
	end;
	else if . < x_psumclbud5 <2 then x_pclbud5=0;

	if x_clbud5=1 or x_pclbud5=1 then x_lclbud5=1;
	else if x_clbud5=0 and x_pclbud5=0 then x_lclbud5=0;

	if x_sumclbud5 in (0 1) then x_clbud5sev=0;
	else if x_sumclbud5 in (2 3) then x_clbud5sev=1;
	else if x_sumclbud5 in (4 5) then x_clbud5sev=2;
	else if x_sumclbud5 >= 6 then x_clbud5sev=3;

	if x_psumclbud5 in (0 1) then x_pclbud5sev=0;
	else if x_psumclbud5>1 and N3CD6Q2A=1 then do;
		if x_psumclbud5 in (2 3) then x_pclbud5sev=1;
		else if x_psumclbud5 in (4 5) then x_pclbud5sev=2;
		else if x_psumclbud5 >= 6 then x_pclbud5sev=3;
	end;
	else if x_psumclbud5>1 and N3CD6Q2A=2 then x_pclbud5sev=0;

*************************************************************************************************************************************************;
* HALLUCINOGEN																																							;		
*************************************************************************************************************************************************;

	****************************************;
	*	HALLUCINOGEN CRITERIA				;
	****************************************;
	if N3BQ1A7 = 2 then do; *NEVER;
		*PY = No;
		%SymNo(x_halsym1);%SymNo(x_halsym2);%SymNo(x_halsym3);%SymNo(x_halsym4);%SymNo(x_halsym5);%SymNo(x_halsym6);
		%SymNo(x_halsym7);%SymNo(x_halsym8);%SymNo(x_halsym9);%SymNo(x_halsym10);
		%SymNo(x_halsym4legal);
		*PPY = No;
		%SymNo(x_phalsym1);%SymNo(x_phalsym2);%SymNo(x_phalsym3);%SymNo(x_phalsym4);%SymNo(x_phalsym5);%SymNo(x_phalsym6);
		%SymNo(x_phalsym7);%SymNo(x_phalsym8);%SymNo(x_phalsym9);%SymNo(x_phalsym10);
		%SymNo(x_phalsym4legal);
	end;
	else if N3BQ1A7 in (1 9) then do; *EVER OR UKNOWN;
		if NDRUGUSER=2 then do; *NEVER;
			*PY = No;
			%SymNo(x_halsym1);%SymNo(x_halsym2);%SymNo(x_halsym3);%SymNo(x_halsym4);%SymNo(x_halsym5);%SymNo(x_halsym6);
			%SymNo(x_halsym7);%SymNo(x_halsym8);%SymNo(x_halsym9);%SymNo(x_halsym10);
			%SymNo(x_halsym4legal);
			*PPY = No;
			%SymNo(x_phalsym1);%SymNo(x_phalsym2);%SymNo(x_phalsym3);%SymNo(x_phalsym4);%SymNo(x_phalsym5);%SymNo(x_phalsym6);
			%SymNo(x_phalsym7);%SymNo(x_phalsym8);%SymNo(x_phalsym9);%SymNo(x_phalsym10);
			%SymNo(x_phalsym4legal);
		end;
		else do; *TIMING;
			if N3BD7Q2B = 1 then do; *PY ONLY;
				*****************;
				*PY CRITERIA;
				*****************;
				*Criterion 1: 32;
				if N3CD7Q1C32=1 then x_halsym1=1;
				else if N3CQ1A32=2 or N3CQ1B32=2 then x_halsym1=0;
				else if N3CD7Q1C32=2 then x_halsym1=0;
				*Criterion 2: (30, 31);
				if N3CD7Q1C30=1 or N3CD7Q1C31=1 then x_halsym2=1;
				else if N3CD7Q1C30=2 and N3CD7Q1C31=2 then x_halsym2=0;
				*Criterion 3: (33, 34);
				if N3CD7Q1C33=1 or N3CD7Q1C34=1 then x_halsym3=1;
				else if N3CD7Q1C33=2 and N3CD7Q1C34=2 then x_halsym3=0;		
				*Criterion OLD 4 (LEGAL);
				if N3CQ12B7=1 then x_halsym4legal=1;
				else if N3CQ12B7=2 or N3CQ12A=2 then x_halsym4legal=0; *hierarchical question - if said no to parent or child question then no;
				*Criterion 4: CRAVING (39, 40);
				if N3CD7Q1C39=1 or N3CD7Q1C40=1 then x_halsym4=1;
				else if N3CD7Q1C39=2 and N3CD7Q1C40=2 then x_halsym4=0;
				*Criterion 5: 44-46;
				if N3CD7Q1C44=1 or N3CD7Q1C45=1 or N3CD7Q1C46=1 then x_halsym5=1;
				else if N3CD7Q1C44=2 and N3CD7Q1C45=2 and N3CD7Q1C46=2 then x_halsym5=0;
				*Criterion 6:41-43;
				if N3CD7Q1C41=1 or N3CD7Q1C42=1 or N3CD7Q1C43=1 then x_halsym6=1;
				else if N3CD7Q1C41=2 and N3CD7Q1C42=2 and N3CD7Q1C43=2 then x_halsym6=0;
				*Criterion 7: (35, 36);
				if N3CD7Q1C35=1 or N3CD7Q1C36=1 then x_halsym7=1;
				else if N3CD7Q1C35=2 and N3CD7Q1C36=2 then x_halsym7=0;
				*Criterion 8: 47, 48;
				if N3CD7Q1C47=1 or N3CD7Q1C48=1 then x_halsym8=1;
				else if N3CD7Q1C47=2 and N3CD7Q1C48=2 then x_halsym8=0;
				*Criterion 9: (37, 38);
				if N3CD7Q1C37=1 or N3CD7Q1C38=1 then x_halsym9=1;
				else if N3CD7Q1C37=2 and N3CD7Q1C38=2 then x_halsym9=0;
				*Criterion 10: 1, 2;
				if N3CD7Q1C1=1 or N3CD7Q1C2=1 then x_halsym10=1;
				else if N3CD7Q1C1=2 and N3CD7Q1C2=2 then x_halsym10=0;
				*PPY = No;
				%SymNo(x_phalsym1);%SymNo(x_phalsym2);%SymNo(x_phalsym3);%SymNo(x_phalsym4);%SymNo(x_phalsym5);%SymNo(x_phalsym6);
				%SymNo(x_phalsym7);%SymNo(x_phalsym8);%SymNo(x_phalsym9);%SymNo(x_phalsym10);
				%SymNo(x_phalsym4legal);
			end; *PY ONLY;
			else if N3BD7Q2B = 2 then do; *PPY ONLY;
				*****************;
				*PPY CRITERIA;
				*****************;
				*Criterion 1: 32;
				if N3CD7Q1E32=1 then x_phalsym1=1;
				else if N3CQ1A32=2 or N3CQ1B32=2 then x_phalsym1=0;
				else if N3CD7Q1E32=2 then x_phalsym1=0;
				*Criterion 2: (30, 31);
				if N3CD7Q1E30=1 or N3CD7Q1E31=1 then x_phalsym2=1;
				else if N3CD7Q1E30=2 and N3CD7Q1E31=2 then x_phalsym2=0;
				*Criterion 3: (33, 34);
				if N3CD7Q1E33=1 or N3CD7Q1E34=1 then x_phalsym3=1;
				else if N3CD7Q1E33=2 and N3CD7Q1E34=2 then x_phalsym3=0;		
				*Criterion OLD 4 (LEGAL);
				if N3CQ12D7=1 then x_phalsym4legal=1;
				else if N3CQ12D7=2 or N3CQ12C=2 then x_phalsym4legal=0; *hierarchical question - if said no to parent or child question then no;
				*Criterion 4: CRAVING (39, 40);
				if N3CD7Q1E39=1 or N3CD7Q1E40=1 then x_phalsym4=1;
				else if N3CD7Q1E39=2 and N3CD7Q1E40=2 then x_phalsym4=0;
				*Criterion 5: 44-46;
				if N3CD7Q1E44=1 or N3CD7Q1E45=1 or N3CD7Q1E46=1 then x_phalsym5=1;
				else if N3CD7Q1E44=2 and N3CD7Q1E45=2 and N3CD7Q1E46=2 then x_phalsym5=0;
				*Criterion 6:41-43;
				if N3CD7Q1E41=1 or N3CD7Q1E42=1 or N3CD7Q1E43=1 then x_phalsym6=1;
				else if N3CD7Q1E41=2 and N3CD7Q1E42=2 and N3CD7Q1E43=2 then x_phalsym6=0;
				*Criterion 7: (35, 36);
				if N3CD7Q1E35=1 or N3CD7Q1E36=1 then x_phalsym7=1;
				else if N3CD7Q1E35=2 and N3CD7Q1E36=2 then x_phalsym7=0;
				*Criterion 8: 47, 48;
				if N3CD7Q1E47=1 or N3CD7Q1E48=1 then x_phalsym8=1;
				else if N3CD7Q1E47=2 and N3CD7Q1E48=2 then x_phalsym8=0;
				*Criterion 9: (37, 38);
				if N3CD7Q1E37=1 or N3CD7Q1E38=1 then x_phalsym9=1;
				else if N3CD7Q1E37=2 and N3CD7Q1E38=2 then x_phalsym9=0;
				*Criterion 10: 1, 2;
				if N3CD7Q1E1=1 or N3CD7Q1E2=1 then x_phalsym10=1;
				else if N3CD7Q1E1=2 and N3CD7Q1E2=2 then x_phalsym10=0;
				*PY = No;
				%SymNo(x_halsym1);%SymNo(x_halsym2);%SymNo(x_halsym3);%SymNo(x_halsym4);%SymNo(x_halsym5);%SymNo(x_halsym6);
				%SymNo(x_halsym7);%SymNo(x_halsym8);%SymNo(x_halsym9);%SymNo(x_halsym10);
				%SymNo(x_halsym4legal);
			end; *PPY ONLY;
			else if N3BD7Q2B in (3 9 .) then do; *PY + PPY or UNKNOWN;
				*****************;
				*PY CRITERIA;
				*****************;
				*Criterion 1: 32;
				if N3CD7Q1C32=1 then x_halsym1=1;
				else if N3CQ1A32=2 or N3CQ1B32=2 then x_halsym1=0;
				else if N3CD7Q1C32=2 then x_halsym1=0;
				*Criterion 2: (30, 31);
				if N3CD7Q1C30=1 or N3CD7Q1C31=1 then x_halsym2=1;
				else if N3CD7Q1C30=2 and N3CD7Q1C31=2 then x_halsym2=0;
				*Criterion 3: (33, 34);
				if N3CD7Q1C33=1 or N3CD7Q1C34=1 then x_halsym3=1;
				else if N3CD7Q1C33=2 and N3CD7Q1C34=2 then x_halsym3=0;		
				*Criterion OLD 4 (LEGAL);
				if N3CQ12B7=1 then x_halsym4legal=1;
				else if N3CQ12B7=2 or N3CQ12A=2 then x_halsym4legal=0; *hierarchical question - if said no to parent or child question then no;
				*Criterion 4: CRAVING (39, 40);
				if N3CD7Q1C39=1 or N3CD7Q1C40=1 then x_halsym4=1;
				else if N3CD7Q1C39=2 and N3CD7Q1C40=2 then x_halsym4=0;
				*Criterion 5: 44-46;
				if N3CD7Q1C44=1 or N3CD7Q1C45=1 or N3CD7Q1C46=1 then x_halsym5=1;
				else if N3CD7Q1C44=2 and N3CD7Q1C45=2 and N3CD7Q1C46=2 then x_halsym5=0;
				*Criterion 6:41-43;
				if N3CD7Q1C41=1 or N3CD7Q1C42=1 or N3CD7Q1C43=1 then x_halsym6=1;
				else if N3CD7Q1C41=2 and N3CD7Q1C42=2 and N3CD7Q1C43=2 then x_halsym6=0;
				*Criterion 7: (35, 36);
				if N3CD7Q1C35=1 or N3CD7Q1C36=1 then x_halsym7=1;
				else if N3CD7Q1C35=2 and N3CD7Q1C36=2 then x_halsym7=0;
				*Criterion 8: 47, 48;
				if N3CD7Q1C47=1 or N3CD7Q1C48=1 then x_halsym8=1;
				else if N3CD7Q1C47=2 and N3CD7Q1C48=2 then x_halsym8=0;
				*Criterion 9: (37, 38);
				if N3CD7Q1C37=1 or N3CD7Q1C38=1 then x_halsym9=1;
				else if N3CD7Q1C37=2 and N3CD7Q1C38=2 then x_halsym9=0;
				*Criterion 10: 1, 2;
				if N3CD7Q1C1=1 or N3CD7Q1C2=1 then x_halsym10=1;
				else if N3CD7Q1C1=2 and N3CD7Q1C2=2 then x_halsym10=0;
				*****************;
				*PPY CRITERIA;
				*****************;
				*Criterion 1: 32;
				if N3CD7Q1E32=1 then x_phalsym1=1;
				else if N3CQ1A32=2 or N3CQ1B32=2 then x_phalsym1=0;
				else if N3CD7Q1E32=2 then x_phalsym1=0;
				*Criterion 2: (30, 31);
				if N3CD7Q1E30=1 or N3CD7Q1E31=1 then x_phalsym2=1;
				else if N3CD7Q1E30=2 and N3CD7Q1E31=2 then x_phalsym2=0;
				*Criterion 3: (33, 34);
				if N3CD7Q1E33=1 or N3CD7Q1E34=1 then x_phalsym3=1;
				else if N3CD7Q1E33=2 and N3CD7Q1E34=2 then x_phalsym3=0;		
				*Criterion OLD 4 (LEGAL);
				if N3CQ12D7=1 then x_phalsym4legal=1;
				else if N3CQ12D7=2 or N3CQ12C=2 then x_phalsym4legal=0; *hierarchical question - if said no to parent or child question then no;
				*Criterion 4: CRAVING (39, 40);
				if N3CD7Q1E39=1 or N3CD7Q1E40=1 then x_phalsym4=1;
				else if N3CD7Q1E39=2 and N3CD7Q1E40=2 then x_phalsym4=0;
				*Criterion 5: 44-46;
				if N3CD7Q1E44=1 or N3CD7Q1E45=1 or N3CD7Q1E46=1 then x_phalsym5=1;
				else if N3CD7Q1E44=2 and N3CD7Q1E45=2 and N3CD7Q1E46=2 then x_phalsym5=0;
				*Criterion 6:41-43;
				if N3CD7Q1E41=1 or N3CD7Q1E42=1 or N3CD7Q1E43=1 then x_phalsym6=1;
				else if N3CD7Q1E41=2 and N3CD7Q1E42=2 and N3CD7Q1E43=2 then x_phalsym6=0;
				*Criterion 7: (35, 36);
				if N3CD7Q1E35=1 or N3CD7Q1E36=1 then x_phalsym7=1;
				else if N3CD7Q1E35=2 and N3CD7Q1E36=2 then x_phalsym7=0;
				*Criterion 8: 47, 48;
				if N3CD7Q1E47=1 or N3CD7Q1E48=1 then x_phalsym8=1;
				else if N3CD7Q1E47=2 and N3CD7Q1E48=2 then x_phalsym8=0;
				*Criterion 9: (37, 38);
				if N3CD7Q1E37=1 or N3CD7Q1E38=1 then x_phalsym9=1;
				else if N3CD7Q1E37=2 and N3CD7Q1E38=2 then x_phalsym9=0;
				*Criterion 10: 1, 2;
				if N3CD7Q1E1=1 or N3CD7Q1E2=1 then x_phalsym10=1;
				else if N3CD7Q1E1=2 and N3CD7Q1E2=2 then x_phalsym10=0;
			end; 
		end;
	end;

	****************************************;
	*	HALLUCINOGEN FINAL VARS			;
	****************************************;

	********************;
	*DSM-IV ABUSE;
	********************;
	%sumMiss (x_sumhalab4, 		x_halsym5 x_halsym8 x_halsym4legal x_halsym6);
	%sumMiss (x_psumhalab4, 	x_phalsym5 x_phalsym8 x_phalsym4legal x_phalsym6);

	%diag (x_halabuse4, 		x_sumhalab4, 	1);
	%diag (x_phalabuse4, 		x_psumhalab4, 1);
	
	if x_halabuse4=1 or x_phalabuse4=1 then x_lhalabuse4=1;
	else if x_halabuse4=0 and x_phalabuse4=0 then x_lhalabuse4=0;

	********************;
	*DSM-IV DEP	;
	********************;
	%sumMiss (x_sumhaldep4, 		x_halsym10 x_halsym1 x_halsym2 x_halsym3 x_halsym7 x_halsym9);
	%sumMiss (x_psumhaldep4, 		x_phalsym10 x_phalsym1 x_phalsym2 x_phalsym3 x_phalsym7 x_phalsym9);

	%diag (x_haldep4, 	x_sumhaldep4, 		3);

	*PPY has additional requirement for diagnosis;
	if x_psumhaldep4 >=3 then do;
		if N3CD7Q2A=1 then x_phaldep4=1; *expericences happened around same time (pg 11);
		else if N3CD7Q2A = 2 then x_phaldep4=0; *experiences did not happen around same time;
		else if N3CD7Q2A = 9 then x_phaldep4=.;
	end;
	else if . < x_psumhaldep4 <3 then x_phaldep4=0;

	if x_haldep4=1 or x_phaldep4=1 then x_lhaldep4=1;
	else if x_haldep4=0 and x_phaldep4=0 then x_lhaldep4=0;

	********************;
	*DSM-5				;
	********************;
	%sumMiss (x_sumhalud5, 		x_halsym1 x_halsym2 x_halsym3 x_halsym4 x_halsym5 x_halsym6 x_halsym7 x_halsym8 x_halsym9 x_halsym10);
	%sumMiss (x_psumhalud5, 		x_phalsym1 x_phalsym2 x_phalsym3 x_phalsym4 x_phalsym5 x_phalsym6 x_phalsym7 x_phalsym8 x_phalsym9 x_phalsym10);

	%diag (x_halud5, 		x_sumhalud5, 	2);

	if x_psumhalud5 >=2 then do;
		if N3CD7Q2A=1 then x_phalud5=1;
		else if N3CD7Q2A = 2 then x_phalud5=0; 
		else if N3CD7Q2A = 9 then x_phalud5=.;
	end;
	else if . < x_psumhalud5 <2 then x_phalud5=0;

	if x_halud5=1 or x_phalud5=1 then x_lhalud5=1;
	else if x_halud5=0 and x_phalud5=0 then x_lhalud5=0;

	if x_sumhalud5 in (0 1) then x_halud5sev=0;
	else if x_sumhalud5 in (2 3) then x_halud5sev=1;
	else if x_sumhalud5 in (4 5) then x_halud5sev=2;
	else if x_sumhalud5 >= 6 then x_halud5sev=3;

	if x_psumhalud5 in (0 1) then x_phalud5sev=0;
	else if x_psumhalud5>1 and N3CD7Q2A=1 then do;
		if x_psumhalud5 in (2 3) then x_phalud5sev=1;
		else if x_psumhalud5 in (4 5) then x_phalud5sev=2;
		else if x_psumhalud5 >= 6 then x_phalud5sev=3;
	end;
	else if x_psumhalud5>1 and N3CD7Q2A=2 then x_phalud5sev=0;

*************************************************************************************************************************************************;
* INHALENTS/SOLVENTS																																							;		
*************************************************************************************************************************************************;

	****************************************;
	*	INHALENTS/SOLVENTS CRITERIA				;
	****************************************;
	if N3BQ1A8 = 2 then do; *NEVER;
		*PY = No;
		%SymNo(x_solsym1);%SymNo(x_solsym2);%SymNo(x_solsym3);%SymNo(x_solsym4);%SymNo(x_solsym5);%SymNo(x_solsym6);
		%SymNo(x_solsym7);%SymNo(x_solsym8);%SymNo(x_solsym9);%SymNo(x_solsym10);
		%SymNo(x_solsym4legal);
		*PPY = No;
		%SymNo(x_psolsym1);%SymNo(x_psolsym2);%SymNo(x_psolsym3);%SymNo(x_psolsym4);%SymNo(x_psolsym5);%SymNo(x_psolsym6);
		%SymNo(x_psolsym7);%SymNo(x_psolsym8);%SymNo(x_psolsym9);%SymNo(x_psolsym10);
		%SymNo(x_psolsym4legal);
	end;
	else if N3BQ1A8 in (1 9) then do; *EVER OR UKNOWN;
		if NDRUGUSER=2 then do; *NEVER;
			*PY = No;
			%SymNo(x_solsym1);%SymNo(x_solsym2);%SymNo(x_solsym3);%SymNo(x_solsym4);%SymNo(x_solsym5);%SymNo(x_solsym6);
			%SymNo(x_solsym7);%SymNo(x_solsym8);%SymNo(x_solsym9);%SymNo(x_solsym10);
			%SymNo(x_solsym4legal);
			*PPY = No;
			%SymNo(x_psolsym1);%SymNo(x_psolsym2);%SymNo(x_psolsym3);%SymNo(x_psolsym4);%SymNo(x_psolsym5);%SymNo(x_psolsym6);
			%SymNo(x_psolsym7);%SymNo(x_psolsym8);%SymNo(x_psolsym9);%SymNo(x_psolsym10);
			%SymNo(x_psolsym4legal);
		end;
		else do; *TIMING;
			if N3BD8Q2B = 1 then do; *PY ONLY;
				*****************;
				*PY CRITERIA;
				*****************;
				*Criterion 1: 32;
				if N3CD8Q1C32=1 then x_solsym1=1;
				else if N3CQ1A32=2 or N3CQ1B32=2 then x_solsym1=0;
				else if N3CD8Q1C32=2 then x_solsym1=0;
				*Criterion 2: (30, 31);
				if N3CD8Q1C30=1 or N3CD8Q1C31=1 then x_solsym2=1;
				else if N3CD8Q1C30=2 and N3CD8Q1C31=2 then x_solsym2=0;
				*Criterion 3: (33, 34);
				if N3CD8Q1C33=1 or N3CD8Q1C34=1 then x_solsym3=1;
				else if N3CD8Q1C33=2 and N3CD8Q1C34=2 then x_solsym3=0;		
				*Criterion OLD 4 (LEGAL);
				if N3CQ12B8=1 then x_solsym4legal=1;
				else if N3CQ12B8=2 or N3CQ12A=2 then x_solsym4legal=0; *hierarchical question - if said no to parent or child question then no;
				*Criterion 4: CRAVING (39, 40);
				if N3CD8Q1C39=1 or N3CD8Q1C40=1 then x_solsym4=1;
				else if N3CD8Q1C39=2 and N3CD8Q1C40=2 then x_solsym4=0;
				*Criterion 5: 44-46;
				if N3CD8Q1C44=1 or N3CD8Q1C45=1 or N3CD8Q1C46=1 then x_solsym5=1;
				else if N3CD8Q1C44=2 and N3CD8Q1C45=2 and N3CD8Q1C46=2 then x_solsym5=0;
				*Criterion 6:41-43;
				if N3CD8Q1C41=1 or N3CD8Q1C42=1 or N3CD8Q1C43=1 then x_solsym6=1;
				else if N3CD8Q1C41=2 and N3CD8Q1C42=2 and N3CD8Q1C43=2 then x_solsym6=0;
				*Criterion 7: (35, 36);
				if N3CD8Q1C35=1 or N3CD8Q1C36=1 then x_solsym7=1;
				else if N3CD8Q1C35=2 and N3CD8Q1C36=2 then x_solsym7=0;
				*Criterion 8: 47, 48;
				if N3CD8Q1C47=1 or N3CD8Q1C48=1 then x_solsym8=1;
				else if N3CD8Q1C47=2 and N3CD8Q1C48=2 then x_solsym8=0;
				*Criterion 9: (37, 38);
				if N3CD8Q1C37=1 or N3CD8Q1C38=1 then x_solsym9=1;
				else if N3CD8Q1C37=2 and N3CD8Q1C38=2 then x_solsym9=0;
				*Criterion 10: 1, 2;
				if N3CD8Q1C1=1 or N3CD8Q1C2=1 then x_solsym10=1;
				else if N3CD8Q1C1=2 and N3CD8Q1C2=2 then x_solsym10=0;
				*PPY = No;
				%SymNo(x_psolsym1);%SymNo(x_psolsym2);%SymNo(x_psolsym3);%SymNo(x_psolsym4);%SymNo(x_psolsym5);%SymNo(x_psolsym6);
				%SymNo(x_psolsym7);%SymNo(x_psolsym8);%SymNo(x_psolsym9);%SymNo(x_psolsym10);
				%SymNo(x_psolsym4legal);
			end; *PY ONLY;
			else if N3BD8Q2B = 2 then do; *PPY ONLY;
				*****************;
				*PPY CRITERIA;
				*****************;
				*Criterion 1: 32;
				if N3CD8Q1E32=1 then x_psolsym1=1;
				else if N3CQ1A32=2 or N3CQ1B32=2 then x_psolsym1=0;
				else if N3CD8Q1E32=2 then x_psolsym1=0;
				*Criterion 2: (30, 31);
				if N3CD8Q1E30=1 or N3CD8Q1E31=1 then x_psolsym2=1;
				else if N3CD8Q1E30=2 and N3CD8Q1E31=2 then x_psolsym2=0;
				*Criterion 3: (33, 34);
				if N3CD8Q1E33=1 or N3CD8Q1E34=1 then x_psolsym3=1;
				else if N3CD8Q1E33=2 and N3CD8Q1E34=2 then x_psolsym3=0;		
				*Criterion OLD 4 (LEGAL);
				if N3CQ12D8=1 then x_psolsym4legal=1;
				else if N3CQ12D8=2 or N3CQ12C=2 then x_psolsym4legal=0; *hierarchical question - if said no to parent or child question then no;
				*Criterion 4: CRAVING (39, 40);
				if N3CD8Q1E39=1 or N3CD8Q1E40=1 then x_psolsym4=1;
				else if N3CD8Q1E39=2 and N3CD8Q1E40=2 then x_psolsym4=0;
				*Criterion 5: 44-46;
				if N3CD8Q1E44=1 or N3CD8Q1E45=1 or N3CD8Q1E46=1 then x_psolsym5=1;
				else if N3CD8Q1E44=2 and N3CD8Q1E45=2 and N3CD8Q1E46=2 then x_psolsym5=0;
				*Criterion 6:41-43;
				if N3CD8Q1E41=1 or N3CD8Q1E42=1 or N3CD8Q1E43=1 then x_psolsym6=1;
				else if N3CD8Q1E41=2 and N3CD8Q1E42=2 and N3CD8Q1E43=2 then x_psolsym6=0;
				*Criterion 7: (35, 36);
				if N3CD8Q1E35=1 or N3CD8Q1E36=1 then x_psolsym7=1;
				else if N3CD8Q1E35=2 and N3CD8Q1E36=2 then x_psolsym7=0;
				*Criterion 8: 47, 48;
				if N3CD8Q1E47=1 or N3CD8Q1E48=1 then x_psolsym8=1;
				else if N3CD8Q1E47=2 and N3CD8Q1E48=2 then x_psolsym8=0;
				*Criterion 9: (37, 38);
				if N3CD8Q1E37=1 or N3CD8Q1E38=1 then x_psolsym9=1;
				else if N3CD8Q1E37=2 and N3CD8Q1E38=2 then x_psolsym9=0;
				*Criterion 10: 1, 2;
				if N3CD8Q1E1=1 or N3CD8Q1E2=1 then x_psolsym10=1;
				else if N3CD8Q1E1=2 and N3CD8Q1E2=2 then x_psolsym10=0;
				*PY = No;
				%SymNo(x_solsym1);%SymNo(x_solsym2);%SymNo(x_solsym3);%SymNo(x_solsym4);%SymNo(x_solsym5);%SymNo(x_solsym6);
				%SymNo(x_solsym7);%SymNo(x_solsym8);%SymNo(x_solsym9);%SymNo(x_solsym10);
				%SymNo(x_solsym4legal);
			end; *PPY ONLY;
			else if N3BD8Q2B in (3 9 .) then do; *PY + PPY or UNKNOWN;
				*****************;
				*PY CRITERIA;
				*****************;
				*Criterion 1: 32;
				if N3CD8Q1C32=1 then x_solsym1=1;
				else if N3CQ1A32=2 or N3CQ1B32=2 then x_solsym1=0;
				else if N3CD8Q1C32=2 then x_solsym1=0;
				*Criterion 2: (30, 31);
				if N3CD8Q1C30=1 or N3CD8Q1C31=1 then x_solsym2=1;
				else if N3CD8Q1C30=2 and N3CD8Q1C31=2 then x_solsym2=0;
				*Criterion 3: (33, 34);
				if N3CD8Q1C33=1 or N3CD8Q1C34=1 then x_solsym3=1;
				else if N3CD8Q1C33=2 and N3CD8Q1C34=2 then x_solsym3=0;		
				*Criterion OLD 4 (LEGAL);
				if N3CQ12B8=1 then x_solsym4legal=1;
				else if N3CQ12B8=2 or N3CQ12A=2 then x_solsym4legal=0; *hierarchical question - if said no to parent or child question then no;
				*Criterion 4: CRAVING (39, 40);
				if N3CD8Q1C39=1 or N3CD8Q1C40=1 then x_solsym4=1;
				else if N3CD8Q1C39=2 and N3CD8Q1C40=2 then x_solsym4=0;
				*Criterion 5: 44-46;
				if N3CD8Q1C44=1 or N3CD8Q1C45=1 or N3CD8Q1C46=1 then x_solsym5=1;
				else if N3CD8Q1C44=2 and N3CD8Q1C45=2 and N3CD8Q1C46=2 then x_solsym5=0;
				*Criterion 6:41-43;
				if N3CD8Q1C41=1 or N3CD8Q1C42=1 or N3CD8Q1C43=1 then x_solsym6=1;
				else if N3CD8Q1C41=2 and N3CD8Q1C42=2 and N3CD8Q1C43=2 then x_solsym6=0;
				*Criterion 7: (35, 36);
				if N3CD8Q1C35=1 or N3CD8Q1C36=1 then x_solsym7=1;
				else if N3CD8Q1C35=2 and N3CD8Q1C36=2 then x_solsym7=0;
				*Criterion 8: 47, 48;
				if N3CD8Q1C47=1 or N3CD8Q1C48=1 then x_solsym8=1;
				else if N3CD8Q1C47=2 and N3CD8Q1C48=2 then x_solsym8=0;
				*Criterion 9: (37, 38);
				if N3CD8Q1C37=1 or N3CD8Q1C38=1 then x_solsym9=1;
				else if N3CD8Q1C37=2 and N3CD8Q1C38=2 then x_solsym9=0;
				*Criterion 10: 1, 2;
				if N3CD8Q1C1=1 or N3CD8Q1C2=1 then x_solsym10=1;
				else if N3CD8Q1C1=2 and N3CD8Q1C2=2 then x_solsym10=0;
				*****************;
				*PPY CRITERIA;
				*****************;
				*Criterion 1: 32;
				if N3CD8Q1E32=1 then x_psolsym1=1;
				else if N3CQ1A32=2 or N3CQ1B32=2 then x_psolsym1=0;
				else if N3CD8Q1E32=2 then x_psolsym1=0;
				*Criterion 2: (30, 31);
				if N3CD8Q1E30=1 or N3CD8Q1E31=1 then x_psolsym2=1;
				else if N3CD8Q1E30=2 and N3CD8Q1E31=2 then x_psolsym2=0;
				*Criterion 3: (33, 34);
				if N3CD8Q1E33=1 or N3CD8Q1E34=1 then x_psolsym3=1;
				else if N3CD8Q1E33=2 and N3CD8Q1E34=2 then x_psolsym3=0;		
				*Criterion OLD 4 (LEGAL);
				if N3CQ12D8=1 then x_psolsym4legal=1;
				else if N3CQ12D8=2 or N3CQ12C=2 then x_psolsym4legal=0; *hierarchical question - if said no to parent or child question then no;
				*Criterion 4: CRAVING (39, 40);
				if N3CD8Q1E39=1 or N3CD8Q1E40=1 then x_psolsym4=1;
				else if N3CD8Q1E39=2 and N3CD8Q1E40=2 then x_psolsym4=0;
				*Criterion 5: 44-46;
				if N3CD8Q1E44=1 or N3CD8Q1E45=1 or N3CD8Q1E46=1 then x_psolsym5=1;
				else if N3CD8Q1E44=2 and N3CD8Q1E45=2 and N3CD8Q1E46=2 then x_psolsym5=0;
				*Criterion 6:41-43;
				if N3CD8Q1E41=1 or N3CD8Q1E42=1 or N3CD8Q1E43=1 then x_psolsym6=1;
				else if N3CD8Q1E41=2 and N3CD8Q1E42=2 and N3CD8Q1E43=2 then x_psolsym6=0;
				*Criterion 7: (35, 36);
				if N3CD8Q1E35=1 or N3CD8Q1E36=1 then x_psolsym7=1;
				else if N3CD8Q1E35=2 and N3CD8Q1E36=2 then x_psolsym7=0;
				*Criterion 8: 47, 48;
				if N3CD8Q1E47=1 or N3CD8Q1E48=1 then x_psolsym8=1;
				else if N3CD8Q1E47=2 and N3CD8Q1E48=2 then x_psolsym8=0;
				*Criterion 9: (37, 38);
				if N3CD8Q1E37=1 or N3CD8Q1E38=1 then x_psolsym9=1;
				else if N3CD8Q1E37=2 and N3CD8Q1E38=2 then x_psolsym9=0;
				*Criterion 10: 1, 2;
				if N3CD8Q1E1=1 or N3CD8Q1E2=1 then x_psolsym10=1;
				else if N3CD8Q1E1=2 and N3CD8Q1E2=2 then x_psolsym10=0;
			end; 
		end;
	end;

	****************************************;
	*	INHALENTS/SOLVENTS FINAL VARS			;
	****************************************;

	********************;
	*DSM-IV ABUSE;
	********************;
	%sumMiss (x_sumsolab4, 		x_solsym5 x_solsym8 x_solsym4legal x_solsym6);
	%sumMiss (x_psumsolab4, 	x_psolsym5 x_psolsym8 x_psolsym4legal x_psolsym6);

	%diag (x_solabuse4, 		x_sumsolab4, 	1);
	%diag (x_psolabuse4, 		x_psumsolab4, 1);
	
	if x_solabuse4=1 or x_psolabuse4=1 then x_lsolabuse4=1;
	else if x_solabuse4=0 and x_psolabuse4=0 then x_lsolabuse4=0;

	********************;
	*DSM-IV DEP	;
	********************;
	%sumMiss (x_sumsoldep4, 		x_solsym10 x_solsym1 x_solsym2 x_solsym3 x_solsym7 x_solsym9);
	%sumMiss (x_psumsoldep4, 		x_psolsym10 x_psolsym1 x_psolsym2 x_psolsym3 x_psolsym7 x_psolsym9);

	%diag (x_soldep4, 	x_sumsoldep4, 		3);

	*PPY has additional requirement for diagnosis;
	if x_psumsoldep4 >=3 then do;
		if N3CD8Q2A=1 then x_psoldep4=1; *expericences happened around same time (pg 11);
		else if N3CD8Q2A = 2 then x_psoldep4=0; *experiences did not happen around same time;
		else if N3CD8Q2A = 9 then x_psoldep4=.;
	end;
	else if . < x_psumsoldep4 <3 then x_psoldep4=0;

	if x_soldep4=1 or x_psoldep4=1 then x_lsoldep4=1;
	else if x_soldep4=0 and x_psoldep4=0 then x_lsoldep4=0;

	********************;
	*DSM-5				;
	********************;
	%sumMiss (x_sumsolud5, 		x_solsym1 x_solsym2 x_solsym3 x_solsym4 x_solsym5 x_solsym6 x_solsym7 x_solsym8 x_solsym9 x_solsym10);
	%sumMiss (x_psumsolud5, 		x_psolsym1 x_psolsym2 x_psolsym3 x_psolsym4 x_psolsym5 x_psolsym6 x_psolsym7 x_psolsym8 x_psolsym9 x_psolsym10);

	%diag (x_solud5, 		x_sumsolud5, 	2);

	if x_psumsolud5 >=2 then do;
		if N3CD8Q2A=1 then x_psolud5=1;
		else if N3CD8Q2A = 2 then x_psolud5=0; 
		else if N3CD8Q2A = 9 then x_psolud5=.;
	end;
	else if . < x_psumsolud5 <2 then x_psolud5=0;

	if x_solud5=1 or x_psolud5=1 then x_lsolud5=1;
	else if x_solud5=0 and x_psolud5=0 then x_lsolud5=0;

	if x_sumsolud5 in (0 1) then x_solud5sev=0;
	else if x_sumsolud5 in (2 3) then x_solud5sev=1;
	else if x_sumsolud5 in (4 5) then x_solud5sev=2;
	else if x_sumsolud5 >= 6 then x_solud5sev=3;

	if x_psumsolud5 in (0 1) then x_psolud5sev=0;
	else if x_psumsolud5>1 and N3CD8Q2A=1 then do;
		if x_psumsolud5 in (2 3) then x_psolud5sev=1;
		else if x_psumsolud5 in (4 5) then x_psolud5sev=2;
		else if x_psumsolud5 >= 6 then x_psolud5sev=3;
	end;
	else if x_psumsolud5>1 and N3CD8Q2A=2 then x_psolud5sev=0;

*************************************************************************************************************************************************;
* HEROIN																																										;		
*************************************************************************************************************************************************;

	****************************************;
	*	HEROIN CRITERIA				;
	****************************************;
	if N3BQ1A9 = 2 then do; *NEVER;
		*PY = No;
		%SymNo(x_hersym1);%SymNo(x_hersym2);%SymNo(x_hersym3);%SymNo(x_hersym4);%SymNo(x_hersym5);%SymNo(x_hersym6);
		%SymNo(x_hersym7);%SymNo(x_hersym8);%SymNo(x_hersym9);%SymNo(x_hersym10);%SymNo(x_hersym11);
		%SymNo(x_hersym11b);%SymNo(x_hersym11a);
		%SymNo(x_herwith1);%SymNo(x_herwith2);%SymNo(x_herwith3);%SymNo(x_herwith4);%SymNo(x_herwith5);%SymNo(x_herwith6);
		%SymNo(x_herwith7);%SymNo(x_herwith8);%SymNo(x_herwith9);
		%SymNo(x_hersym4legal);
		*PPY = No;
		%SymNo(x_phersym1);%SymNo(x_phersym2);%SymNo(x_phersym3);%SymNo(x_phersym4);%SymNo(x_phersym5);%SymNo(x_phersym6);
		%SymNo(x_phersym7);%SymNo(x_phersym8);%SymNo(x_phersym9);%SymNo(x_phersym10);%SymNo(x_phersym11);
		%SymNo(x_phersym11b);%SymNo(x_phersym11a);
		%SymNo(x_pherwith1);%SymNo(x_pherwith2);%SymNo(x_pherwith3);%SymNo(x_pherwith4);%SymNo(x_pherwith5);%SymNo(x_pherwith6);
		%SymNo(x_pherwith7);%SymNo(x_pherwith8);%SymNo(x_pherwith9);
		%SymNo(x_phersym4legal);
	end;
	else if N3BQ1A9 in (1 9) then do; *EVER OR UKNOWN;
		if NDRUGUSER=2 then do; *NEVER;
			*PY = No;
			%SymNo(x_hersym1);%SymNo(x_hersym2);%SymNo(x_hersym3);%SymNo(x_hersym4);%SymNo(x_hersym5);%SymNo(x_hersym6);
			%SymNo(x_hersym7);%SymNo(x_hersym8);%SymNo(x_hersym9);%SymNo(x_hersym10);%SymNo(x_hersym11);
			%SymNo(x_hersym11b);%SymNo(x_hersym11a);
			%SymNo(x_herwith1);%SymNo(x_herwith2);%SymNo(x_herwith3);%SymNo(x_herwith4);%SymNo(x_herwith5);%SymNo(x_herwith6);
			%SymNo(x_herwith7);%SymNo(x_herwith8);%SymNo(x_herwith9);
			%SymNo(x_hersym4legal);
			*PPY = No;
			%SymNo(x_phersym1);%SymNo(x_phersym2);%SymNo(x_phersym3);%SymNo(x_phersym4);%SymNo(x_phersym5);%SymNo(x_phersym6);
			%SymNo(x_phersym7);%SymNo(x_phersym8);%SymNo(x_phersym9);%SymNo(x_phersym10);%SymNo(x_phersym11);
			%SymNo(x_phersym11b);%SymNo(x_phersym11a);
			%SymNo(x_pherwith1);%SymNo(x_pherwith2);%SymNo(x_pherwith3);%SymNo(x_pherwith4);%SymNo(x_pherwith5);%SymNo(x_pherwith6);
			%SymNo(x_pherwith7);%SymNo(x_pherwith8);%SymNo(x_pherwith9);
			%SymNo(x_phersym4legal);
		end;
		else do; *TIMING;
			if N3BD9Q2B = 1 then do; *PY ONLY;
				*****************;
				*PY CRITERIA;
				*****************;
				*Criterion 1: 32;
				if N3CD9Q1C32=1 then x_hersym1=1;
				else if N3CQ1A32=2 or N3CQ1B32=2 then x_hersym1=0;
				else if N3CD9Q1C32=2 then x_hersym1=0;
				*Criterion 2: (30, 31);
				if N3CD9Q1C30=1 or N3CD9Q1C31=1 then x_hersym2=1;
				else if N3CD9Q1C30=2 and N3CD9Q1C31=2 then x_hersym2=0;
				*Criterion 3: (33, 34);
				if N3CD9Q1C33=1 or N3CD9Q1C34=1 then x_hersym3=1;
				else if N3CD9Q1C33=2 and N3CD9Q1C34=2 then x_hersym3=0;		
				*Criterion OLD 4 (LEGAL);
				if N3CQ12B9=1 then x_hersym4legal=1;
				else if N3CQ12B9=2 or N3CQ12A=2 then x_hersym4legal=0; *hierarchical question - if said no to parent or child question then no;
				*Criterion 4: CRAVING (39, 40);
				if N3CD9Q1C39=1 or N3CD9Q1C40=1 then x_hersym4=1;
				else if N3CD9Q1C39=2 and N3CD9Q1C40=2 then x_hersym4=0;
				*Criterion 5: 44-46;
				if N3CD9Q1C44=1 or N3CD9Q1C45=1 or N3CD9Q1C46=1 then x_hersym5=1;
				else if N3CD9Q1C44=2 and N3CD9Q1C45=2 and N3CD9Q1C46=2 then x_hersym5=0;
				*Criterion 6:41-43;
				if N3CD9Q1C41=1 or N3CD9Q1C42=1 or N3CD9Q1C43=1 then x_hersym6=1;
				else if N3CD9Q1C41=2 and N3CD9Q1C42=2 and N3CD9Q1C43=2 then x_hersym6=0;
				*Criterion 7: (35, 36);
				if N3CD9Q1C35=1 or N3CD9Q1C36=1 then x_hersym7=1;
				else if N3CD9Q1C35=2 and N3CD9Q1C36=2 then x_hersym7=0;
				*Criterion 8: 47, 48;
				if N3CD9Q1C47=1 or N3CD9Q1C48=1 then x_hersym8=1;
				else if N3CD9Q1C47=2 and N3CD9Q1C48=2 then x_hersym8=0;
				*Criterion 9: (37, 38);
				if N3CD9Q1C37=1 or N3CD9Q1C38=1 then x_hersym9=1;
				else if N3CD9Q1C37=2 and N3CD9Q1C38=2 then x_hersym9=0;
				*Criterion 10: 1, 2;
				if N3CD9Q1C1=1 or N3CD9Q1C2=1 then x_hersym10=1;
				else if N3CD9Q1C1=2 and N3CD9Q1C2=2 then x_hersym10=0;
				*Criterion 11 (withdrawal criterion);
				* Item A;
				if N3CD9Q1C5=1 then x_herwith1=1;
				else if N3CD9Q1C5=2 then x_herwith1=0;
				if N3CD9Q1C7=1 then x_herwith2=1;
				else if N3CD9Q1C7=2 then x_herwith2=0;
				if N3CD9Q1C12=1 then x_herwith3=1;
				else if N3CD9Q1C12=2 then x_herwith3=0;
				if N3CD9Q1C9=1 then x_herwith4=1;
				else if N3CD9Q1C9=2 then x_herwith4=0;
				if N3CD9Q1C16=1 or N3CD9Q1C26=1 then x_herwith5=1;
				else if N3CD9Q1C16=2 and N3CD9Q1C26=2 then x_herwith5=0;
				if N3CD9Q1C28=1 then x_herwith6=1;
				else if N3CD9Q1C28=2 then x_herwith6=0;
				if N3CD9Q1C8=1 then x_herwith7=1;
				else if N3CD9Q1C8=2 then x_herwith7=0;
				if N3CD9Q1C13=1 then x_herwith8=1;
				else if N3CD9Q1C13=2 then x_herwith8=0;
				if N3CD9Q1C20=1 then x_herwith9=1;
				else if N3CD9Q1C20=2 then x_herwith9=0;
				*Item B (29);
				if N3CD9Q1C29=1 then x_hersym11b=1;
				else if N3CD9Q1C29=2 then x_hersym11b=0;
				*Criterion 11 (withdrawal criterion) - Final;
				%sumMiss (x_sumherwith, x_herwith1 x_herwith2 x_herwith3 x_herwith4 x_herwith5 x_herwith6 x_herwith7 x_herwith8 x_herwith9);
				%diag (x_hersym11a, x_sumherwith, 3);
				if x_hersym11a=1 or x_hersym11b=1 then x_hersym11=1;
				else if x_hersym11a=0 and x_hersym11b=0 then x_hersym11=0;
				*PPY = No;
				%SymNo(x_phersym1);%SymNo(x_phersym2);%SymNo(x_phersym3);%SymNo(x_phersym4);%SymNo(x_phersym5);%SymNo(x_phersym6);
				%SymNo(x_phersym7);%SymNo(x_phersym8);%SymNo(x_phersym9);%SymNo(x_phersym10);%SymNo(x_phersym11);
				%SymNo(x_phersym11b);%SymNo(x_phersym11a);
				%SymNo(x_pherwith1);%SymNo(x_pherwith2);%SymNo(x_pherwith3);%SymNo(x_pherwith4);%SymNo(x_pherwith5);%SymNo(x_pherwith6);
				%SymNo(x_pherwith7);%SymNo(x_pherwith8);%SymNo(x_pherwith9);
				%SymNo(x_phersym4legal);
			end; *PY ONLY;
			else if N3BD9Q2B = 2 then do; *PPY ONLY;
				*****************;
				*PPY CRITERIA;
				*****************;
				*Criterion 1: 32;
				if N3CD9Q1E32=1 then x_phersym1=1;
				else if N3CQ1A32=2 or N3CQ1B32=2 then x_phersym1=0;
				else if N3CD9Q1E32=2 then x_phersym1=0;
				*Criterion 2: (30, 31);
				if N3CD9Q1E30=1 or N3CD9Q1E31=1 then x_phersym2=1;
				else if N3CD9Q1E30=2 and N3CD9Q1E31=2 then x_phersym2=0;
				*Criterion 3: (33, 34);
				if N3CD9Q1E33=1 or N3CD9Q1E34=1 then x_phersym3=1;
				else if N3CD9Q1E33=2 and N3CD9Q1E34=2 then x_phersym3=0;		
				*Criterion OLD 4 (LEGAL);
				if N3CQ12D9=1 then x_phersym4legal=1;
				else if N3CQ12D9=2 or N3CQ12C=2 then x_phersym4legal=0; *hierarchical question - if said no to parent or child question then no;
				*Criterion 4: CRAVING (39, 40);
				if N3CD9Q1E39=1 or N3CD9Q1E40=1 then x_phersym4=1;
				else if N3CD9Q1E39=2 and N3CD9Q1E40=2 then x_phersym4=0;
				*Criterion 5: 44-46;
				if N3CD9Q1E44=1 or N3CD9Q1E45=1 or N3CD9Q1E46=1 then x_phersym5=1;
				else if N3CD9Q1E44=2 and N3CD9Q1E45=2 and N3CD9Q1E46=2 then x_phersym5=0;
				*Criterion 6:41-43;
				if N3CD9Q1E41=1 or N3CD9Q1E42=1 or N3CD9Q1E43=1 then x_phersym6=1;
				else if N3CD9Q1E41=2 and N3CD9Q1E42=2 and N3CD9Q1E43=2 then x_phersym6=0;
				*Criterion 7: (35, 36);
				if N3CD9Q1E35=1 or N3CD9Q1E36=1 then x_phersym7=1;
				else if N3CD9Q1E35=2 and N3CD9Q1E36=2 then x_phersym7=0;
				*Criterion 8: 47, 48;
				if N3CD9Q1E47=1 or N3CD9Q1E48=1 then x_phersym8=1;
				else if N3CD9Q1E47=2 and N3CD9Q1E48=2 then x_phersym8=0;
				*Criterion 9: (37, 38);
				if N3CD9Q1E37=1 or N3CD9Q1E38=1 then x_phersym9=1;
				else if N3CD9Q1E37=2 and N3CD9Q1E38=2 then x_phersym9=0;
				*Criterion 10: 1, 2;
				if N3CD9Q1E1=1 or N3CD9Q1E2=1 then x_phersym10=1;
				else if N3CD9Q1E1=2 and N3CD9Q1E2=2 then x_phersym10=0;
				*Criterion 11 (withdrawal criterion);
				* Item A;
				if N3CD9Q1E5=1 then x_pherwith1=1;
				else if N3CD9Q1E5=2 then x_pherwith1=0;
				if N3CD9Q1E7=1 then x_pherwith2=1;
				else if N3CD9Q1E7=2 then x_pherwith2=0;
				if N3CD9Q1E12=1 then x_pherwith3=1;
				else if N3CD9Q1E12=2 then x_pherwith3=0;
				if N3CD9Q1E9=1 then x_pherwith4=1;
				else if N3CD9Q1E9=2 then x_pherwith4=0;
				if N3CD9Q1E16=1 or N3CD9Q1E26=1 then x_pherwith5=1;
				else if N3CD9Q1E16=2 and N3CD9Q1E26=2 then x_pherwith5=0;
				if N3CD9Q1E28=1 then x_pherwith6=1;
				else if N3CD9Q1E28=2 then x_pherwith6=0;
				if N3CD9Q1E8=1 then x_pherwith7=1;
				else if N3CD9Q1E8=2 then x_pherwith7=0;
				if N3CD9Q1E13=1 then x_pherwith8=1;
				else if N3CD9Q1E13=2 then x_pherwith8=0;
				if N3CD9Q1E20=1 then x_pherwith9=1;
				else if N3CD9Q1E20=2 then x_pherwith9=0;
				*Item B (29);
				if N3CD9Q1E29=1 then x_phersym11b=1;
				else if N3CD9Q1E29=2 then x_phersym11b=0;
				*Criterion 11 (withdrawal criterion) - Final;
				%sumMiss (x_psumherwith, x_pherwith1 x_pherwith2 x_pherwith3 x_pherwith4 x_pherwith5 x_pherwith6 x_pherwith7 x_pherwith8 x_pherwith9);
				%diag (x_phersym11a, x_psumherwith, 3);
				if x_phersym11a=1 or x_phersym11b=1 then x_phersym11=1;
				else if x_phersym11a=0 and x_phersym11b=0 then x_phersym11=0;
				*PY = No;
				%SymNo(x_hersym1);%SymNo(x_hersym2);%SymNo(x_hersym3);%SymNo(x_hersym4);%SymNo(x_hersym5);%SymNo(x_hersym6);
				%SymNo(x_hersym7);%SymNo(x_hersym8);%SymNo(x_hersym9);%SymNo(x_hersym10);%SymNo(x_hersym11);
				%SymNo(x_hersym11b);%SymNo(x_hersym11a);
				%SymNo(x_herwith1);%SymNo(x_herwith2);%SymNo(x_herwith3);%SymNo(x_herwith4);%SymNo(x_herwith5);%SymNo(x_herwith6);
				%SymNo(x_herwith7);%SymNo(x_herwith8);%SymNo(x_herwith9);
				%SymNo(x_hersym4legal);
			end; *PPY ONLY;
			else if N3BD9Q2B in (3 9 .) then do; *PY + PPY or UNKNOWN;
				*****************;
				*PY CRITERIA;
				*****************;
				*Criterion 1: 32;
				if N3CD9Q1C32=1 then x_hersym1=1;
				else if N3CQ1A32=2 or N3CQ1B32=2 then x_hersym1=0;
				else if N3CD9Q1C32=2 then x_hersym1=0;
				*Criterion 2: (30, 31);
				if N3CD9Q1C30=1 or N3CD9Q1C31=1 then x_hersym2=1;
				else if N3CD9Q1C30=2 and N3CD9Q1C31=2 then x_hersym2=0;
				*Criterion 3: (33, 34);
				if N3CD9Q1C33=1 or N3CD9Q1C34=1 then x_hersym3=1;
				else if N3CD9Q1C33=2 and N3CD9Q1C34=2 then x_hersym3=0;		
				*Criterion OLD 4 (LEGAL);
				if N3CQ12B9=1 then x_hersym4legal=1;
				else if N3CQ12B9=2 or N3CQ12A=2 then x_hersym4legal=0; *hierarchical question - if said no to parent or child question then no;
				*Criterion 4: CRAVING (39, 40);
				if N3CD9Q1C39=1 or N3CD9Q1C40=1 then x_hersym4=1;
				else if N3CD9Q1C39=2 and N3CD9Q1C40=2 then x_hersym4=0;
				*Criterion 5: 44-46;
				if N3CD9Q1C44=1 or N3CD9Q1C45=1 or N3CD9Q1C46=1 then x_hersym5=1;
				else if N3CD9Q1C44=2 and N3CD9Q1C45=2 and N3CD9Q1C46=2 then x_hersym5=0;
				*Criterion 6:41-43;
				if N3CD9Q1C41=1 or N3CD9Q1C42=1 or N3CD9Q1C43=1 then x_hersym6=1;
				else if N3CD9Q1C41=2 and N3CD9Q1C42=2 and N3CD9Q1C43=2 then x_hersym6=0;
				*Criterion 7: (35, 36);
				if N3CD9Q1C35=1 or N3CD9Q1C36=1 then x_hersym7=1;
				else if N3CD9Q1C35=2 and N3CD9Q1C36=2 then x_hersym7=0;
				*Criterion 8: 47, 48;
				if N3CD9Q1C47=1 or N3CD9Q1C48=1 then x_hersym8=1;
				else if N3CD9Q1C47=2 and N3CD9Q1C48=2 then x_hersym8=0;
				*Criterion 9: (37, 38);
				if N3CD9Q1C37=1 or N3CD9Q1C38=1 then x_hersym9=1;
				else if N3CD9Q1C37=2 and N3CD9Q1C38=2 then x_hersym9=0;
				*Criterion 10: 1, 2;
				if N3CD9Q1C1=1 or N3CD9Q1C2=1 then x_hersym10=1;
				else if N3CD9Q1C1=2 and N3CD9Q1C2=2 then x_hersym10=0;
				*Criterion 11 (withdrawal criterion);
				* Item A;
				if N3CD9Q1C5=1 then x_herwith1=1;
				else if N3CD9Q1C5=2 then x_herwith1=0;
				if N3CD9Q1C7=1 then x_herwith2=1;
				else if N3CD9Q1C7=2 then x_herwith2=0;
				if N3CD9Q1C12=1 then x_herwith3=1;
				else if N3CD9Q1C12=2 then x_herwith3=0;
				if N3CD9Q1C9=1 then x_herwith4=1;
				else if N3CD9Q1C9=2 then x_herwith4=0;
				if N3CD9Q1C16=1 or N3CD9Q1C26=1 then x_herwith5=1;
				else if N3CD9Q1C16=2 and N3CD9Q1C26=2 then x_herwith5=0;
				if N3CD9Q1C28=1 then x_herwith6=1;
				else if N3CD9Q1C28=2 then x_herwith6=0;
				if N3CD9Q1C8=1 then x_herwith7=1;
				else if N3CD9Q1C8=2 then x_herwith7=0;
				if N3CD9Q1C13=1 then x_herwith8=1;
				else if N3CD9Q1C13=2 then x_herwith8=0;
				if N3CD9Q1C20=1 then x_herwith9=1;
				else if N3CD9Q1C20=2 then x_herwith9=0;
				*Item B (29);
				if N3CD9Q1C29=1 then x_hersym11b=1;
				else if N3CD9Q1C29=2 then x_hersym11b=0;
				*Criterion 11 (withdrawal criterion) - Final;
				%sumMiss (x_sumherwith, x_herwith1 x_herwith2 x_herwith3 x_herwith4 x_herwith5 x_herwith6 x_herwith7 x_herwith8 x_herwith9);
				%diag (x_hersym11a, x_sumherwith, 3);
				if x_hersym11a=1 or x_hersym11b=1 then x_hersym11=1;
				else if x_hersym11a=0 and x_hersym11b=0 then x_hersym11=0;
				*****************;
				*PPY CRITERIA;
				*****************;
				*Criterion 1: 32;
				if N3CD9Q1E32=1 then x_phersym1=1;
				else if N3CQ1A32=2 or N3CQ1B32=2 then x_phersym1=0;
				else if N3CD9Q1E32=2 then x_phersym1=0;
				*Criterion 2: (30, 31);
				if N3CD9Q1E30=1 or N3CD9Q1E31=1 then x_phersym2=1;
				else if N3CD9Q1E30=2 and N3CD9Q1E31=2 then x_phersym2=0;
				*Criterion 3: (33, 34);
				if N3CD9Q1E33=1 or N3CD9Q1E34=1 then x_phersym3=1;
				else if N3CD9Q1E33=2 and N3CD9Q1E34=2 then x_phersym3=0;		
				*Criterion OLD 4 (LEGAL);
				if N3CQ12D9=1 then x_phersym4legal=1;
				else if N3CQ12D9=2 or N3CQ12C=2 then x_phersym4legal=0; *hierarchical question - if said no to parent or child question then no;
				*Criterion 4: CRAVING (39, 40);
				if N3CD9Q1E39=1 or N3CD9Q1E40=1 then x_phersym4=1;
				else if N3CD9Q1E39=2 and N3CD9Q1E40=2 then x_phersym4=0;
				*Criterion 5: 44-46;
				if N3CD9Q1E44=1 or N3CD9Q1E45=1 or N3CD9Q1E46=1 then x_phersym5=1;
				else if N3CD9Q1E44=2 and N3CD9Q1E45=2 and N3CD9Q1E46=2 then x_phersym5=0;
				*Criterion 6:41-43;
				if N3CD9Q1E41=1 or N3CD9Q1E42=1 or N3CD9Q1E43=1 then x_phersym6=1;
				else if N3CD9Q1E41=2 and N3CD9Q1E42=2 and N3CD9Q1E43=2 then x_phersym6=0;
				*Criterion 7: (35, 36);
				if N3CD9Q1E35=1 or N3CD9Q1E36=1 then x_phersym7=1;
				else if N3CD9Q1E35=2 and N3CD9Q1E36=2 then x_phersym7=0;
				*Criterion 8: 47, 48;
				if N3CD9Q1E47=1 or N3CD9Q1E48=1 then x_phersym8=1;
				else if N3CD9Q1E47=2 and N3CD9Q1E48=2 then x_phersym8=0;
				*Criterion 9: (37, 38);
				if N3CD9Q1E37=1 or N3CD9Q1E38=1 then x_phersym9=1;
				else if N3CD9Q1E37=2 and N3CD9Q1E38=2 then x_phersym9=0;
				*Criterion 10: 1, 2;
				if N3CD9Q1E1=1 or N3CD9Q1E2=1 then x_phersym10=1;
				else if N3CD9Q1E1=2 and N3CD9Q1E2=2 then x_phersym10=0;
				*Criterion 11 (withdrawal criterion);
				* Item A;
				if N3CD9Q1E5=1 then x_pherwith1=1;
				else if N3CD9Q1E5=2 then x_pherwith1=0;
				if N3CD9Q1E7=1 then x_pherwith2=1;
				else if N3CD9Q1E7=2 then x_pherwith2=0;
				if N3CD9Q1E12=1 then x_pherwith3=1;
				else if N3CD9Q1E12=2 then x_pherwith3=0;
				if N3CD9Q1E9=1 then x_pherwith4=1;
				else if N3CD9Q1E9=2 then x_pherwith4=0;
				if N3CD9Q1E16=1 or N3CD9Q1E26=1 then x_pherwith5=1;
				else if N3CD9Q1E16=2 and N3CD9Q1E26=2 then x_pherwith5=0;
				if N3CD9Q1E28=1 then x_pherwith6=1;
				else if N3CD9Q1E28=2 then x_pherwith6=0;
				if N3CD9Q1E8=1 then x_pherwith7=1;
				else if N3CD9Q1E8=2 then x_pherwith7=0;
				if N3CD9Q1E13=1 then x_pherwith8=1;
				else if N3CD9Q1E13=2 then x_pherwith8=0;
				if N3CD9Q1E20=1 then x_pherwith9=1;
				else if N3CD9Q1E20=2 then x_pherwith9=0;
				*Item B (29);
				if N3CD9Q1E29=1 then x_phersym11b=1;
				else if N3CD9Q1E29=2 then x_phersym11b=0;
				*Criterion 11 (withdrawal criterion) - Final;
				%sumMiss (x_psumherwith, x_pherwith1 x_pherwith2 x_pherwith3 x_pherwith4 x_pherwith5 x_pherwith6 x_pherwith7 x_pherwith8 x_pherwith9);
				%diag (x_phersym11a, x_psumherwith, 3);
				if x_phersym11a=1 or x_phersym11b=1 then x_phersym11=1;
				else if x_phersym11a=0 and x_phersym11b=0 then x_phersym11=0;
			end; 
		end;
	end;

	****************************************;
	*	HEROIN FINAL VARS			;
	****************************************;

	********************;
	*DSM-IV ABUSE;
	********************;
	%sumMiss (x_sumherab4, 		x_hersym5 x_hersym8 x_hersym4legal x_hersym6);
	%sumMiss (x_psumherab4, 	x_phersym5 x_phersym8 x_phersym4legal x_phersym6);

	%diag (x_herabuse4, 		x_sumherab4, 	1);
	%diag (x_pherabuse4, 	x_psumherab4, 	1);
	
	if x_herabuse4=1 or x_pherabuse4=1 then x_lherabuse4=1;
	else if x_herabuse4=0 and x_pherabuse4=0 then x_lherabuse4=0;

	********************;
	*DSM-IV DEP	;
	********************;
	%sumMiss (x_sumherdep4, 	x_hersym10 x_hersym11 x_hersym1 x_hersym2 x_hersym3 x_hersym7 x_hersym9);
	%sumMiss (x_psumherdep4, 	x_phersym10 x_phersym11 x_phersym1 x_phersym2 x_phersym3 x_phersym7 x_phersym9);

	%diag (x_herdep4, 	x_sumherdep4, 		3);

	*PPY has additional requirement for diagnosis;
	if x_psumherdep4 >=3 then do;
		if N3CD9Q2A=1 then x_pherdep4=1; *expericences happened around same time (pg 11);
		else if N3CD9Q2A = 2 then x_pherdep4=0; *experiences did not happen around same time;
		else if N3CD9Q2A = 9 then x_pherdep4=.;
	end;
	else if . < x_psumherdep4 <3 then x_pherdep4=0;

	if x_herdep4=1 or x_pherdep4=1 then x_lherdep4=1;
	else if x_herdep4=0 and x_pherdep4=0 then x_lherdep4=0;

	********************;
	*DSM-5				;
	********************;
	%sumMiss (x_sumherud5, 		x_hersym1 x_hersym2 x_hersym3 x_hersym4 x_hersym5 x_hersym6 x_hersym7 x_hersym8 x_hersym9 x_hersym10 x_hersym11);
	%sumMiss (x_psumherud5, 	x_phersym1 x_phersym2 x_phersym3 x_phersym4 x_phersym5 x_phersym6 x_phersym7 x_phersym8 x_phersym9 x_phersym10 x_phersym11);

	%diag (x_herud5, 		x_sumherud5, 	2);

	if x_psumherud5 >=2 then do;
		if N3CD9Q2A=1 then x_pherud5=1;
		else if N3CD9Q2A = 2 then x_pherud5=0; 
		else if N3CD9Q2A = 9 then x_pherud5=.;
	end;
	else if . < x_psumherud5 <2 then x_pherud5=0;

	if x_herud5=1 or x_pherud5=1 then x_lherud5=1;
	else if x_herud5=0 and x_pherud5=0 then x_lherud5=0;

	if x_sumherud5 in (0 1) then x_herud5sev=0;
	else if x_sumherud5 in (2 3) then x_herud5sev=1;
	else if x_sumherud5 in (4 5) then x_herud5sev=2;
	else if x_sumherud5 >= 6 then x_herud5sev=3;

	if x_psumherud5 in (0 1) then x_pherud5sev=0;
	else if x_psumherud5>1 and N3CD9Q2A=1 then do;
		if x_psumherud5 in (2 3) then x_pherud5sev=1;
		else if x_psumherud5 in (4 5) then x_pherud5sev=2;
		else if x_psumherud5 >= 6 then x_pherud5sev=3;
	end;
	else if x_psumherud5>1 and N3CD9Q2A=2 then x_pherud5sev=0;

*************************************************************************************************************************************************;
* ALCOHOL																																									;		
*************************************************************************************************************************************************;

	****************************************;
	*	ALCOHOL CRITERIA				;
	****************************************;
	if NCONSUMER = 3 then do; *NEVER;
		*PY = No;
		%SymNo(x_xalcsym1);%SymNo(x_xalcsym2);%SymNo(x_xalcsym3);%SymNo(x_xalcsym4);%SymNo(x_xalcsym5);%SymNo(x_xalcsym6);
		%SymNo(x_xalcsym7);%SymNo(x_xalcsym8);%SymNo(x_xalcsym9);%SymNo(x_xalcsym10);%SymNo(x_xalcsym11);
		%SymNo(x_xalcsym11b);%SymNo(x_xalcsym11a);
		%SymNo(x_xalcwith1); %SymNo(x_xalcwith2); %SymNo(x_xalcwith3); %SymNo(x_xalcwith4); %SymNo(x_xalcwith5); %SymNo(x_xalcwith6); 
		%SymNo(x_xalcwith7); %SymNo(x_xalcwith8);  
		%SymNo(x_xalcsym4legal);
		*PPY = No;
		%SymNo(x_pxalcsym1);%SymNo(x_pxalcsym2);%SymNo(x_pxalcsym3);%SymNo(x_pxalcsym4);%SymNo(x_pxalcsym5);%SymNo(x_pxalcsym6);
		%SymNo(x_pxalcsym7);%SymNo(x_pxalcsym8);%SymNo(x_pxalcsym9);%SymNo(x_pxalcsym10);%SymNo(x_pxalcsym11);
		%SymNo(x_pxalcsym11b);%SymNo(x_pxalcsym11a);
		%SymNo(x_pxalcwith1); %SymNo(x_pxalcwith2); %SymNo(x_pxalcwith3); %SymNo(x_pxalcwith4); %SymNo(x_pxalcwith5); %SymNo(x_pxalcwith6); 
		%SymNo(x_pxalcwith7); %SymNo(x_pxalcwith8);  
		%SymNo(x_pxalcsym4legal);
	end;
	else if NCONSUMER = 1 then do; *Current Drinker (PY or PPY) - can be PY only or PY + PPY;
		*****************;
		*PY CRITERIA;
		*****************;
		*Criterion 1: (7, 8);
		if N2BQ1B7=1 or N2BQ1B8=1 then x_xalcsym1=1;
		else if (N2BQ1A7=2 or N2BQ1B7=2) and (N2BQ1A8=2 or N2BQ1B8=2) then x_xalcsym1=0;
		*Criterion 2: (5, 6);
		if N2BQ1B5=1 or N2BQ1B6=1 then x_xalcsym2=1;
		else if (N2BQ1A5=2 or N2BQ1B5=2) and (N2BQ1A6=2 or N2BQ1B6=2) then x_xalcsym2=0;
		*Criterion 3: (21, 22);
		if N2BQ1B21=1 or N2BQ1B22=1 then x_xalcsym3=1;
		else if (N2BQ1A21=2 or N2BQ1B21=2) and (N2BQ1A22=2 or N2BQ1B22=2) then x_xalcsym3=0;
		*Criterion OLD 4 (LEGAL);
		if N2BQ3B5=1 then x_xalcsym4legal=1;
		else if (N2BQ3A5=2 or N2BQ3B5=2) then x_xalcsym4legal=0;
		*Criterion 4: CRAVING (28, 29);
		if N2BQ1B28=1 or N2BQ1B29=1 then x_xalcsym4=1;
		else if (N2BQ1A28=2 or N2BQ1B28=2) and (N2BQ1A29=2 or N2BQ1B29=2) then x_xalcsym4=0;
		*Criterion 5: 30-32;
		if N2BQ1B30=1 or N2BQ1B31=1 or N2BQ1B32=1 then x_xalcsym5=1;
		else if (N2BQ1A30=2 or N2BQ1B30=2) and (N2BQ1A31=2 or N2BQ1B31=2) and (N2BQ1A32=2 or N2BQ1B32=2) then x_xalcsym5=0;
		*Criterion 6:37-39;
		if N2BQ1B37=1 or N2BQ1B38=1 or N2BQ1B39=1 then x_xalcsym6=1;
		else if (N2BQ1A37=2 or N2BQ1B37=2) and (N2BQ1A38=2 or N2BQ1B38=2) and (N2BQ1A39=2 or N2BQ1B39=2) then x_xalcsym6=0;
		*Criterion 7: (23, 24);
		if N2BQ1B23=1 or N2BQ1B24=1 then x_xalcsym7=1;
		else if (N2BQ1A23=2 or N2BQ1B23=2) and (N2BQ1A24=2 or N2BQ1B24=2) then x_xalcsym7=0;
		*Criterion 8: (33-36);
		if N2BQ1B33=1 or N2BQ1B34=1 or N2BQ1B35=1 or N2BQ1B36=1 then x_xalcsym8=1;
		else if (N2BQ1A33=2 or N2BQ1B33=2) and (N2BQ1A34=2 or N2BQ1B34=2) and (N2BQ1A35=2 or N2BQ1B35=2) and (N2BQ1A36=2 or N2BQ1B36=2) then x_xalcsym8=0;
		*Criterion 9: (25-27);
		if N2BQ1B25=1 or N2BQ1B26=1 or N2BQ1B27=1 then x_xalcsym9=1;
		else if (N2BQ1A25=2 or N2BQ1B25=2) and (N2BQ1A26=2 or N2BQ1B26=2) and (N2BQ1A27=2 or N2BQ1B27=2) then x_xalcsym9=0;
		*Criterion 10: (1-4) - either 2-4 OR 1;
		if N2BQ1B1=1 or N2BQ1B2=1 or N2BQ1B3=1 or N2BQ1B4=1 then x_xalcsym10=1;
		else if (N2BQ1A1=2 or N2BQ1B1=2) and ((N2BQ1A2=2 or N2BQ1B2=2) or (N2BQ1A3=2 or N2BQ1B3=2) or (N2BQ1A4=2 or N2BQ1B4=2)) then x_xalcsym10=0;
		*Criterion 11 (withdrawal criterion);
		* Item A;
		if N2BQ1B14=1then x_xalcwith1=1;
		else if (N2BQ1A14=2 or N2BQ1B14=2) then x_xalcwith1=0;
		if N2BQ1B10=1then x_xalcwith2=1;
		else if (N2BQ1A10=2 or N2BQ1B10=2) then x_xalcwith2=0;
		if N2BQ1B9=1then x_xalcwith3=1;
		else if (N2BQ1A9=2 or N2BQ1B9=2) then x_xalcwith3=0;
		if N2BQ1B12=1then x_xalcwith4=1;
		else if (N2BQ1A12=2 or N2BQ1B12=2) then x_xalcwith4=0;
		if N2BQ1B15=1then x_xalcwith5=1;
		else if (N2BQ1A15=2 or N2BQ1B15=2) then x_xalcwith5=0;
		if N2BQ1B13=1then x_xalcwith6=1;
		else if (N2BQ1A13=2 or N2BQ1B13=2) then x_xalcwith6=0;
		if N2BQ1B11=1then x_xalcwith7=1;
		else if (N2BQ1A11=2 or N2BQ1B11=2) then x_xalcwith7=0;
		if N2BQ1B16=1then x_xalcwith8=1;
		else if (N2BQ1A16=2 or N2BQ1B16=2) then x_xalcwith8=0;
		*Item B (29);
		if N2BQ1B19=1 or N2BQ1B20=1 then x_xalcsym11b=1;
		else if (N2BQ1A19=2 or N2BQ1B19=2) and (N2BQ1A20=2 or N2BQ1B20=2) then x_xalcsym11b=0;
		*Criterion 11 (withdrawal criterion) - Final;
		%sumMiss (x_withdsyms, x_xalcwith1 x_xalcwith2 x_xalcwith3 x_xalcwith4 x_xalcwith5 x_xalcwith6 x_xalcwith7 x_xalcwith8);
		%diag (x_xalcsym11a, x_withdsyms, 2);
		if x_xalcsym11a=1 or x_xalcsym11b=1 then x_xalcsym11=1;
		else if x_xalcsym11a=0 and x_xalcsym11b=0 then x_xalcsym11=0;
		*****************;
		*PPY CRITERIA;
		*****************;
		*Criterion 1: (7, 8);
		if N2BQ1C7=1 or N2BQ1C8=1 then x_pxalcsym1=1;
		else if (N2BQ1A7=2 or N2BQ1C7=2) and (N2BQ1A8=2 or N2BQ1C8=2) then x_pxalcsym1=0;
		*Criterion 2: (5, 6);
		if N2BQ1C5=1 or N2BQ1C6=1 then x_pxalcsym2=1;
		else if (N2BQ1A5=2 or N2BQ1C5=2) and (N2BQ1A6=2 or N2BQ1C6=2) then x_pxalcsym2=0;
		*Criterion 3: (21, 22);
		if N2BQ1C21=1 or N2BQ1C22=1 then x_pxalcsym3=1;
		else if (N2BQ1A21=2 or N2BQ1C21=2) and (N2BQ1A22=2 or N2BQ1C22=2) then x_pxalcsym3=0;
		*Criterion OLD 4 (LEGAL);
		if N2BQ3C5=1 then x_pxalcsym4legal=1;
		else if (N2BQ3A5=2 or N2BQ3C5=2) then x_pxalcsym4legal=0;
		*Criterion 4: CRAVING (28, 29);
		if N2BQ1C28=1 or N2BQ1C29=1 then x_pxalcsym4=1;
		else if (N2BQ1A28=2 or N2BQ1C28=2) and (N2BQ1A29=2 or N2BQ1C29=2) then x_pxalcsym4=0;
		*Criterion 5: 30-32;
		if N2BQ1C30=1 or N2BQ1C31=1 or N2BQ1C32=1 then x_pxalcsym5=1;
		else if (N2BQ1A30=2 or N2BQ1C30=2) and (N2BQ1A31=2 or N2BQ1C31=2) and (N2BQ1A32=2 or N2BQ1C32=2) then x_pxalcsym5=0;
		*Criterion 6:37-39;
		if N2BQ1C37=1 or N2BQ1C38=1 or N2BQ1C39=1 then x_pxalcsym6=1;
		else if (N2BQ1A37=2 or N2BQ1C37=2) and (N2BQ1A38=2 or N2BQ1C38=2) and (N2BQ1A39=2 or N2BQ1C39=2) then x_pxalcsym6=0;
		*Criterion 7: (23, 24);
		if N2BQ1C23=1 or N2BQ1C24=1 then x_pxalcsym7=1;
		else if (N2BQ1A23=2 or N2BQ1C23=2) and (N2BQ1A24=2 or N2BQ1C24=2) then x_pxalcsym7=0;
		*Criterion 8: (33-36);
		if N2BQ1C33=1 or N2BQ1C34=1 or N2BQ1C35=1 or N2BQ1C36=1 then x_pxalcsym8=1;
		else if (N2BQ1A33=2 or N2BQ1C33=2) and (N2BQ1A34=2 or N2BQ1C34=2) and (N2BQ1A35=2 or N2BQ1C35=2) and (N2BQ1A36=2 or N2BQ1C36=2) then x_pxalcsym8=0;
		*Criterion 9: (25-27);
		if N2BQ1C25=1 or N2BQ1C26=1 or N2BQ1C27=1 then x_pxalcsym9=1;
		else if (N2BQ1A25=2 or N2BQ1C25=2) and (N2BQ1A26=2 or N2BQ1C26=2) and (N2BQ1A27=2 or N2BQ1C27=2) then x_pxalcsym9=0;
		*Criterion 10: (1-4) - either 2-4 OR 1;
		if N2BQ1C1=1 or N2BQ1C2=1 or N2BQ1C3=1 or N2BQ1C4=1 then x_pxalcsym10=1;
		else if (N2BQ1A1=2 or N2BQ1C1=2) and ((N2BQ1A2=2 or N2BQ1C2=2) or (N2BQ1A3=2 or N2BQ1C3=2) or (N2BQ1A4=2 or N2BQ1C4=2)) then x_pxalcsym10=0;
		*Criterion 11 (withdrawal criterion);
		* Item A;
		if N2BQ1C14=1then x_pxalcwith1=1;
		else if (N2BQ1A14=2 or N2BQ1C14=2) then x_pxalcwith1=0;
		if N2BQ1C10=1then x_pxalcwith2=1;
		else if (N2BQ1A10=2 or N2BQ1C10=2) then x_pxalcwith2=0;
		if N2BQ1C9=1then x_pxalcwith3=1;
		else if (N2BQ1A9=2 or N2BQ1C9=2) then x_pxalcwith3=0;
		if N2BQ1C12=1then x_pxalcwith4=1;
		else if (N2BQ1A12=2 or N2BQ1C12=2) then x_pxalcwith4=0;
		if N2BQ1C15=1then x_pxalcwith5=1;
		else if (N2BQ1A15=2 or N2BQ1C15=2) then x_pxalcwith5=0;
		if N2BQ1C13=1then x_pxalcwith6=1;
		else if (N2BQ1A13=2 or N2BQ1C13=2) then x_pxalcwith6=0;
		if N2BQ1C11=1then x_pxalcwith7=1;
		else if (N2BQ1A11=2 or N2BQ1C11=2) then x_pxalcwith7=0;
		if N2BQ1C16=1then x_pxalcwith8=1;
		else if (N2BQ1A16=2 or N2BQ1C16=2) then x_pxalcwith8=0;
		*Item B (29);
		if N2BQ1C19=1 or N2BQ1C20=1 then x_pxalcsym11b=1;
		else if (N2BQ1A19=2 or N2BQ1C19=2) and (N2BQ1A20=2 or N2BQ1C20=2) then x_pxalcsym11b=0;
		*Criterion 11 (withdrawal criterion) - Final;
		%sumMiss (x_pwithdsyms, x_pxalcwith1 x_pxalcwith2 x_pxalcwith3 x_pxalcwith4 x_pxalcwith5 x_pxalcwith6 x_pxalcwith7 x_pxalcwith8);
		%diag (x_pxalcsym11a, x_pwithdsyms, 2);
		if x_pxalcsym11a=1 or x_pxalcsym11b=1 then x_pxalcsym11=1;
		else if x_pxalcsym11a=0 and x_pxalcsym11b=0 then x_pxalcsym11=0;
	end; *end current drinkers (can be PY or PY + PPY);
	else if NCONSUMER = 2 then do; *Former Drinker (PPY only);
		*****************;
		*PPY CRITERIA;
		*****************;
		*Criterion 1: (7, 8);
		if N2BQ1C7=1 or N2BQ1C8=1 then x_pxalcsym1=1;
		else if (N2BQ1A7=2 or N2BQ1C7=2) and (N2BQ1A8=2 or N2BQ1C8=2) then x_pxalcsym1=0;
		*Criterion 2: (5, 6);
		if N2BQ1C5=1 or N2BQ1C6=1 then x_pxalcsym2=1;
		else if (N2BQ1A5=2 or N2BQ1C5=2) and (N2BQ1A6=2 or N2BQ1C6=2) then x_pxalcsym2=0;
		*Criterion 3: (21, 22);
		if N2BQ1C21=1 or N2BQ1C22=1 then x_pxalcsym3=1;
		else if (N2BQ1A21=2 or N2BQ1C21=2) and (N2BQ1A22=2 or N2BQ1C22=2) then x_pxalcsym3=0;
		*Criterion OLD 4 (LEGAL);
		if N2BQ3C5=1 then x_pxalcsym4legal=1;
		else if (N2BQ3A5=2 or N2BQ3C5=2) then x_pxalcsym4legal=0;
		*Criterion 4: CRAVING (28, 29);
		if N2BQ1C28=1 or N2BQ1C29=1 then x_pxalcsym4=1;
		else if (N2BQ1A28=2 or N2BQ1C28=2) and (N2BQ1A29=2 or N2BQ1C29=2) then x_pxalcsym4=0;
		*Criterion 5: 30-32;
		if N2BQ1C30=1 or N2BQ1C31=1 or N2BQ1C32=1 then x_pxalcsym5=1;
		else if (N2BQ1A30=2 or N2BQ1C30=2) and (N2BQ1A31=2 or N2BQ1C31=2) and (N2BQ1A32=2 or N2BQ1C32=2) then x_pxalcsym5=0;
		*Criterion 6:37-39;
		if N2BQ1C37=1 or N2BQ1C38=1 or N2BQ1C39=1 then x_pxalcsym6=1;
		else if (N2BQ1A37=2 or N2BQ1C37=2) and (N2BQ1A38=2 or N2BQ1C38=2) and (N2BQ1A39=2 or N2BQ1C39=2) then x_pxalcsym6=0;
		*Criterion 7: (23, 24);
		if N2BQ1C23=1 or N2BQ1C24=1 then x_pxalcsym7=1;
		else if (N2BQ1A23=2 or N2BQ1C23=2) and (N2BQ1A24=2 or N2BQ1C24=2) then x_pxalcsym7=0;
		*Criterion 8: (33-36);
		if N2BQ1C33=1 or N2BQ1C34=1 or N2BQ1C35=1 or N2BQ1C36=1 then x_pxalcsym8=1;
		else if (N2BQ1A33=2 or N2BQ1C33=2) and (N2BQ1A34=2 or N2BQ1C34=2) and (N2BQ1A35=2 or N2BQ1C35=2) and (N2BQ1A36=2 or N2BQ1C36=2) then x_pxalcsym8=0;
		*Criterion 9: (25-27);
		if N2BQ1C25=1 or N2BQ1C26=1 or N2BQ1C27=1 then x_pxalcsym9=1;
		else if (N2BQ1A25=2 or N2BQ1C25=2) and (N2BQ1A26=2 or N2BQ1C26=2) and (N2BQ1A27=2 or N2BQ1C27=2) then x_pxalcsym9=0;
		*Criterion 10: (1-4) - either 2-4 OR 1;
		if N2BQ1C1=1 or N2BQ1C2=1 or N2BQ1C3=1 or N2BQ1C4=1 then x_pxalcsym10=1;
		else if (N2BQ1A1=2 or N2BQ1C1=2) and ((N2BQ1A2=2 or N2BQ1C2=2) or (N2BQ1A3=2 or N2BQ1C3=2) or (N2BQ1A4=2 or N2BQ1C4=2)) then x_pxalcsym10=0;
		*Criterion 11 (withdrawal criterion);
		* Item A;
		if N2BQ1C14=1then x_pxalcwith1=1;
		else if (N2BQ1A14=2 or N2BQ1C14=2) then x_pxalcwith1=0;
		if N2BQ1C10=1then x_pxalcwith2=1;
		else if (N2BQ1A10=2 or N2BQ1C10=2) then x_pxalcwith2=0;
		if N2BQ1C9=1then x_pxalcwith3=1;
		else if (N2BQ1A9=2 or N2BQ1C9=2) then x_pxalcwith3=0;
		if N2BQ1C12=1then x_pxalcwith4=1;
		else if (N2BQ1A12=2 or N2BQ1C12=2) then x_pxalcwith4=0;
		if N2BQ1C15=1then x_pxalcwith5=1;
		else if (N2BQ1A15=2 or N2BQ1C15=2) then x_pxalcwith5=0;
		if N2BQ1C13=1then x_pxalcwith6=1;
		else if (N2BQ1A13=2 or N2BQ1C13=2) then x_pxalcwith6=0;
		if N2BQ1C11=1then x_pxalcwith7=1;
		else if (N2BQ1A11=2 or N2BQ1C11=2) then x_pxalcwith7=0;
		if N2BQ1C16=1then x_pxalcwith8=1;
		else if (N2BQ1A16=2 or N2BQ1C16=2) then x_pxalcwith8=0;
		*Item B (29);
		if N2BQ1C19=1 or N2BQ1C20=1 then x_pxalcsym11b=1;
		else if (N2BQ1A19=2 or N2BQ1C19=2) and (N2BQ1A20=2 or N2BQ1C20=2) then x_pxalcsym11b=0;
		*Criterion 11 (withdrawal criterion) - Final;
		%sumMiss (x_pwithdsyms, x_pxalcwith1 x_pxalcwith2 x_pxalcwith3 x_pxalcwith4 x_pxalcwith5 x_pxalcwith6 x_pxalcwith7 x_pxalcwith8);
		%diag (x_pxalcsym11a, x_pwithdsyms, 2);
		if x_pxalcsym11a=1 or x_pxalcsym11b=1 then x_pxalcsym11=1;
		else if x_pxalcsym11a=0 and x_pxalcsym11b=0 then x_pxalcsym11=0;
		*PY = No;
		%SymNo(x_xalcsym1);%SymNo(x_xalcsym2);%SymNo(x_xalcsym3);%SymNo(x_xalcsym4);%SymNo(x_xalcsym5);%SymNo(x_xalcsym6);
		%SymNo(x_xalcsym7);%SymNo(x_xalcsym8);%SymNo(x_xalcsym9);%SymNo(x_xalcsym10);%SymNo(x_xalcsym11);
		%SymNo(x_xalcsym11b);%SymNo(x_xalcsym11a);
		%SymNo(x_xalcwith1); %SymNo(x_xalcwith2); %SymNo(x_xalcwith3); %SymNo(x_xalcwith4); %SymNo(x_xalcwith5); %SymNo(x_xalcwith6); 
		%SymNo(x_xalcwith7); %SymNo(x_xalcwith8);  
		%SymNo(x_xalcsym4legal);
	end; *end former drinkers;

	****************************************;
	*	ALCOHOL FINAL VARS			;
	****************************************;

	********************;
	*DSM-IV ABUSE;
	********************;
	%sumMiss (x_sumab4, 		x_xalcsym5 x_xalcsym8 x_xalcsym4legal x_xalcsym6);
	%sumMiss (x_psumab4, 	x_pxalcsym5 x_pxalcsym8 x_pxalcsym4legal x_pxalcsym6);

	%diag (x_alcab4, 		x_sumab4, 	1);
	%diag (x_palcab4, 	x_psumab4, 	1);
	
	if x_alcab4=1 or x_palcab4=1 then x_lifealcab4=1;
	else if x_alcab4=0 and x_palcab4=0 then x_lifealcab4=0;

	********************;
	*DSM-IV DEP	;
	********************;
	%sumMiss (x_asum4sym, 	x_xalcsym10 x_xalcsym11 x_xalcsym1 x_xalcsym2 x_xalcsym3 x_xalcsym7 x_xalcsym9);
	%sumMiss (x_pasum4sym, 	x_pxalcsym10 x_pxalcsym11 x_pxalcsym1 x_pxalcsym2 x_pxalcsym3 x_pxalcsym7 x_pxalcsym9);

	%diag (x_alcdep4, 	x_asum4sym, 		3);

	*PPY has additional requirement for diagnosis;
	if x_pasum4sym >=3 then do;
		if n2bq2e notin (0 .) then x_palcdep4=1; *number of periods when these experiences occurred around the same time is not missing or 0;
		else if n2bq2e in (. 0) then x_palcdep4=0;*number of periods is missing or 0;
	end;
	else if . < x_pasum4sym <3 then x_palcdep4=0;

	if x_alcdep4=1 or x_palcdep4=1 then x_lifealcdep4=1;
	else if x_alcdep4=0 and x_palcdep4=0 then x_lifealcdep4=0;

	********************;
	*DSM-5				;
	********************;
	%sumMiss (x_sumasyms, 		x_xalcsym1 x_xalcsym2 x_xalcsym3 x_xalcsym4 x_xalcsym5 x_xalcsym6 x_xalcsym7 x_xalcsym8 x_xalcsym9 x_xalcsym10 x_xalcsym11);
	%sumMiss (x_psumasyms, 	x_pxalcsym1 x_pxalcsym2 x_pxalcsym3 x_pxalcsym4 x_pxalcsym5 x_pxalcsym6 x_pxalcsym7 x_pxalcsym8 x_pxalcsym9 x_pxalcsym10 x_pxalcsym11);

	%diag (x_pyaud5, 		x_sumasyms, 	2);

	*PPY has additional requirement for diagnosis;
	if x_psumasyms >=2 then do;
		if n2bq2e notin (0 .) then x_ppyaud5=1; *number of periods when these experiences occurred around the same time is not missing or 0;
		else if n2bq2e in (. 0) then x_ppyaud5=0;*number of periods is missing or 0;
	end;
	else if . < x_psumasyms <2 then x_ppyaud5=0;

	if x_pyaud5=1 or x_ppyaud5=1 then x_lifeaud5=1;
	else if x_pyaud5=0 and x_ppyaud5=0 then x_lifeaud5=0;


	if x_sumasyms in (0 1) then x_pyaud5sev=0;
	else if x_sumasyms in (2 3) then x_pyaud5sev=1;
	else if x_sumasyms in (4 5) then x_pyaud5sev=2;
	else if x_sumasyms >= 6 then x_pyaud5sev=3;	

	if x_psumasyms in (0 1) then x_ppyaud5sev=0;
	else if x_psumasyms>1 and n2bq2e notin (0 .) then do;
		if x_psumasyms in (2 3) then x_ppyaud5sev=1;
		else if x_psumasyms in (4 5) then x_ppyaud5sev=2;
		else if x_psumasyms >= 6 then x_ppyaud5sev=3;
	end;
	else if x_psumasyms>1 and n2bq2e in (0 .) then x_ppyaud5sev=0;

*************************************************************************************************************************************************;
* NICOTINE																																									;		
*************************************************************************************************************************************************;
		
	*If any of these questions is Yes (1) then nicotine questions are asked... if none are yes then the nicotine questions are skipped;
	if n3aq1a=1 or n3aq1b=1 or n3aq1c=1 or n3aq1d=1 or n3aq1e=1 then NICCON=1;
	else NICCON=0;

	*During the last 12 months, did you smoke at least once (for any of the 5 categories above);
	if N3AQ2B1=1 or N3AQ2B2=1 or N3AQ2B3=1 or N3AQ2B4=1 or N3AQ2B5=1 then NICAtLeast1PY=1;
	else NICAtLeast1PY=0;

	****************************************;                                                                                                  
	*	NICOTINE CRITERIA				;
	****************************************;
	if NICCON = 0 then do; *No nictotine category was marked so no questions asked;
		*PY = No;
		%SymNo(x_nicsym1);%SymNo(x_nicsym2);%SymNo(x_nicsym3);%SymNo(x_nicsym4);%SymNo(x_nicsym5);%SymNo(x_nicsym6);
		%SymNo(x_nicsym7);%SymNo(x_nicsym8);%SymNo(x_nicsym9);%SymNo(x_nicsym10);
		%SymNo(x_nicsym11b);
		%SymNo(x_nicsym411a); %SymNo(x_nicsym411);
		%SymNo(x_nicsym511a); %SymNo(x_nicsym511);
		*PPY = No;
		%SymNo(x_pnicsym1);%SymNo(x_pnicsym2);%SymNo(x_pnicsym3);%SymNo(x_pnicsym4);%SymNo(x_pnicsym5);%SymNo(x_pnicsym6);
		%SymNo(x_pnicsym7);%SymNo(x_pnicsym8);%SymNo(x_pnicsym9);%SymNo(x_pnicsym10);
		%SymNo(x_pnicsym11b);
		%SymNo(x_pnicsym411a); %SymNo(x_pnicsym411);
		%SymNo(x_pnicsym511a); %SymNo(x_pnicsym511);
	end;
	else if NICCON = 1 then do; *At Least 1 nicotine category was marked as yes (1);	
		if NICAtLeast1PY=0 then do; *EVER but none of the categories were done within the past year;
			*PY = No;
			%SymNo(x_nicsym1);%SymNo(x_nicsym2);%SymNo(x_nicsym3);%SymNo(x_nicsym4);%SymNo(x_nicsym5);%SymNo(x_nicsym6);
			%SymNo(x_nicsym7);%SymNo(x_nicsym8);%SymNo(x_nicsym9);%SymNo(x_nicsym10);
			%SymNo(x_nicsym11b);
			%SymNo(x_nicsym411a); %SymNo(x_nicsym411);
			%SymNo(x_nicsym511a); %SymNo(x_nicsym511);
			*****************;
			*PPY CRITERIA;
			*****************;
			*Criterion 1: (23);
			if N3AQ8C23=1 then x_pnicsym1=1;
			else if (N3AQ8A23=2 or N3AQ8B23=2 or N3AQ8C23=2) then x_pnicsym1=0;
			*Criterion 2: (1, 2);
			if N3AQ8C1=1 or N3AQ8C2=1 then x_pnicsym2=1;
			else if (N3AQ8A1=2 or N3AQ8B1=2 or N3AQ8C1=2) and (N3AQ8A2=2 or N3AQ8B2=2 or N3AQ8C2=2) then x_pnicsym2=0;
			*Criterion 3: (6, 33, 34);
			if N3AQ8C6=1 or N3AQ8C33=1 or N3AQ8C34=1 then x_pnicsym3=1;
			else if (N3AQ8A6=2 or N3AQ8B6=2 or N3AQ8C6=2) and (N3AQ8A33=2 or N3AQ8B33=2 or N3AQ8C33=2) and (N3AQ8A34=2 or N3AQ8B34=2 or N3AQ8C34=2) then x_pnicsym3=0;
			*Criterion 4: CRAVING (35, 36);
			if N3AQ8C35=1 or N3AQ8C36=1 then x_pnicsym4=1;
			else if (N3AQ8A35=2 or N3AQ8B35=2 or N3AQ8C35=2) and (N3AQ8A36=2 or N3AQ8B36=2 or N3AQ8C36=2) then x_pnicsym4=0;
			*Criterion 5: (28-30);
			if N3AQ8C28=1 or N3AQ8C29=1 or N3AQ8C30=1 then x_pnicsym5=1;
			else if (N3AQ8A28=2 or N3AQ8B28=2 or N3AQ8C28=2) and (N3AQ8A29=2 or N3AQ8B29=2 or N3AQ8C29=2) and (N3AQ8A30=2 or N3AQ8B30=2 or N3AQ8C30=2) then x_pnicsym5=0;
			*Criterion 6:(26, 27);
			if N3AQ8C26=1 or N3AQ8C27=1 then x_pnicsym6=1;
			else if (N3AQ8A26=2 or N3AQ8B26=2 or N3AQ8C26=2) and (N3AQ8A27=2 or N3AQ8B27=2 or N3AQ8C27=2) then x_pnicsym6=0;
			*Criterion 7: (3, 4);
			if N3AQ8C3=1 or N3AQ8C4=1 then x_pnicsym7=1;
			else if (N3AQ8A3=2 or N3AQ8B3=2 or N3AQ8C3=2) and (N3AQ8A4=2 or N3AQ8B4=2 or N3AQ8C4=2) then x_pnicsym7=0;
			*Criterion 8: (25);
			if N3AQ8C25=1 then x_pnicsym8=1;
			else if (N3AQ8A25=2 or N3AQ8B25=2 or N3AQ8C25=2) then x_pnicsym8=0;
			*Criterion 9: (5, 24);
			if N3AQ8C5=1 or N3AQ8C24=1 then x_pnicsym9=1;
			else if (N3AQ8A5=2 or N3AQ8B5=2 or N3AQ8C5=2) and (N3AQ8A24=2 or N3AQ8B24=2 or N3AQ8C24=2) then x_pnicsym9=0;
			*Criterion 10: (21, 22;
			if N3AQ8C21=1 or N3AQ8C22=1 then x_pnicsym10=1;
			else if (N3AQ8A21=2 or N3AQ8B21=2 or N3AQ8C21=2) and (N3AQ8A22=2 or N3AQ8B22=2 or N3AQ8C22=2) then x_pnicsym10=0;
			*Criterion 11 (withdrawal criterion);
			* Item A;
			if N3AQ8C7=1 then x_pnicwith1=1;
			else if (N3AQ8A7=2 or N3AQ8B7=2 or N3AQ8C7=2) then x_pnicwith1=0;
			if N3AQ8C8=1 then x_pnicwith2=1;
			else if (N3AQ8A8=2 or N3AQ8B8=2 or N3AQ8C8=2) then x_pnicwith2=0;
			if N3AQ8C11=1 then x_pnicwith3=1;
			else if (N3AQ8A11=2 or N3AQ8B11=2 or N3AQ8C11=2) then x_pnicwith3=0;
			if N3AQ8C12=1  then x_pnicwith4=1;
			else if (N3AQ8A12=2 or N3AQ8B12=2 or N3AQ8C12=2) then x_pnicwith4=0;
			if N3AQ8C9=1then x_pnicwith5=1;
			else if (N3AQ8A9=2 or N3AQ8B9=2 or N3AQ8C9=2) then x_pnicwith5=0;
			if N3AQ8C14=1 then x_pnicwith6=1;
			else if (N3AQ8A14=2 or N3AQ8B14=2 or N3AQ8C14=2) then x_pnicwith6=0;
			if N3AQ8C13=1 then x_pnicwith7=1;
			else if (N3AQ8A13=2 or N3AQ8B13=2 or N3AQ8C13=2) then x_pnicwith7=0;
			if N3AQ8C10=1 then x_pnicwith8=1;
			else if (N3AQ8A10=2 or N3AQ8B10=2 or N3AQ8C10=2) then x_pnicwith8=0;
			*Item B (17-20, 37);
			if N3AQ8C17=1 or N3AQ8C18=1 or N3AQ8C19=1 or N3AQ8C20=1 or N3AQ8C37=1 then x_pnicsym11b=1;
			else if (N3AQ8A17=2 or N3AQ8B17=2 or N3AQ8C17=2) and (N3AQ8A18=2 or N3AQ8B18=2 or N3AQ8C18=2) and (N3AQ8A19=2 or N3AQ8B19=2 or N3AQ8C19=2) 
				and (N3AQ8A20=2 or N3AQ8B20=2 or N3AQ8C20=2) and (N3AQ8A37=2 or N3AQ8B37=2 or N3AQ8C37=2) 
				then x_pnicsym11b=0;
			*Criterion 11 (withdrawal criterion) - Final;
			*DSM-IV;
			%sumMiss (x_psumwith4, x_pnicwith1 x_pnicwith2 x_pnicwith3 x_pnicwith4 x_pnicwith5 x_pnicwith6 x_pnicwith7 x_pnicwith8);
			%diag (x_pnicsym411a, x_psumwith4, 4);
			if x_pnicsym411a=1 or x_pnicsym11b=1 then x_pnicsym411=1;
			else if x_pnicsym411a=0 and x_pnicsym11b=0 then x_pnicsym411=0;
			*DSM-5;
			%sumMiss (x_psumwith5, x_pnicwith1 x_pnicwith2 x_pnicwith3 x_pnicwith4 x_pnicwith5 x_pnicwith6 x_pnicwith8);
			%diag (x_pnicsym511a, x_psumwith5, 4);
			if x_pnicsym511a=1 or x_pnicsym11b=1 then x_pnicsym511=1;
			else if x_pnicsym511a=0 and x_pnicsym11b=0 then x_pnicsym511=0;
		end;
		else do;
			*****************;
			*PY CRITERIA;
			*****************;
			*Criterion 1: (23);
			if N3AQ8B23=1 then x_nicsym1=1;
			else if (N3AQ8A23=2 or N3AQ8B23=2) then x_nicsym1=0;
			*Criterion 2: (1, 2);
			if N3AQ8B1=1 or N3AQ8B2=1 then x_nicsym2=1;
			else if (N3AQ8A1=2 or N3AQ8B1=2) and (N3AQ8A2=2 or N3AQ8B2=2) then x_nicsym2=0;
			*Criterion 3: (6, 33, 34);
			if N3AQ8B6=1 or N3AQ8B33=1 or N3AQ8B34=1 then x_nicsym3=1;
			else if (N3AQ8A6=2 or N3AQ8B6=2) and (N3AQ8A33=2 or N3AQ8B33=2) and (N3AQ8A34=2 or N3AQ8B34=2) then x_nicsym3=0;
			*Criterion 4: CRAVING (35, 36);
			if N3AQ8B35=1 or N3AQ8B36=1 then x_nicsym4=1;
			else if (N3AQ8A35=2 or N3AQ8B35=2) and (N3AQ8A36=2 or N3AQ8B36=2) then x_nicsym4=0;
			*Criterion 5: (28-30);
			if N3AQ8B28=1 or N3AQ8B29=1 or N3AQ8B30=1 then x_nicsym5=1;
			else if (N3AQ8A28=2 or N3AQ8B28=2) and (N3AQ8A29=2 or N3AQ8B29=2) and (N3AQ8A30=2 or N3AQ8B30=2) then x_nicsym5=0;
			*Criterion 6:(26, 27);
			if N3AQ8B26=1 or N3AQ8B27=1 then x_nicsym6=1;
			else if (N3AQ8A26=2 or N3AQ8B26=2) and (N3AQ8A27=2 or N3AQ8B27=2) then x_nicsym6=0;
			*Criterion 7: (3, 4);
			if N3AQ8B3=1 or N3AQ8B4=1 then x_nicsym7=1;
			else if (N3AQ8A3=2 or N3AQ8B3=2) and (N3AQ8A4=2 or N3AQ8B4=2) then x_nicsym7=0;
			*Criterion 8: (25);
			if N3AQ8B25=1 then x_nicsym8=1;
			else if (N3AQ8A25=2 or N3AQ8B25=2) then x_nicsym8=0;
			*Criterion 9: (5, 24);
			if N3AQ8B5=1 or N3AQ8B24=1 then x_nicsym9=1;
			else if (N3AQ8A5=2 or N3AQ8B5=2) and (N3AQ8A24=2 or N3AQ8B24=2) then x_nicsym9=0;
			*Criterion 10: (21, 22;
			if N3AQ8B21=1 or N3AQ8B22=1 then x_nicsym10=1;
			else if (N3AQ8A21=2 or N3AQ8B21=2) and (N3AQ8A22=2 or N3AQ8B22=2) then x_nicsym10=0;
			*Criterion 11 (withdrawal criterion);
			* Item A;
			if N3AQ8B7=1then x_nicwith1=1;
			else if (N3AQ8A7=2 or N3AQ8B7=2) then x_nicwith1=0;
			if N3AQ8B8=1then x_nicwith2=1;
			else if (N3AQ8A8=2 or N3AQ8B8=2) then x_nicwith2=0;
			if N3AQ8B11=1then x_nicwith3=1;
			else if (N3AQ8A11=2 or N3AQ8B11=2) then x_nicwith3=0;
			if N3AQ8B12=1then x_nicwith4=1;
			else if (N3AQ8A12=2 or N3AQ8B12=2) then x_nicwith4=0;
			if N3AQ8B9=1then x_nicwith5=1;
			else if (N3AQ8A9=2 or N3AQ8B9=2) then x_nicwith5=0;
			if N3AQ8B14=1then x_nicwith6=1;
			else if (N3AQ8A14=2 or N3AQ8B14=2) then x_nicwith6=0;
			if N3AQ8B13=1then x_nicwith7=1;
			else if (N3AQ8A13=2 or N3AQ8B13=2) then x_nicwith7=0;
			if N3AQ8B10=1then x_nicwith8=1;
			else if (N3AQ8A10=2 or N3AQ8B10=2) then x_nicwith8=0;
			*Item B (17-20, 37);
			if N3AQ8B17=1 or N3AQ8B18=1 or N3AQ8B19=1 or N3AQ8B20=1 or N3AQ8B37=1 then x_nicsym11b=1;
			else if (N3AQ8A17=2 or N3AQ8B17=2) and (N3AQ8A18=2 or N3AQ8B18=2) and (N3AQ8A19=2 or N3AQ8B19=2) and (N3AQ8A20=2 or N3AQ8B20=2) and (N3AQ8A37=2 or N3AQ8B37=2) 
				then x_nicsym11b=0;
			*Criterion 11 (withdrawal criterion) - Final;
			*DSM-IV;
			%sumMiss (x_sumwith4, x_nicwith1 x_nicwith2 x_nicwith3 x_nicwith4 x_nicwith5 x_nicwith6 x_nicwith7 x_nicwith8);
			%diag (x_nicsym411a, x_sumwith4, 4);
			if x_nicsym411a=1 or x_nicsym11b=1 then x_nicsym411=1;
			else if x_nicsym411a=0 and x_nicsym11b=0 then x_nicsym411=0;
			*DSM-5;
			%sumMiss (x_sumwith5, x_nicwith1 x_nicwith2 x_nicwith3 x_nicwith4 x_nicwith5 x_nicwith6 x_nicwith8);
			%diag (x_nicsym511a, x_sumwith5, 4);
			if x_nicsym511a=1 or x_nicsym11b=1 then x_nicsym511=1;
			else if x_nicsym511a=0 and x_nicsym11b=0 then x_nicsym511=0;
			*****************;
			*PPY CRITERIA;
			*****************;
			*Criterion 1: (23);
			if N3AQ8C23=1 then x_pnicsym1=1;
			else if (N3AQ8A23=2 or N3AQ8B23=2 or N3AQ8C23=2) then x_pnicsym1=0;
			*Criterion 2: (1, 2);
			if N3AQ8C1=1 or N3AQ8C2=1 then x_pnicsym2=1;
			else if (N3AQ8A1=2 or N3AQ8B1=2 or N3AQ8C1=2) and (N3AQ8A2=2 or N3AQ8B2=2 or N3AQ8C2=2) then x_pnicsym2=0;
			*Criterion 3: (6, 33, 34);
			if N3AQ8C6=1 or N3AQ8C33=1 or N3AQ8C34=1 then x_pnicsym3=1;
			else if (N3AQ8A6=2 or N3AQ8B6=2 or N3AQ8C6=2) and (N3AQ8A33=2 or N3AQ8B33=2 or N3AQ8C33=2) and (N3AQ8A34=2 or N3AQ8B34=2 or N3AQ8C34=2) then x_pnicsym3=0;
			*Criterion 4: CRAVING (35, 36);
			if N3AQ8C35=1 or N3AQ8C36=1 then x_pnicsym4=1;
			else if (N3AQ8A35=2 or N3AQ8B35=2 or N3AQ8C35=2) and (N3AQ8A36=2 or N3AQ8B36=2 or N3AQ8C36=2) then x_pnicsym4=0;
			*Criterion 5: (28-30);
			if N3AQ8C28=1 or N3AQ8C29=1 or N3AQ8C30=1 then x_pnicsym5=1;
			else if (N3AQ8A28=2 or N3AQ8B28=2 or N3AQ8C28=2) and (N3AQ8A29=2 or N3AQ8B29=2 or N3AQ8C29=2) and (N3AQ8A30=2 or N3AQ8B30=2 or N3AQ8C30=2) then x_pnicsym5=0;
			*Criterion 6:(26, 27);
			if N3AQ8C26=1 or N3AQ8C27=1 then x_pnicsym6=1;
			else if (N3AQ8A26=2 or N3AQ8B26=2 or N3AQ8C26=2) and (N3AQ8A27=2 or N3AQ8B27=2 or N3AQ8C27=2) then x_pnicsym6=0;
			*Criterion 7: (3, 4);
			if N3AQ8C3=1 or N3AQ8C4=1 then x_pnicsym7=1;
			else if (N3AQ8A3=2 or N3AQ8B3=2 or N3AQ8C3=2) and (N3AQ8A4=2 or N3AQ8B4=2 or N3AQ8C4=2) then x_pnicsym7=0;
			*Criterion 8: (25);
			if N3AQ8C25=1 then x_pnicsym8=1;
			else if (N3AQ8A25=2 or N3AQ8B25=2 or N3AQ8C25=2) then x_pnicsym8=0;
			*Criterion 9: (5, 24);
			if N3AQ8C5=1 or N3AQ8C24=1 then x_pnicsym9=1;
			else if (N3AQ8A5=2 or N3AQ8B5=2 or N3AQ8C5=2) and (N3AQ8A24=2 or N3AQ8B24=2 or N3AQ8C24=2) then x_pnicsym9=0;
			*Criterion 10: (21, 22;
			if N3AQ8C21=1 or N3AQ8C22=1 then x_pnicsym10=1;
			else if (N3AQ8A21=2 or N3AQ8B21=2 or N3AQ8C21=2) and (N3AQ8A22=2 or N3AQ8B22=2 or N3AQ8C22=2) then x_pnicsym10=0;
			*Criterion 11 (withdrawal criterion);
			* Item A;
			if N3AQ8C7=1 then x_pnicwith1=1;
			else if (N3AQ8A7=2 or N3AQ8B7=2 or N3AQ8C7=2) then x_pnicwith1=0;
			if N3AQ8C8=1 then x_pnicwith2=1;
			else if (N3AQ8A8=2 or N3AQ8B8=2 or N3AQ8C8=2) then x_pnicwith2=0;
			if N3AQ8C11=1 then x_pnicwith3=1;
			else if (N3AQ8A11=2 or N3AQ8B11=2 or N3AQ8C11=2) then x_pnicwith3=0;
			if N3AQ8C12=1  then x_pnicwith4=1;
			else if (N3AQ8A12=2 or N3AQ8B12=2 or N3AQ8C12=2) then x_pnicwith4=0;
			if N3AQ8C9=1then x_pnicwith5=1;
			else if (N3AQ8A9=2 or N3AQ8B9=2 or N3AQ8C9=2) then x_pnicwith5=0;
			if N3AQ8C14=1 then x_pnicwith6=1;
			else if (N3AQ8A14=2 or N3AQ8B14=2 or N3AQ8C14=2) then x_pnicwith6=0;
			if N3AQ8C13=1 then x_pnicwith7=1;
			else if (N3AQ8A13=2 or N3AQ8B13=2 or N3AQ8C13=2) then x_pnicwith7=0;
			if N3AQ8C10=1 then x_pnicwith8=1;
			else if (N3AQ8A10=2 or N3AQ8B10=2 or N3AQ8C10=2) then x_pnicwith8=0;
			*Item B (17-20, 37);
			if N3AQ8C17=1 or N3AQ8C18=1 or N3AQ8C19=1 or N3AQ8C20=1 or N3AQ8C37=1 then x_pnicsym11b=1;
			else if (N3AQ8A17=2 or N3AQ8B17=2 or N3AQ8C17=2) and (N3AQ8A18=2 or N3AQ8B18=2 or N3AQ8C18=2) and (N3AQ8A19=2 or N3AQ8B19=2 or N3AQ8C19=2) 
				and (N3AQ8A20=2 or N3AQ8B20=2 or N3AQ8C20=2) and (N3AQ8A37=2 or N3AQ8B37=2 or N3AQ8C37=2) 
				then x_pnicsym11b=0;
			*Criterion 11 (withdrawal criterion) - Final;
			*DSM-IV;
			%sumMiss (x_psumwith4, x_pnicwith1 x_pnicwith2 x_pnicwith3 x_pnicwith4 x_pnicwith5 x_pnicwith6 x_pnicwith7 x_pnicwith8);
			%diag (x_pnicsym411a, x_psumwith4, 4);
			if x_pnicsym411a=1 or x_pnicsym11b=1 then x_pnicsym411=1;
			else if x_pnicsym411a=0 and x_pnicsym11b=0 then x_pnicsym411=0;
			*DSM-5;
			%sumMiss (x_psumwith5, x_pnicwith1 x_pnicwith2 x_pnicwith3 x_pnicwith4 x_pnicwith5 x_pnicwith6 x_pnicwith8);
			%diag (x_pnicsym511a, x_psumwith5, 4);
			if x_pnicsym511a=1 or x_pnicsym11b=1 then x_pnicsym511=1;
			else if x_pnicsym511a=0 and x_pnicsym11b=0 then x_pnicsym511=0;
		end;
	end;

	****************************************;
	*	NICOTINE FINAL VARS			;
	****************************************;

	*NO ABUSE;

	********************;
	*DSM-IV DEP	;
	********************;
	%sumMiss (x_sum4niccrit, 	x_nicsym10 x_nicsym411 x_nicsym1 x_nicsym2 x_nicsym3 x_nicsym7 x_nicsym9);
	%sumMiss (x_psum4niccrit, 	x_pnicsym10 x_pnicsym411 x_pnicsym1 x_pnicsym2 x_pnicsym3 x_pnicsym7 x_pnicsym9);

	%diag (x_nicdep4, 	x_sum4niccrit, 		3);

	*PPY has additional requirement for diagnosis;
	if x_psum4niccrit >=3 then do;
		if N3AQ10A=1 or N3AQ10B=1 or N3AQ10C=1 then x_pnicdep4=1;
		else x_pnicdep4=0;
	end;
	else if . < x_psum4niccrit <3 then x_pnicdep4=0;

	if x_alcdep4=1 or x_palcdep4=1 then x_lifealcdep4=1;
	else if x_alcdep4=0 and x_palcdep4=0 then x_lifealcdep4=0;

	********************;
	*DSM-5				;
	********************;
	%sumMiss (x_sum5niccrit, 		x_nicsym1 x_nicsym2 x_nicsym3 x_nicsym4 x_nicsym5 x_nicsym6 x_nicsym7 x_nicsym8 x_nicsym9 x_nicsym10 x_nicsym511);
	%sumMiss (x_psum5niccrit, 		x_pnicsym1 x_pnicsym2 x_pnicsym3 x_pnicsym4 x_pnicsym5 x_pnicsym6 x_pnicsym7 x_pnicsym8 x_pnicsym9 x_pnicsym10 x_pnicsym511);

	%diag (x_nicdep5, 		x_sum5niccrit, 	2);

	*PPY has additional requirement for diagnosis;
	if x_psum5niccrit >=2 then do;
		if N3AQ10A=1 or N3AQ10B=1 or N3AQ10C=1 then x_pnicdep5=1;
		else x_pnicdep5=0;
	end;
	else if . < x_psum5niccrit <3 then x_pnicdep5=0;

	if x_nicdep5=1 or x_pnicdep5=1 then x_lnicdep5=1;
	else if x_nicdep5=0 and x_pnicdep5=0 then x_lnicdep5=0;

	if x_sum5niccrit in (0 1) then x_nicdep5sev=0;
	else if x_sum5niccrit in (2 3) then x_nicdep5sev=1;
	else if x_sum5niccrit in (4 5) then x_nicdep5sev=2;
	else if x_sum5niccrit >= 6 then x_nicdep5sev=3;	

	if x_psum5niccrit in (0 1) then x_pnicdep5sev=0;
	else if x_psum5niccrit>1 and (N3AQ10A=1 or N3AQ10B=1 or N3AQ10C=1) then do;
		if x_psum5niccrit in (2 3) then x_pnicdep5sev=1;
		else if x_psum5niccrit in (4 5) then x_pnicdep5sev=2;
		else if x_psum5niccrit >= 6 then x_pnicdep5sev=3;
	end;
	else if x_psum5niccrit>1 and (N3AQ10A ne 1 and N3AQ10B ne 1 and N3AQ10C ne 1) then x_pnicdep5sev=0;

*************************************************************************************************************************************************;
* OTHER DRUGS																																							;		
*************************************************************************************************************************************************;
*NO WITHDRAWAL CRITERIA FOR OTHER DRUGS;

	****************************************;
	*	OTHER CRITERIA				;
	****************************************;
	if N3BQ1A10 = 2 then do; *NEVER;
		*PY = No;
		%SymNo(x_othsym1);%SymNo(x_othsym2);%SymNo(x_othsym3);%SymNo(x_othsym4);%SymNo(x_othsym5);%SymNo(x_othsym6);
		%SymNo(x_othsym7);%SymNo(x_othsym8);%SymNo(x_othsym9);%SymNo(x_othsym10);%SymNo(x_othsym4legal);
		*PPY = No;
		%SymNo(x_pothsym1);%SymNo(x_pothsym2);%SymNo(x_pothsym3);%SymNo(x_pothsym4);%SymNo(x_pothsym5);%SymNo(x_pothsym6);
		%SymNo(x_pothsym7);%SymNo(x_pothsym8);%SymNo(x_pothsym9);%SymNo(x_pothsym10);%SymNo(x_pothsym4legal);
	end;
	else if N3BQ1A10 in (1 9) then do; *EVER OR UKNOWN;
		if NDRUGUSER=2 then do; *NEVER;
			*PY = No;
			%SymNo(x_othsym1);%SymNo(x_othsym2);%SymNo(x_othsym3);%SymNo(x_othsym4);%SymNo(x_othsym5);%SymNo(x_othsym6);
			%SymNo(x_othsym7);%SymNo(x_othsym8);%SymNo(x_othsym9);%SymNo(x_othsym10);%SymNo(x_othsym4legal);
			*PPY = No;
			%SymNo(x_pothsym1);%SymNo(x_pothsym2);%SymNo(x_pothsym3);%SymNo(x_pothsym4);%SymNo(x_pothsym5);%SymNo(x_pothsym6);
			%SymNo(x_pothsym7);%SymNo(x_pothsym8);%SymNo(x_pothsym9);%SymNo(x_pothsym10);%SymNo(x_pothsym4legal);
		end;
		else do; *TIMING;
			if N3BD10Q2B = 1 then do; *PY ONLY;
				*****************;
				*PY CRITERIA;
				*****************;
				*Criterion 1: 32;
				if N3CD10Q1C32=1 then x_othsym1=1;
				else if N3CQ1A32=2 or N3CQ1B32=2 then x_othsym1=0;
				else if N3CD10Q1C32=2 then x_othsym1=0;
				*Criterion 2: (30, 31);
				if N3CD10Q1C30=1 or N3CD10Q1C31=1 then x_othsym2=1;
				else if N3CD10Q1C30=2 and N3CD10Q1C31=2 then x_othsym2=0;
				*Criterion 3: (33, 34);
				if N3CD10Q1C33=1 or N3CD10Q1C34=1 then x_othsym3=1;
				else if N3CD10Q1C33=2 and N3CD10Q1C34=2 then x_othsym3=0;		
				*Criterion OLD 4 (LEGAL);
				if N3CQ12B10=1 then x_othsym4legal=1;
				else if N3CQ12B10=2 or N3CQ12A=2 then x_othsym4legal=0; *hierarchical question - if said no to parent or child question then no;
				*Criterion 4: CRAVING (39, 40);
				if N3CD10Q1C39=1 or N3CD10Q1C40=1 then x_othsym4=1;
				else if N3CD10Q1C39=2 and N3CD10Q1C40=2 then x_othsym4=0;
				*Criterion 5: 44-46;
				if N3CD10Q1C44=1 or N3CD10Q1C45=1 or N3CD10Q1C46=1 then x_othsym5=1;
				else if N3CD10Q1C44=2 and N3CD10Q1C45=2 and N3CD10Q1C46=2 then x_othsym5=0;
				*Criterion 6:41-43;
				if N3CD10Q1C41=1 or N3CD10Q1C42=1 or N3CD10Q1C43=1 then x_othsym6=1;
				else if N3CD10Q1C41=2 and N3CD10Q1C42=2 and N3CD10Q1C43=2 then x_othsym6=0;
				*Criterion 7: (35, 36);
				if N3CD10Q1C35=1 or N3CD10Q1C36=1 then x_othsym7=1;
				else if N3CD10Q1C35=2 and N3CD10Q1C36=2 then x_othsym7=0;
				*Criterion 8: 47, 48;
				if N3CD10Q1C47=1 or N3CD10Q1C48=1 then x_othsym8=1;
				else if N3CD10Q1C47=2 and N3CD10Q1C48=2 then x_othsym8=0;
				*Criterion 9: (37, 38);
				if N3CD10Q1C37=1 or N3CD10Q1C38=1 then x_othsym9=1;
				else if N3CD10Q1C37=2 and N3CD10Q1C38=2 then x_othsym9=0;
				*Criterion 10: 1, 2;
				if N3CD10Q1C1=1 or N3CD10Q1C2=1 then x_othsym10=1;
				else if N3CD10Q1C1=2 and N3CD10Q1C2=2 then x_othsym10=0;
				*PPY = No;
				%SymNo(x_pothsym1);%SymNo(x_pothsym2);%SymNo(x_pothsym3);%SymNo(x_pothsym4);%SymNo(x_pothsym5);%SymNo(x_pothsym6);
				%SymNo(x_pothsym7);%SymNo(x_pothsym8);%SymNo(x_pothsym9);%SymNo(x_pothsym10);%SymNo(x_pothsym4legal);
			end; *PY ONLY;
			else if N3BD10Q2B = 2 then do; *PPY ONLY;
				*****************;
				*PPY CRITERIA;
				*****************;
				*Criterion 1: 32;
				if N3CD10Q1E32=1 then x_pothsym1=1;
				else if N3CQ1A32=2 or N3CQ1B32=2 then x_pothsym1=0;
				else if N3CD10Q1E32=2 then x_pothsym1=0;
				*Criterion 2: (30, 31);
				if N3CD10Q1E30=1 or N3CD10Q1E31=1 then x_pothsym2=1;
				else if N3CD10Q1E30=2 and N3CD10Q1E31=2 then x_pothsym2=0;
				*Criterion 3: (33, 34);
				if N3CD10Q1E33=1 or N3CD10Q1E34=1 then x_pothsym3=1;
				else if N3CD10Q1E33=2 and N3CD10Q1E34=2 then x_pothsym3=0;		
				*Criterion OLD 4 (LEGAL);
				if N3CQ12D10=1 then x_pothsym4legal=1;
				else if N3CQ12D10=2 or N3CQ12C=2 then x_pothsym4legal=0; *hierarchical question - if said no to parent or child question then no;
				*Criterion 4: CRAVING (39, 40);
				if N3CD10Q1E39=1 or N3CD10Q1E40=1 then x_pothsym4=1;
				else if N3CD10Q1E39=2 and N3CD10Q1E40=2 then x_pothsym4=0;
				*Criterion 5: 44-46;
				if N3CD10Q1E44=1 or N3CD10Q1E45=1 or N3CD10Q1E46=1 then x_pothsym5=1;
				else if N3CD10Q1E44=2 and N3CD10Q1E45=2 and N3CD10Q1E46=2 then x_pothsym5=0;
				*Criterion 6:41-43;
				if N3CD10Q1E41=1 or N3CD10Q1E42=1 or N3CD10Q1E43=1 then x_pothsym6=1;
				else if N3CD10Q1E41=2 and N3CD10Q1E42=2 and N3CD10Q1E43=2 then x_pothsym6=0;
				*Criterion 7: (35, 36);
				if N3CD10Q1E35=1 or N3CD10Q1E36=1 then x_pothsym7=1;
				else if N3CD10Q1E35=2 and N3CD10Q1E36=2 then x_pothsym7=0;
				*Criterion 8: 47, 48;
				if N3CD10Q1E47=1 or N3CD10Q1E48=1 then x_pothsym8=1;
				else if N3CD10Q1E47=2 and N3CD10Q1E48=2 then x_pothsym8=0;
				*Criterion 9: (37, 38);
				if N3CD10Q1E37=1 or N3CD10Q1E38=1 then x_pothsym9=1;
				else if N3CD10Q1E37=2 and N3CD10Q1E38=2 then x_pothsym9=0;
				*Criterion 10: 1, 2;
				if N3CD10Q1E1=1 or N3CD10Q1E2=1 then x_pothsym10=1;
				else if N3CD10Q1E1=2 and N3CD10Q1E2=2 then x_pothsym10=0;
				*PY = No;
				%SymNo(x_othsym1);%SymNo(x_othsym2);%SymNo(x_othsym3);%SymNo(x_othsym4);%SymNo(x_othsym5);%SymNo(x_othsym6);
				%SymNo(x_othsym7);%SymNo(x_othsym8);%SymNo(x_othsym9);%SymNo(x_othsym10);%SymNo(x_othsym4legal);
			end; *PPY ONLY;
			else if N3BD10Q2B in (3 9 .) then do; *PY + PPY or UNKNOWN;
				*****************;
				*PY CRITERIA;
				*****************;
				*Criterion 1: 32;
				if N3CD10Q1C32=1 then x_othsym1=1;
				else if N3CQ1A32=2 or N3CQ1B32=2 then x_othsym1=0;
				else if N3CD10Q1C32=2 then x_othsym1=0;
				*Criterion 2: (30, 31);
				if N3CD10Q1C30=1 or N3CD10Q1C31=1 then x_othsym2=1;
				else if N3CD10Q1C30=2 and N3CD10Q1C31=2 then x_othsym2=0;
				*Criterion 3: (33, 34);
				if N3CD10Q1C33=1 or N3CD10Q1C34=1 then x_othsym3=1;
				else if N3CD10Q1C33=2 and N3CD10Q1C34=2 then x_othsym3=0;		
				*Criterion OLD 4 (LEGAL);
				if N3CQ12B10=1 then x_othsym4legal=1;
				else if N3CQ12B10=2 or N3CQ12A=2 then x_othsym4legal=0; *hierarchical question - if said no to parent or child question then no;
				*Criterion 4: CRAVING (39, 40);
				if N3CD10Q1C39=1 or N3CD10Q1C40=1 then x_othsym4=1;
				else if N3CD10Q1C39=2 and N3CD10Q1C40=2 then x_othsym4=0;
				*Criterion 5: 44-46;
				if N3CD10Q1C44=1 or N3CD10Q1C45=1 or N3CD10Q1C46=1 then x_othsym5=1;
				else if N3CD10Q1C44=2 and N3CD10Q1C45=2 and N3CD10Q1C46=2 then x_othsym5=0;
				*Criterion 6:41-43;
				if N3CD10Q1C41=1 or N3CD10Q1C42=1 or N3CD10Q1C43=1 then x_othsym6=1;
				else if N3CD10Q1C41=2 and N3CD10Q1C42=2 and N3CD10Q1C43=2 then x_othsym6=0;
				*Criterion 7: (35, 36);
				if N3CD10Q1C35=1 or N3CD10Q1C36=1 then x_othsym7=1;
				else if N3CD10Q1C35=2 and N3CD10Q1C36=2 then x_othsym7=0;
				*Criterion 8: 47, 48;
				if N3CD10Q1C47=1 or N3CD10Q1C48=1 then x_othsym8=1;
				else if N3CD10Q1C47=2 and N3CD10Q1C48=2 then x_othsym8=0;
				*Criterion 9: (37, 38);
				if N3CD10Q1C37=1 or N3CD10Q1C38=1 then x_othsym9=1;
				else if N3CD10Q1C37=2 and N3CD10Q1C38=2 then x_othsym9=0;
				*Criterion 10: 1, 2;
				if N3CD10Q1C1=1 or N3CD10Q1C2=1 then x_othsym10=1;
				else if N3CD10Q1C1=2 and N3CD10Q1C2=2 then x_othsym10=0;
				*****************;
				*PPY CRITERIA;
				*****************;
				*Criterion 1: 32;
				if N3CD10Q1E32=1 then x_pothsym1=1;
				else if N3CQ1A32=2 or N3CQ1B32=2 then x_pothsym1=0;
				else if N3CD10Q1E32=2 then x_pothsym1=0;
				*Criterion 2: (30, 31);
				if N3CD10Q1E30=1 or N3CD10Q1E31=1 then x_pothsym2=1;
				else if N3CD10Q1E30=2 and N3CD10Q1E31=2 then x_pothsym2=0;
				*Criterion 3: (33, 34);
				if N3CD10Q1E33=1 or N3CD10Q1E34=1 then x_pothsym3=1;
				else if N3CD10Q1E33=2 and N3CD10Q1E34=2 then x_pothsym3=0;		
				*Criterion OLD 4 (LEGAL);
				if N3CQ12D10=1 then x_pothsym4legal=1;
				else if N3CQ12D10=2 or N3CQ12C=2 then x_pothsym4legal=0; *hierarchical question - if said no to parent or child question then no;
				*Criterion 4: CRAVING (39, 40);
				if N3CD10Q1E39=1 or N3CD10Q1E40=1 then x_pothsym4=1;
				else if N3CD10Q1E39=2 and N3CD10Q1E40=2 then x_pothsym4=0;
				*Criterion 5: 44-46;
				if N3CD10Q1E44=1 or N3CD10Q1E45=1 or N3CD10Q1E46=1 then x_pothsym5=1;
				else if N3CD10Q1E44=2 and N3CD10Q1E45=2 and N3CD10Q1E46=2 then x_pothsym5=0;
				*Criterion 6:41-43;
				if N3CD10Q1E41=1 or N3CD10Q1E42=1 or N3CD10Q1E43=1 then x_pothsym6=1;
				else if N3CD10Q1E41=2 and N3CD10Q1E42=2 and N3CD10Q1E43=2 then x_pothsym6=0;
				*Criterion 7: (35, 36);
				if N3CD10Q1E35=1 or N3CD10Q1E36=1 then x_pothsym7=1;
				else if N3CD10Q1E35=2 and N3CD10Q1E36=2 then x_pothsym7=0;
				*Criterion 8: 47, 48;
				if N3CD10Q1E47=1 or N3CD10Q1E48=1 then x_pothsym8=1;
				else if N3CD10Q1E47=2 and N3CD10Q1E48=2 then x_pothsym8=0;
				*Criterion 9: (37, 38);
				if N3CD10Q1E37=1 or N3CD10Q1E38=1 then x_pothsym9=1;
				else if N3CD10Q1E37=2 and N3CD10Q1E38=2 then x_pothsym9=0;
				*Criterion 10: 1, 2;
				if N3CD10Q1E1=1 or N3CD10Q1E2=1 then x_pothsym10=1;
				else if N3CD10Q1E1=2 and N3CD10Q1E2=2 then x_pothsym10=0;
			end; 
		end;
	end;

	****************************************;
	*	OTHER DRUG FINAL VARS			;
	****************************************;

	********************;
	*DSM-IV ABUSE;
	********************;
	%sumMiss (x_sumothab4, 		x_othsym5 x_othsym8 x_othsym4legal x_othsym6);
	%sumMiss (x_psumothab4, 	x_pothsym5 x_pothsym8 x_pothsym4legal x_pothsym6);

	%diag (x_othabuse4, 	x_sumothab4, 	1);
	%diag (x_pothabuse4, 	x_psumothab4, 	1);
	
	if x_othabuse4=1 or x_pothabuse4=1 then x_lothabuse4=1;
	else if x_othabuse4=0 and x_pothabuse4=0 then x_lothabuse4=0;

	********************;
	*DSM-IV DEP	;
	********************;
	%sumMiss (x_sumothdep4, 	x_othsym10 x_othsym1 x_othsym2 x_othsym3 x_othsym7 x_othsym9);
	%sumMiss (x_psumothdep4, 	x_pothsym10 x_pothsym1 x_pothsym2 x_pothsym3 x_pothsym7 x_pothsym9);

	%diag (x_othdep4, 	x_sumothdep4, 		3);

	*PPY has additional requirement for diagnosis;
	if x_psumothdep4 >=3 then do;
		if N3CD10Q2A=1 then x_pothdep4=1; *expericences happened around same time (pg 11);
		else if N3CD10Q2A = 2 then x_pothdep4=0; *experiences did not happen around same time;
		else if N3CD10Q2A = 9 then x_pothdep4=.;
	end;
	else if . < x_psumothdep4 <3 then x_pothdep4=0;

	if x_othdep4=1 or x_pothdep4=1 then x_lothdep4=1;
	else if x_othdep4=0 and x_pothdep4=0 then x_lothdep4=0;

	********************;
	*DSM-5				;
	********************;
	%sumMiss (x_sumothud5, 		x_othsym1 x_othsym2 x_othsym3 x_othsym4 x_othsym5 x_othsym6 x_othsym7 x_othsym8 x_othsym9 x_othsym10);
	%sumMiss (x_psumothud5, 	x_pothsym1 x_pothsym2 x_pothsym3 x_pothsym4 x_pothsym5 x_pothsym6 x_pothsym7 x_pothsym8 x_pothsym9 x_pothsym10);

	%diag (x_othud5, 		x_sumothud5, 	2);

	if x_psumothud5 >=2 then do;
		if N3CD10Q2A=1 then x_pothud5=1;
		else if N3CD10Q2A = 2 then x_pothud5=0; 
		else if N3CD10Q2A = 9 then x_pothud5=.;
	end;
	else if . < x_psumothud5 <2 then x_pothud5=0;

	if x_othud5=1 or x_pothud5=1 then x_lothud5=1;
	else if x_othud5=0 and x_pothud5=0 then x_lothud5=0;

	if x_sumothud5 in (0 1) then x_othud5sev=0;
	else if x_sumothud5 in (2 3) then x_othud5sev=1;
	else if x_sumothud5 in (4 5) then x_othud5sev=2;
	else if x_sumothud5 >= 6 then x_othud5sev=3;

	if x_psumothud5 in (0 1) then x_pothud5sev=0;
	else if x_psumothud5>1 and N3CD10Q2A=1 then do;
		if x_psumothud5 in (2 3) then x_pothud5sev=1;
		else if x_psumothud5 in (4 5) then x_pothud5sev=2;
		else if x_psumothud5 >= 6 then x_pothud5sev=3;
	end;
	else if x_psumothud5>1 and N3CD10Q2A=2 then x_pothud5sev=0;

*************************************************************************************************************************************************;
* FINAL VARS																																							;		
*************************************************************************************************************************************************;

	*ANYDRUG;
	if sum(of x_herud5 x_solud5 x_halud5 x_clbud5 x_stiud5 x_cocud5 x_sedud5 x_opud5 x_maud5 x_othud5)>=1 then x_anydrgud5=1;
	else if sum(of x_herud5 x_solud5 x_halud5 x_clbud5 x_stiud5 x_cocud5 x_sedud5 x_opud5 x_maud5 x_othud5)=0 then x_anydrgud5=0;


	*CHANGE ALL MISSINGS TO 0;
	array missX (*) 		x_pothud5sev x_othud5sev x_othud5 x_pothud5 x_lothud5 x_othdep4 x_pothdep4 x_lothdep4 x_othabuse4 x_pothabuse4 x_lothabuse4
							x_pnicdep5sev x_nicdep5sev x_nicdep5 x_pnicdep5 x_lnicdep5 x_nicdep4 x_pnicdep4 x_lifealcdep4
							x_ppyaud5sev x_pyaud5sev x_pyaud5 x_ppyaud5 x_lifeaud5 x_alcdep4 x_palcdep4 x_lifealcdep4 x_alcab4 x_palcab4 x_lifealcab4
							x_pherud5sev x_herud5sev x_herud5 x_pherud5 x_lherud5 x_herdep4 x_pherdep4 x_lherdep4 x_herabuse4 x_pherabuse4 x_lherabuse4
							x_psolud5sev x_solud5sev x_solud5 x_psolud5 x_lsolud5 x_soldep4 x_psoldep4 x_lsoldep4 x_solabuse4 x_psolabuse4 x_lsolabuse4
							x_phalud5sev x_halud5sev x_halud5 x_phalud5 x_lhalud5 x_haldep4 x_phaldep4 x_lhaldep4 x_halabuse4 x_phalabuse4 x_lhalabuse4
							x_pclbud5sev x_clbud5sev x_clbud5 x_pclbud5 x_lclbud5 x_clbdep4 x_pclbdep4 x_lclbdep4 x_clbabuse4 x_pclbabuse4 x_lclbabuse4
							x_pstiud5sev x_stiud5sev x_stiud5 x_pstiud5 x_lstiud5 x_stidep4 x_pstidep4 x_lstidep4 x_stiabuse4 x_pstiabuse4 x_lstiabuse4
							x_pcocud5sev x_cocud5sev x_cocud5 x_pcocud5 x_lcocud5 x_cocdep4 x_pcocdep4 x_lcocdep4 x_cocabuse4 x_pcocabuse4 x_lcocabuse4
							x_psedud5sev x_sedud5sev x_sedud5 x_psedud5 x_lsedud5 x_seddep4 x_pseddep4 x_lseddep4 x_sedabuse4 x_psedabuse4 x_lsedabuse4
							x_popud5sev x_opud5sev x_opud5 x_popud5 x_lopud5 x_opdep4 x_popdep4 x_lopdep4 x_opabuse4 x_popabuse4 x_lopabuse4
							x_pmaud5sev x_maud5sev x_maud5 x_pmaud5 x_lmaud5 x_madep4 x_pmadep4 x_lmadep4 x_maabuse4 x_pmaabuse4 x_lmaabuse4;
	do i=1 to dim(missX);
		if missX(i)=. then missX(i)=0;
	end;

/*keep x_:;*/
run;

/*ods html close;*/
/*ods preferences;*/
/*ods html newfile=none;*/
/*%macro freqtest(var=);*/
/*proc freq data=ADDSM;*/
/*	tables x_&var*&var;*/
/*run;*/
/*%mend;*/
/*%freqtest (var=othud5);*/
/*%freqtest (var=anydrgud5);*/

